{"version":3,"sources":["../../src/components/add_device.js"],"names":[],"mappings":";;;;;;;;;;;;;AAAO;;AACA;;;;;;;;;;;;;;;;;;;;;AAEH,iBAAW;AACb,qBAAa,EAAb;AACA,cAAM,QAAN;AACA,4BAAoB,EAApB;AACA,mBAAW,OAAX;AACA,mBAAW,CAAX;AACA,mBAAW,EAAX;AACA,uBAAe,KAAf;AACA,mBAAW,EAAX;AACA,wBAAgB,EAAhB;;;+BAGW;;;AAEX,iBAFW,aAEX,CAAY,MAAZ,EAAoB,SAApB,EAA+B,SAA/B,EAA0C,UAA1C,EAAsD,QAAtD,EAAgE;gCAFrD,eAEqD;;AAC9D,eAAK,UAAL,GAAkB,UAAlB,CAD8D;AAE9D,eAAK,QAAL,GAAgB,QAAhB,CAF8D;AAG9D,eAAK,SAAL,GAAiB,SAAjB,CAH8D;AAI9D,eAAK,MAAL,GAAc,QAAQ,IAAR,CAAa,QAAb,CAAd,CAJ8D;AAK9D,eAAK,SAAL,GAAiB,CAAC,EAAC,IAAI,EAAJ,EAAF,CAAjB,CAL8D;SAAhE;;qBAFW;;kCAUH;AACN,iBAAK,SAAL,CAAe,IAAf,CAAoB,EAAC,IAAI,EAAJ,EAArB,EADM;;;;mCAIC,OAAO;AACd,iBAAK,SAAL,CAAe,MAAf,CAAsB,KAAtB,EAA6B,CAA7B,EADc;;;;sCAIJ;;;AACV,gBAAI,OAAO,IAAP,CADM;AAEV,gBAAI,MAAM,EAAN,CAFM;AAGV,cAAE,OAAF,CAAU,KAAK,SAAL,EAAgB,UAAS,EAAT,EAAa;AACrC,kBAAI,IAAJ,CAAS,GAAG,EAAH,CAAT,CADqC;aAAb,CAA1B,CAHU;AAMV,iBAAK,MAAL,CAAY,SAAZ,GAAwB,IAAI,IAAJ,EAAxB,CANU;AAOV,iBAAK,UAAL,CAAgB,IAAhB,CAAqB,mDAArB,EAA0E,KAAK,MAAL,CAA1E,CAAuF,IAAvF,CAA4F,UAAC,IAAD,EAAU;AACpG,kBAAI,SAAS,IAAT,EAAe;AACjB,sBAAK,QAAL,CAAc,GAAd,CAAkB,oBAAlB,EAAwC,KAAK,GAAL,EAAU,OAAlD,EADiB;eAAnB,MAEO;AACL,qBAAK,SAAL,CAAe,GAAf,CAAmB,sCAAnB,EADK;eAFP;aAD0F,CAA5F,CAPU;;;;eAlBD;;;;;AAmCb,oBAAc,WAAd,GAA4B,4BAA5B","file":"add_device.js","sourcesContent":["import _ from 'lodash';\nimport angular from 'angular';\n\nvar defaults = {\n  device_name: '',\n  type: 'router',\n  device_description: '',\n  flow_type: 'sflow',\n  flow_rate: 5,\n  other_ips: '',\n  minimize_snmp: false,\n  device_ip: '',\n  snmp_community: ''\n};\n\nexport class AddDeviceCtrl {\n  /** @ngInject */\n  constructor($scope, $injector, $location, backendSrv, alertSrv) {\n    this.backendSrv = backendSrv;\n    this.alertSrv = alertSrv;\n    this.$location = $location;\n    this.device = angular.copy(defaults);\n    this.other_ips = [{ip: ''}];\n  }\n\n  addIP() {\n    this.other_ips.push({ip: ''});\n  }\n\n  removeIP(index) {\n    this.other_ips.splice(index, 1);\n  }\n\n  addDevice() {\n    var self = this;\n    var ips = [];\n    _.forEach(this.other_ips, function(ip) {\n      ips.push(ip.ip);\n    });\n    this.device.other_ips = ips.join();\n    this.backendSrv.post(\"/api/plugin-proxy/kentik-app/api/v1/device/create\", this.device).then((resp) => {\n      if ('err' in resp) {\n        this.alertSrv.set(\"Device Add failed.\", resp.err, 'error');\n      } else {\n        self.$location.url(\"/plugins/kentik-app/page/device-list\");\n      }\n    });\n  }\n}\n\nAddDeviceCtrl.templateUrl = 'components/add_device.html';\n"]}