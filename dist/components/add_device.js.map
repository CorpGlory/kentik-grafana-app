{"version":3,"sources":["../../src/components/add_device.js"],"names":["_","angular","defaults","device_name","type","device_description","flow_type","flow_rate","other_ips","minimize_snmp","device_ip","snmp_community","AddDeviceCtrl","$scope","$injector","$location","backendSrv","alertSrv","device","copy","ip","push","index","splice","self","ips","forEach","join","post","then","resp","set","err","url","templateUrl"],"mappings":";;;;;;;;;;;;;;;AAAOA,O;;AACAC,a;;;;;;;;;;;;;;;;;;;;;AAEHC,c,GAAW;AACbC,qBAAa,EADA;AAEbC,cAAM,QAFO;AAGbC,4BAAoB,EAHP;AAIbC,mBAAW,OAJE;AAKbC,mBAAW,CALE;AAMbC,mBAAW,EANE;AAObC,uBAAe,KAPF;AAQbC,mBAAW,EARE;AASbC,wBAAgB;AATH,O;;+BAYFC,a;AACX;AACA,+BAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,SAA/B,EAA0CC,UAA1C,EAAsDC,QAAtD,EAAgE;AAAA;;AAC9D,eAAKD,UAAL,GAAkBA,UAAlB;AACA,eAAKC,QAAL,GAAgBA,QAAhB;AACA,eAAKF,SAAL,GAAiBA,SAAjB;AACA,eAAKG,MAAL,GAAcjB,QAAQkB,IAAR,CAAajB,QAAb,CAAd;AACA,eAAKM,SAAL,GAAiB,CAAC,EAACY,IAAI,EAAL,EAAD,CAAjB;AACD;;;;kCAEO;AACN,iBAAKZ,SAAL,CAAea,IAAf,CAAoB,EAACD,IAAI,EAAL,EAApB;AACD;;;mCAEQE,K,EAAO;AACd,iBAAKd,SAAL,CAAee,MAAf,CAAsBD,KAAtB,EAA6B,CAA7B;AACD;;;sCAEW;AAAA;;AACV,gBAAIE,OAAO,IAAX;AACA,gBAAIC,MAAM,EAAV;AACAzB,cAAE0B,OAAF,CAAU,KAAKlB,SAAf,EAA0B,UAASY,EAAT,EAAa;AACrCK,kBAAIJ,IAAJ,CAASD,GAAGA,EAAZ;AACD,aAFD;AAGA,iBAAKF,MAAL,CAAYV,SAAZ,GAAwBiB,IAAIE,IAAJ,EAAxB;AACA,iBAAKX,UAAL,CAAgBY,IAAhB,CAAqB,mDAArB,EAA0E,KAAKV,MAA/E,EAAuFW,IAAvF,CAA4F,UAACC,IAAD,EAAU;AACpG,kBAAI,SAASA,IAAb,EAAmB;AACjB,sBAAKb,QAAL,CAAcc,GAAd,CAAkB,oBAAlB,EAAwCD,KAAKE,GAA7C,EAAkD,OAAlD;AACD,eAFD,MAEO;AACLR,qBAAKT,SAAL,CAAekB,GAAf,CAAmB,sCAAnB;AACD;AACF,aAND;AAOD;;;;;;;;AAGHrB,oBAAcsB,WAAd,GAA4B,4BAA5B","file":"add_device.js","sourcesContent":["import _ from 'lodash';\nimport angular from 'angular';\n\nvar defaults = {\n  device_name: '',\n  type: 'router',\n  device_description: '',\n  flow_type: 'sflow',\n  flow_rate: 5,\n  other_ips: '',\n  minimize_snmp: false,\n  device_ip: '',\n  snmp_community: ''\n};\n\nexport class AddDeviceCtrl {\n  /** @ngInject */\n  constructor($scope, $injector, $location, backendSrv, alertSrv) {\n    this.backendSrv = backendSrv;\n    this.alertSrv = alertSrv;\n    this.$location = $location;\n    this.device = angular.copy(defaults);\n    this.other_ips = [{ip: ''}];\n  }\n\n  addIP() {\n    this.other_ips.push({ip: ''});\n  }\n\n  removeIP(index) {\n    this.other_ips.splice(index, 1);\n  }\n\n  addDevice() {\n    var self = this;\n    var ips = [];\n    _.forEach(this.other_ips, function(ip) {\n      ips.push(ip.ip);\n    });\n    this.device.other_ips = ips.join();\n    this.backendSrv.post(\"/api/plugin-proxy/kentik-app/api/v1/device/create\", this.device).then((resp) => {\n      if ('err' in resp) {\n        this.alertSrv.set(\"Device Add failed.\", resp.err, 'error');\n      } else {\n        self.$location.url(\"/plugins/kentik-app/page/device-list\");\n      }\n    });\n  }\n}\n\nAddDeviceCtrl.templateUrl = 'components/add_device.html';\n"]}