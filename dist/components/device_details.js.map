{"version":3,"sources":["../../src/components/device_details.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mCAAM;;;AAEJ,iBAFI,iBAEJ,CAAY,MAAZ,EAAoB,SAApB,EAA+B,SAA/B,EAA0C,UAA1C,EAAsD;gCAFlD,mBAEkD;;AACpD,eAAK,UAAL,GAAkB,UAAlB,CADoD;AAEpD,eAAK,SAAL,GAAiB,SAAjB,CAFoD;AAGpD,eAAK,MAAL,GAAc,EAAd,CAHoD;AAIpD,eAAK,SAAL,GAAiB,EAAjB,CAJoD;AAKpD,eAAK,SAAL,GAAiB,KAAjB,CALoD;AAMpD,eAAK,SAAL,CAAe,UAAU,MAAV,GAAmB,MAAnB,CAAf,CANoD;SAAtD;;qBAFI;;kCAWI;AACN,iBAAK,SAAL,CAAe,IAAf,CAAoB,EAAC,IAAI,EAAJ,EAArB,EADM;;;;mCAIC,OAAO;AACd,iBAAK,SAAL,CAAe,MAAf,CAAsB,KAAtB,EAA6B,CAA7B,EADc;;;;oCAIN,UAAU;AAClB,gBAAI,OAAO,IAAP,CADc;AAElB,iBAAK,UAAL,CAAgB,GAAhB,CAAoB,6CAA2C,QAA3C,CAApB,CAAyE,IAAzE,CAA8E,UAAS,IAAT,EAAe;AAC3F,mBAAK,MAAL,GAAc,KAAK,MAAL,CAAY,CAAZ,CAAd,CAD2F;AAE3F,mBAAK,eAAL,GAF2F;AAG3F,mBAAK,SAAL,GAAiB,IAAjB,CAH2F;aAAf,CAA9E,CAFkB;;;;4CASF;AAChB,gBAAI,OAAO,IAAP,CADY;AAEhB,iBAAK,SAAL,GAAiB;AACf,yBAAW,KAAK,MAAL,CAAY,SAAZ;AACX,2BAAa,KAAK,MAAL,CAAY,WAAZ;AACb,oBAAM,KAAK,MAAL,CAAY,WAAZ;AACN,kCAAoB,KAAK,MAAL,CAAY,kBAAZ;AACpB,yBAAW,KAAK,MAAL,CAAY,gBAAZ;AACX,yBAAW,SAAS,KAAK,MAAL,CAAY,kBAAZ,CAApB;AACA,yBAAW,KAAK,MAAL,CAAY,oBAAZ;AACX,6BAAe,KAAK,MAAL,CAAY,aAAZ;AACf,yBAAW,KAAK,MAAL,CAAY,cAAZ;AACX,8BAAgB,KAAK,MAAL,CAAY,qBAAZ;aAVlB,CAFgB;AAchB,iBAAK,SAAL,GAAiB,EAAjB,CAdgB;AAehB,cAAE,OAAF,CAAU,KAAK,SAAL,CAAe,SAAf,CAAyB,KAAzB,CAA+B,GAA/B,CAAV,EAA+C,UAAS,EAAT,EAAa;AAC1D,mBAAK,SAAL,CAAe,IAAf,CAAoB,EAAC,IAAI,EAAJ,EAArB,EAD0D;aAAb,CAA/C,CAfgB;;;;mCAoBT;AACP,gBAAI,MAAM,EAAN,CADG;AAEP,cAAE,OAAF,CAAU,KAAK,SAAL,EAAgB,UAAS,EAAT,EAAa;AACrC,kBAAI,IAAJ,CAAS,GAAG,EAAH,CAAT,CADqC;aAAb,CAA1B,CAFO;AAKP,iBAAK,SAAL,CAAe,SAAf,GAA2B,IAAI,IAAJ,EAA3B,CALO;AAMP,iBAAK,UAAL,CAAgB,IAAhB,CAAqB,6CAA2C,KAAK,SAAL,CAAe,SAAf,EAA0B,KAAK,SAAL,CAA1F,CANO;;;;eAhDL;;;AA0DN,wBAAkB,WAAlB,GAAgC,gCAAhC;;mCAEQ","file":"device_details.js","sourcesContent":["class DeviceDetailsCtrl {\n\t/** @ngInject */\n  constructor($scope, $injector, $location, backendSrv) {\n    this.backendSrv = backendSrv;\n    this.$location = $location;\n    this.device = {};\n    this.deviceDTO = {};\n    this.pageReady = false;\n    this.getDevice($location.search().device);\n  }\n\n  addIP() {\n    this.other_ips.push({ip: ''});\n  }\n\n  removeIP(index) {\n    this.other_ips.splice(index, 1);\n  }\n\n  getDevice(deviceId) {\n    var self = this;\n    this.backendSrv.get(\"/api/plugin-proxy/kentik-app/api/device/\"+deviceId).then(function(resp) {\n      self.device = resp.device[0];\n      self.updateDeviceDTO();\n      self.pageReady = true;\n    });\n  }\n\n  updateDeviceDTO() {\n    var self = this;\n    this.deviceDTO = {\n      device_id: this.device.device_id,\n      device_name: this.device.device_name,\n      type: this.device.device_type,\n      device_description: this.device.device_description,\n      flow_type: this.device.device_flow_type,\n      flow_rate: parseInt(this.device.device_sample_rate),\n      other_ips: this.device.device_chf_interface,\n      minimize_snmp: this.device.minimize_snmp,\n      device_ip: this.device.device_snmp_ip,\n      snmp_community: this.device.device_snmp_community,\n    };\n    this.other_ips = [];\n    _.forEach(this.deviceDTO.other_ips.split(','), function(ip) {\n      self.other_ips.push({ip: ip});\n    });\n  }\n\n  update() {\n    var ips = [];\n    _.forEach(this.other_ips, function(ip) {\n      ips.push(ip.ip);\n    });\n    this.deviceDTO.other_ips = ips.join();\n    this.backendSrv.post(\"/api/plugin-proxy/kentik-app/api/device/\"+this.deviceDTO.device_id, this.deviceDTO)\n  }\n}\n\nDeviceDetailsCtrl.templateUrl = 'components/device_details.html';\n\nexport {DeviceDetailsCtrl}\n"]}