define(["lodash","angular","app/plugins/sdk","moment","app/core/table_model"],function(e,t,n,i,r){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function i(e){var t="default";for(var n in e)if("kentik-ds"===e[n].type)return"custom"===(t=e[n].jsonData.region)&&console.log("getRegion(): Custom Dynamic URL: "+e[n].jsonData.dynamicUrl),t;return t}n.d(t,"a",function(){return i})},,function(e,n){e.exports=t},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(3),r=n.n(i),o=n(1),s=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},a=function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},u=function(){function e(e){var t=this;this.backendSrv=e,this.apiReady=!1,this.baseUrl="/api/plugin-proxy/kentik-app",e.get("/api/datasources").then(function(e){t.region=Object(o.a)(e),t.setRegion(t.region),t.apiReady=!0})}return e.$inject=["backendSrv"],e.prototype.setRegion=function(e){this.region=e},e.prototype.getDevices=function(){return s(this,void 0,void 0,function(){var e,t=this;return a(this,function(n){switch(n.label){case 0:return this.backendSrv.get("/api/datasources").then(function(e){t.region=Object(o.a)(e),t.setRegion(t.region),t.apiReady=!0}),[4,this._get("/api/v5/devices")];case 1:return(e=n.sent()).data&&e.data.devices?[2,e.data.devices]:[2,[]]}})})},e.prototype.getUsers=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._get("/api/v5/users")];case 1:return[2,e.sent()]}})})},e.prototype.getFieldValues=function(e){var t="SELECT DISTINCT "+e+" FROM all_devices ORDER BY "+e+" ASC";return this.invokeSQLQuery(t)},e.prototype.getCustomDimensions=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._get("/api/v5/customdimensions")];case 1:return[2,e.sent().data.customDimensions]}})})},e.prototype.getSavedFilters=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._get("/api/v5/saved-filters")];case 1:return[2,e.sent().data]}})})},e.prototype.invokeTopXDataQuery=function(e){var t={queries:[{query:e,bucketIndex:0}]};return this._post("/api/v5/query/topXdata",t)},e.prototype.invokeSQLQuery=function(e){var t={query:e};return this._post("/api/v5/query/sql",t)},e.prototype._get=function(e){return s(this,void 0,void 0,function(){var t=this;return a(this,function(n){switch(n.label){case 0:return void 0!==this.region?[3,2]:[4,this.backendSrv.get("/api/datasources").then(function(e){t.setRegion(Object(o.a)(e))})];case 1:n.sent(),n.label=2;case 2:return[2,this.backendSrv.datasourceRequest({method:"GET",url:this.baseUrl+"/"+this.region+e}).catch(function(e){return console.error(e),e.err?Promise.reject(e.err):Promise.reject(e)})]}})})},e.prototype._post=function(e,t){return s(this,void 0,void 0,function(){var n=this;return a(this,function(i){switch(i.label){case 0:return void 0!==this.region?[3,2]:[4,this.backendSrv.get("/api/datasources").then(function(e){n.setRegion(Object(o.a)(e))})];case 1:i.sent(),i.label=2;case 2:return[2,this.backendSrv.datasourceRequest({method:"POST",url:this.baseUrl+"/"+this.region+e,data:t}).then(function(e){return e.data?e.data:[]}).catch(function(e){return console.error(e),e.err?Promise.reject(e.err):Promise.reject(e)})]}})})},e}();r.a.module("grafana.services").service("kentikAPISrv",u)},,function(e,t){e.exports=n},,,,,,function(e,t){e.exports=i},function(e,t){e.exports=r},,,,function(e,t,n){"use strict";n.r(t);var i=[{text:"Traffic",value:"Traffic",field:"traffic"},{text:"TopFlow",value:"TopFlow",field:"TopFlow"},{text:"Top flow IP",value:"TopFlowsIP",field:"TopFlowsIP"},{text:"Source Country",value:"Geography_src",field:"src_geo"},{text:"Source Geo Region",value:"src_geo_region",field:"src_geo_region"},{text:"Source Geo City",value:"src_geo_city",field:"src_geo_city"},{text:"Source As Number",value:"AS_src",field:"src_as"},{text:"Source Interface",value:"InterfaceID_src",field:"input_port"},{text:"Source Port",value:"Port_src",field:"l4_src_port"},{text:"Source VLAN",value:"VLAN_src",field:"vlan_in"},{text:"Source IP/CIDR",value:"IP_src",field:"ipv4_src_addr"},{text:"Source MAC Address",value:"src_eth_mac",field:"src_eth_mac"},{text:"Source Route Prefix/LEN",value:"src_route_prefix_len",field:"src_route_prefix_len"},{text:"Source Route LEN",value:"src_route_length",field:"src_route_length"},{text:"Source BGP Community",value:"src_bgp_community",field:"src_bgp_community"},{text:"Source BGP AS_Path",value:"src_bgp_aspath",field:"src_bgp_aspath"},{text:"Source BGP Next Hop IP/CIDR",value:"src_nexthop_ip",field:"ipv4_src_next_hop"},{text:"Source Next Hop AS Number",value:"src_nexthop_asn",field:"src_nexthop_as"},{text:"Source 2nd BGP_HOP AS Number",value:"src_second_asn",field:"src_second_asn"},{text:"Source 3nd BGP_HOP AS Number",value:"src_third_asn",field:"src_third_asn"},{text:"Source Protocol:IP Port",value:"src_proto_port",field:"src_proto_port"},{text:"Destination Country",value:"Geography_dst",field:"dst_geo"},{text:"Destination Region",value:"dst_geo_region",field:"dst_geo_region"},{text:"Destination City",value:"dst_geo_city",field:"dst_geo_city"},{text:"Destination As Number",value:"AS_dst",field:"dst_as"},{text:"Destination Interface",value:"InterfaceID_dst",field:"output_port"},{text:"Destination Port",value:"Port_dst",field:"l4_dst_port"},{text:"Destination VLAN",value:"VLAN_dst",field:"vlan_out"},{text:"Destination IP/CIDR",value:"IP_dst",field:"ipv4_dst_addr"},{text:"Destination MAC Address",value:"dst_eth_mac",field:"dst_eth_mac"},{text:"Destination Route Prefix/LEN",value:"dst_route_prefix_len",field:"dst_route_prefix_len"},{text:"Destination Route LEN",value:"dst_route_length",field:"dst_route_length"},{text:"Destination BGP Community",value:"dst_bgp_community",field:"dst_bgp_community"},{text:"Destination BGP AS_Path",value:"dst_bgp_aspath",field:"dst_bgp_aspath"},{text:"Destination BGP Next Hop IP/CIDR",value:"dst_nexthop_ip",field:"ipv4_dst_next_hop"},{text:"Destination Next Hop AS Number",value:"dst_nexthop_asn",field:"dst_nexthop_as"},{text:"Destination 2nd BGP_HOP AS Number",value:"dst_second_asn",field:"dst_second_asn"},{text:"Destination 3nd BGP_HOP AS Number",value:"dst_third_asn",field:"dst_third_asn"},{text:"Destination Protocol:IP Port",value:"dst_proto_port",field:"dst_proto_port"},{text:"Full Device",value:"i_device_id",field:"i_device_id"},{text:"Full Site",value:"i_device_site_name",field:"i_device_site_name"},{text:"Full Protocol",value:"Proto",field:"protocl"},{text:"Full INET Family",value:"inet_family",field:"inet_family"},{text:"Full TOS",value:"TOS",field:"tos"},{text:"Full TCP flags",value:"tcp_flags",field:"tcp_flags"},{text:"AS Top Talkers",value:"ASTopTalkers",field:"ASTopTalkers"},{text:"Interface Top Talkers",value:"InterfaceTopTalkers",field:"InterfaceTopTalkers"},{text:"Port to Port Talkers",value:"PortPortTalkers",field:"PortPortTalkers"},{text:"Region Top Talkers",value:"RegionTopTalkers",field:"RegionTopTalkers"}];var r=[{text:"Bits/s",value:"bytes",field:"f_sum_both_bytes",outsort:"avg_both",gfUnit:"bps",gfAxisLabel:"Bits/s",transform:function(e,t){return 8*e/t.i_duration},tableFields:[{text:"Avg",field:"avg_both",unit:"bps",transform:function(e,t,n){return 8*e/n}},{text:"95th Percentile",field:"p95th_both",unit:"bps"},{text:"Max",field:"max_both",unit:"bps"}]},{text:"Packets/s",value:"packets",field:"f_sum_both_pkts",outsort:"avg_both",gfUnit:"pps",gfAxislabel:"Packets/s",transform:function(e,t){return e/t.i_duration},tableFields:[{text:"Avg",field:"avg_both",unit:"pps",transform:function(e,t,n){return e/n}},{text:"95th Percentile",field:"p95th_both",unit:"pps"},{text:"Max",field:"max_both",unit:"pps"}]},{text:"Unique Src IPs",value:"unique_src_ip",field:"f_hll(inet_src_addr,0.0001)",outsort:"avg_ips",gfUnit:"short",gfAxisLabel:"Unique Src IPs",tableFields:[{text:"Average",field:"avg_ips",unit:"none"},{text:"p95th",field:"p95th_ips",unit:"none"},{text:"Max",field:"max_ips",unit:"none"},{text:"p95th mbps",field:"p95th_bits_per_sec",unit:"bps"},{text:"p95th pps",field:"p95th_pkts_per_sec",unit:"pps"}]},{text:"Unique Dst IPs",value:"unique_dst_ip",field:"f_hll(inet_dst_addr,0.0001)",outsort:"avg_ips",gfUnit:"short",gfAxisLabel:"Unique Dst IPs",tableFields:[{text:"Average",field:"avg_ips",unit:"none"},{text:"p95th",field:"p95th_ips",unit:"none"},{text:"Max",field:"max_ips",unit:"none"},{text:"p95th mbps",field:"p95th_bits_per_sec",unit:"bps"},{text:"p95th pps",field:"p95th_pkts_per_sec",unit:"pps"}]}],o=[{text:"Source City",field:"src_geo_city"},{text:"Source Region",field:"src_geo_region"},{text:"Source Country",field:"src_geo"},{text:"Source AS Number",field:"src_as"},{text:"Source AS Name",field:"src_as_name"},{text:"Source Flow Tag",field:"src_flow_tags"},{text:"Source IP Port",field:"l4_src_port"},{text:"Source MAC Address",field:"src_eth_mac"},{text:"Source VLAN",field:"vlan_in"},{text:"Source IP Address",field:"inet_src_addr"},{text:"Source Interface ID",field:"input_port"},{text:"Source Interface Name",field:"i_input_interface_description"},{text:"Source Interface Description",field:"i_input_snmp_alias"},{text:"Source Route Prefix",field:"ipv4_src_route_prefix"},{text:"Source Route LEN",field:"src_route_length"},{text:"Source BGP AS_PATH",field:"src_bgp_aspath"},{text:"Source BGP Community",field:"src_bgp_community"},{text:"Source Next Hop IP/CIDR",field:"ipv4_src_next_hop"},{text:"Source Next Hop AS Number",field:"src_nexthop_as"},{text:"Source Next Hop AS Name",field:"src_nexthop_as_name"},{text:"Source 2nd BGP_HOP AS Number",field:"src_second_asn"},{text:"Source 2nd BGP_HOP AS Name",field:"src_second_asn_name"},{text:"Source 3nd BGP_HOP AS Number",field:"src_third_asn"},{text:"Source 3nd BGP_HOP AS Name",field:"src_third_asn_name"},{text:"Destination City",field:"dst_geo_city"},{text:"Destination Region",field:"dst_geo_region"},{text:"Destination Country",field:"dst_geo"},{text:"Destination AS Number",field:"dst_as"},{text:"Destination AS Name",field:"dst_as_name"},{text:"Destination Flow Tag",field:"dst_flow_tags"},{text:"Destination IP Port",field:"l4_dst_port"},{text:"Destination MAC Address",field:"dst_eth_mac"},{text:"Destination VLAN",field:"vlan_out"},{text:"Destination IP Address",field:"inet_dst_addr"},{text:"Destination Interface ID",field:"output_port"},{text:"Destination Interface Name",field:"i_output_interface_description"},{text:"Destination Interface Description",field:"i_output_snmp_alias"},{text:"Destination Route Prefix",field:"ipv4_dst_route_prefix"},{text:"Destination Route LEN",field:"dst_route_length"},{text:"Destination BGP AS_PATH",field:"dst_bgp_aspath"},{text:"Destination BGP Community",field:"dst_bgp_community"},{text:"Destination Next Hop IP/CIDR",field:"ipv4_dst_next_hop"},{text:"Destination Next Hop AS Number",field:"dst_nexthop_as"},{text:"Destination Next Hop AS Name",field:"dst_nexthop_as_name"},{text:"Destination 2nd BGP_HOP AS Number",field:"dst_second_asn"},{text:"Destination 2nd BGP_HOP AS Name",field:"dst_second_asn_name"},{text:"Destination 3nd BGP_HOP AS Number",field:"dst_third_asn"},{text:"Destination 3nd BGP_HOP AS Name",field:"dst_third_asn_name"},{text:"TCP Flags",field:"tcp_flags"},{text:"TCP Flags (raw)",field:"tcp_flags_raw"},{text:"Protocol",field:"protocol"},{text:"INET Family",field:"inet_family"},{text:"Device Name",field:"i_device_name"},{text:"TCP Retransmits",field:"tcp_retransmit"},{text:"TOS/Diffserv",field:"tos"},{text:"Per-flow packets (both in and out)",field:"both_pkts"},{text:"Per-flow packets (recorded inbound)",field:"in_pkts"},{text:"Per-flow bytes (recorded inbound)",field:"in_bytes"},{text:"Per-flow packets (recorded outbound)",field:"out_pkts"},{text:"Per-flow bytes (recorded outbound)",field:"out_bytes"}],s=n(0),a=n(3),u=n.n(a),c=n(12),l=(n(4),function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})}),d=function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function f(){var e=new Date;return e.getTime()+60*e.getTimezoneOffset()*1e3}function p(e){var t=s.cloneDeep(e);return t.starting_time=null,t.ending_time=null,JSON.stringify(t)}var _=function(){function e(e,t){this.kentikAPI=t,this.cache={},this.cacheUpdateInterval=3e5,this.requestCachingIntervals={"1d":0},this.getDevices=this.kentikAPI.getDevices.bind(this.kentikAPI)}return e.$inject=["backendSrv","kentikAPISrv"],e.prototype.invokeTopXDataQuery=function(e){var t=this,n=s.cloneDeep(e),i=p(n);return this.shouldInvoke(e)?this.kentikAPI.invokeTopXDataQuery(e).then(function(e){var r=f();return t.cache[i]={timestamp:r,query:n,result:e},e}):Promise.resolve(this.cache[i].result)},e.prototype.shouldInvoke=function(e){var t=e,n=p(t),i=f(),r=Date.parse(t.starting_time),o=Date.parse(t.ending_time),s=o-r,a=this.cache[n]?Date.parse(this.cache[n].query.starting_time):null,u=this.cache[n]?Date.parse(this.cache[n].query.ending_time):null,l=u-a,d=function(e){var t=Date.parse(e.ending_time)-Date.parse(e.starting_time);return t>c.duration(1,"months")?36e5:t>c.duration(1,"day")?9e5:3e5}(t);return!this.cache[n]||i-o>d||this.cache[n]&&(i-u>d||r<a||Math.abs(s-l)>6e4)},e.prototype.getFieldValues=function(e){var t=this,n=f();return this.cache[e]&&n-this.cache[e].ts<this.cacheUpdateInterval?Promise.resolve(this.cache[e].value):this.kentikAPI.getFieldValues(e).then(function(i){return n=f(),t.cache[e]={ts:n,value:i},i})},e.prototype.getCustomDimensions=function(){return l(this,void 0,void 0,function(){var e,t=this;return d(this,function(n){switch(n.label){case 0:return void 0!==this.cache.customDimensions?[3,2]:[4,this.kentikAPI.getCustomDimensions()];case 1:e=n.sent(),this.cache.customDimensions=e.map(function(e){return{values:t._getDimensionPopulatorsValues(e),text:"Custom "+e.display_name,value:e.name,field:e.name}}),n.label=2;case 2:return[2,this.cache.customDimensions]}})})},e.prototype.getSavedFilters=function(){return l(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return void 0!==this.cache.savedFilters?[3,2]:[4,this.kentikAPI.getSavedFilters()];case 1:e=t.sent(),this.cache.savedFilters=s.map(e,function(e){return{text:"Saved "+e.filter_name,field:e.filter_name,id:e.id}}),t.label=2;case 2:return[2,this.cache.savedFilters]}})})},e.prototype._getDimensionPopulatorsValues=function(e){return e.populators.reduce(function(e,t){return e.push(t.value),e},[])},e}();u.a.module("grafana.services").service("kentikProxySrv",_);var h=n(13),v=n.n(h),m="YYYY-MM-DD HH:mm:ss";function x(e){return"unique_src_ip"===e.value||"unique_dst_ip"===e.value?function(e){return[{name:"avg_ips",column:e.field,fn:"average",raw:!0,sample_rate:1},{name:"p95th_ips",column:e.field,fn:"percentile",rank:95,sample_rate:1},{name:"max_ips",column:e.field,fn:"max",sample_rate:1,raw:!0},{name:"p95th_bits_per_sec",column:"f_sum_both_bytes",fn:"percentile",rank:95,sample_rate:1},{name:"p95th_pkts_per_sec",column:"f_sum_both_pkts",fn:"percentile",rank:95,sample_rate:1}]}(e):function(e){return[{name:"avg_both",column:e.field,fn:"average",raw:!0,sample_rate:1},{name:"p95th_both",column:e.field,fn:"percentile",rank:95,sample_rate:1},{name:"max_both",column:e.field,fn:"max",sample_rate:1}]}(e)}function g(e,t){return"!="===e.operator&&(e.operator="<>"),{filterField:t.field,operator:e.operator,filterValue:e.value}}var b,y={buildTopXdataQuery:function(e){var t,n,i=s.find(r,{value:e.unit}),o=e.range.from.utc().format(m),a=e.range.to.utc().format(m);return{dimension:[e.metric],metric:e.unit,matrixBy:[],cidr:32,cidr6:128,topx:"8",depth:100,fastData:"Auto",lookback_seconds:0,time_format:"UTC",starting_time:o,ending_time:a,device_name:e.deviceNames,outsort:i.outsort,aggregates:x(i),filters_obj:(t=e.kentikFilterGroups,n={connector:"All",filterGroups:[]},t.length&&(n.filterGroups=t),n),saved_filters:e.kentikSavedFilters}},formatAggs:x,convertToKentikFilterGroup:function(e,t,n){var i,r=[],a=[];if(e.length){for(var u=s.concat(o,t),c=0,l=e;c<l.length;c++){var d=l[c],f=s.find(u,{text:d.key});if(void 0===f){var p=s.find(n,{text:d.key});a.push((i=d,{filter_id:p.id,is_not:"exclude"===i.value}))}else r.push(g(d,f))}if(r.length>0){var _="All";!e[0].condition||"or"!==e[0].condition.toLowerCase()&&"any"!==e[0].condition.toLowerCase()||(_="Any"),r=[{connector:_,filters:r,not:!1}]}}return{kentikFilters:r,savedFilters:a}}},k=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},S=function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},P=function(){function e(e,t,n){this.instanceSettings=e,this.templateSrv=t,this.name=e.name,this.kentik=n}return e.$inject=["instanceSettings","templateSrv","kentikProxySrv"],e.prototype.interpolateDeviceField=function(e,t){return t.multi||t.includeAll?"string"==typeof e?e:e.join(","):e},e.prototype.query=function(e){return k(this,void 0,void 0,function(){var t,n,i,r,o,s,a,u;return S(this,function(c){switch(c.label){case 0:return e.targets&&0!==e.targets.length?(t=e.targets[0],n=this.templateSrv.replace(t.device,e.scopedVars,this.interpolateDeviceField.bind(this)),i=this.templateSrv.getAdhocFilters(this.name),[4,this.kentik.getCustomDimensions()]):[2,Promise.resolve({data:[]})];case 1:return r=c.sent(),[4,this.kentik.getSavedFilters()];case 2:return o=c.sent(),s=y.convertToKentikFilterGroup(i,r,o),a={deviceNames:n,range:{from:e.range.from,to:e.range.to},metric:this.templateSrv.replace(t.metric),unit:this.templateSrv.replace(t.unit),kentikFilterGroups:s.kentikFilters,kentikSavedFilters:s.savedFilters},u=y.buildTopXdataQuery(a),[2,this.kentik.invokeTopXDataQuery(u).then(this.processResponse.bind(this,u,t.mode,e)).then(function(e){return{data:e}})]}})})},e.prototype.processResponse=function(e,t,n,o){return k(this,void 0,void 0,function(){var a,u,c,l;return S(this,function(d){switch(d.label){case 0:return o.results?0===(a=o.results[0].data).length?[2,[]]:[4,this._getExtendedDimensionsList(i)]:[2,Promise.reject({message:"no kentik data"})];case 1:return u=d.sent(),c=s.find(u,{value:e.dimension[0]}),l=s.find(r,{value:e.metric}),"table"===t?[2,this.processTableData(a,c,l)]:[2,this.processTimeSeries(a,e,n)]}})})},e.prototype.processTimeSeries=function(e,t,n){var i=[],r=t.topx;e.length<r&&(r=e.length);for(var o=0;o<r;o++){var a=e[o],u=s.find(a.timeSeries,function(e){return e.flow&&e.flow.length}),c=a.key;if(u){var l={target:c,datapoints:s.map(u.flow,function(e){return[e[1],e[0]]})};i.push(l)}}return i},e.prototype.processTableData=function(e,t,n){var i=new v.a;i.columns.push({text:t.text});for(var r=0,o=n.tableFields;r<o.length;r++){var a=o[r];i.columns.push({text:a.text,unit:a.unit})}return s.forEach(e,function(e){for(var t=[e.key],r=0,o=n.tableFields;r<o.length;r++){var a=e[o[r].field];s.isString(a)&&(a=parseFloat(a)),t.push(a)}i.rows.push(t)}),[i]},e.prototype.metricFindQuery=function(e){return k(this,void 0,void 0,function(){return S(this,function(t){return"metrics()"===e?[2,this._getExtendedDimensionsList(i)]:"units()"===e?[2,r]:[2,this.kentik.getDevices().then(function(e){return e.map(function(e){return{text:e.device_name,value:e.device_name}})})]})})},e.prototype.getTagKeys=function(){return k(this,void 0,void 0,function(){var e,t;return S(this,function(n){switch(n.label){case 0:return[4,this._getExtendedDimensionsList(o)];case 1:return e=n.sent(),[4,this.kentik.getSavedFilters()];case 2:return t=n.sent(),[2,s.concat(e,t)]}})})},e.prototype.getTagValues=function(e){return k(this,void 0,void 0,function(){var t,n,i,r;return S(this,function(a){switch(a.label){case 0:return e?void 0!==(t=s.find(o,{text:e.key}))?[3,5]:[4,this.kentik.getSavedFilters()]:[3,7];case 1:return n=a.sent(),void 0!==(t=s.find(n,{text:e.key}))?[3,3]:[4,this.kentik.getCustomDimensions()];case 2:return i=a.sent(),[2,s.find(i,{text:e.key}).values.map(function(e){return{text:e}})];case 3:return[2,[{text:"include"},{text:"exclude"}]];case 4:return[3,6];case 5:return r=t.field,[2,this.kentik.getFieldValues(r).then(function(e){return e.rows.map(function(e){return{text:e[r].toString()}})})];case 6:return[3,8];case 7:return[2,[]];case 8:return[2]}})})},e.prototype._getExtendedDimensionsList=function(e){return k(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return[4,this.kentik.getCustomDimensions()];case 1:return t=n.sent(),[2,s.concat(e,t)]}})})},e}(),D=function(){function e(){}return e.templateUrl="datasource/config.html",e}(),A=n(6),w=(b=function(e,t){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),T=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.target.mode=i.target.mode||"graph",i.queryModes=[{value:"graph",text:"Graph"},{value:"table",text:"Table"}],i}return w(t,e),t.$inject=["$scope","$injector"],t}(A.QueryCtrl);T.templateUrl="datasource/query_editor.html",n.d(t,"Datasource",function(){return P}),n.d(t,"ConfigCtrl",function(){return D}),n.d(t,"QueryCtrl",function(){return T})}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibG9kYXNoXCIiLCJ3ZWJwYWNrOi8vLy4vZGF0YXNvdXJjZS9yZWdpb25IZWxwZXIudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYW5ndWxhclwiIiwid2VicGFjazovLy8uL2RhdGFzb3VyY2Uva2VudGlrQVBJLnRzIiwid2VicGFjazovLy8uL2RhdGFzb3VyY2UvbWV0cmljX2RlZi50cyIsIndlYnBhY2s6Ly8vLi9kYXRhc291cmNlL2tlbnRpa1Byb3h5LnRzIiwid2VicGFjazovLy8uL2RhdGFzb3VyY2UvcXVlcnlfYnVpbGRlci50cyIsIndlYnBhY2s6Ly8vLi9kYXRhc291cmNlL2RhdGFzb3VyY2UudHMiLCJ3ZWJwYWNrOi8vLy4vZGF0YXNvdXJjZS9jb25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vZGF0YXNvdXJjZS9xdWVyeV9lZGl0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vZGF0YXNvdXJjZS9tb2R1bGUudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX18iLCJnZXRSZWdpb24iLCJkYXRhc291cmNlcyIsImFSZWdpb24iLCJpbmRleCIsInR5cGUiLCJqc29uRGF0YSIsInJlZ2lvbiIsImNvbnNvbGUiLCJsb2ciLCJkeW5hbWljVXJsIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzNfXyIsIktlbnRpa0FQSSIsImJhY2tlbmRTcnYiLCJfdGhpcyIsInRoaXMiLCJhcGlSZWFkeSIsImJhc2VVcmwiLCJ0aGVuIiwiYWxsRFMiLCJfcmVnaW9uSGVscGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJzZXRSZWdpb24iLCIkaW5qZWN0IiwicmVzcCIsIl9hIiwic2VudCIsImRhdGEiLCJkZXZpY2VzIiwiZ2V0RmllbGRWYWx1ZXMiLCJmaWVsZCIsInF1ZXJ5IiwiaW52b2tlU1FMUXVlcnkiLCJpbnZva2VUb3BYRGF0YVF1ZXJ5Iiwia2VudGlrVjVRdWVyeSIsInF1ZXJpZXMiLCJidWNrZXRJbmRleCIsIl9wb3N0IiwiZGF0YXNvdXJjZVJlcXVlc3QiLCJtZXRob2QiLCJ1cmwiLCJjYXRjaCIsImVycm9yIiwiZXJyIiwiUHJvbWlzZSIsInJlamVjdCIsInJlc3BvbnNlIiwibWV0cmljTGlzdCIsInRleHQiLCJ1bml0TGlzdCIsIm91dHNvcnQiLCJnZlVuaXQiLCJnZkF4aXNMYWJlbCIsInRyYW5zZm9ybSIsInJvdyIsImlfZHVyYXRpb24iLCJ1bml0IiwicmFuZ2VTZWNvbmRzIiwiZ2ZBeGlzbGFiZWwiLCJmaWx0ZXJGaWVsZExpc3QiLCJnZXRVVENUaW1lc3RhbXAiLCJ0cyIsIkRhdGUiLCJnZXRUaW1lIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJnZXRIYXNoIiwicXVlcnlPYmoiLCJleHRlcm5hbF9sb2Rhc2hfIiwic3RhcnRpbmdfdGltZSIsImVuZGluZ190aW1lIiwiSlNPTiIsInN0cmluZ2lmeSIsImtlbnRpa1Byb3h5X0tlbnRpa1Byb3h5IiwiS2VudGlrUHJveHkiLCJrZW50aWtBUElTcnYiLCJrZW50aWtBUEkiLCJjYWNoZSIsImNhY2hlVXBkYXRlSW50ZXJ2YWwiLCJyZXF1ZXN0Q2FjaGluZ0ludGVydmFscyIsIjFkIiwiZ2V0RGV2aWNlcyIsImNhY2hlZFF1ZXJ5IiwiaGFzaCIsInNob3VsZEludm9rZSIsInJlc3VsdCIsInRpbWVzdGFtcCIsInJlc29sdmUiLCJrZW50aWtRdWVyeSIsInN0YXJ0aW5nVGltZSIsInBhcnNlIiwiZW5kaW5nVGltZSIsInF1ZXJ5UmFuZ2UiLCJjYWNoZVN0YXJ0aW5nVGltZSIsImNhY2hlRW5kaW5nVGltZSIsImNhY2hlZFF1ZXJ5UmFuZ2UiLCJtYXhSZWZyZXNoSW50ZXJ2YWwiLCJpbnRlcnZhbCIsImV4dGVybmFsX21vbWVudF8iLCJnZXRNYXhSZWZyZXNoSW50ZXJ2YWwiLCJNYXRoIiwiYWJzIiwiZ2V0Q3VzdG9tRGltZW5zaW9ucyIsImN1c3RvbURpbWVuc2lvbnMiLCJtYXAiLCJkaW1lbnNpb24iLCJ2YWx1ZXMiLCJfZ2V0RGltZW5zaW9uUG9wdWxhdG9yc1ZhbHVlcyIsImRpc3BsYXlfbmFtZSIsImdldFNhdmVkRmlsdGVycyIsInNhdmVkRmlsdGVycyIsImZpbHRlciIsImZpbHRlcl9uYW1lIiwicG9wdWxhdG9ycyIsInJlZHVjZSIsInBvcHVsYXRvciIsInB1c2giLCJLRU5USUtfVElNRV9GT1JNQVQiLCJmb3JtYXRBZ2dzIiwidW5pdERlZiIsImNvbHVtbiIsImZuIiwicmF3Iiwic2FtcGxlX3JhdGUiLCJyYW5rIiwiZm9ybWF0VW5pcXVlSXBBZ2dzIiwiZm9ybWF0TWV0cmljQWdncyIsImNvbnZlcnRUb0tlbnRpa0ZpbHRlciIsImZpbHRlck9iaiIsImZpbHRlckRlZiIsIm9wZXJhdG9yIiwiZmlsdGVyRmllbGQiLCJmaWx0ZXJWYWx1ZSIsInF1ZXJ5X2J1aWxkZXIiLCJidWlsZFRvcFhkYXRhUXVlcnkiLCJvcHRpb25zIiwia2VudGlrRmlsdGVyR3JvdXBzIiwiZmlsdGVyc09iaiIsInJhbmdlIiwiZnJvbSIsInV0YyIsImZvcm1hdCIsInRvIiwibWV0cmljIiwibWF0cml4QnkiLCJjaWRyIiwiY2lkcjYiLCJ0b3B4IiwiZGVwdGgiLCJmYXN0RGF0YSIsImxvb2tiYWNrX3NlY29uZHMiLCJ0aW1lX2Zvcm1hdCIsImRldmljZV9uYW1lIiwiZGV2aWNlTmFtZXMiLCJhZ2dyZWdhdGVzIiwiZmlsdGVyc19vYmoiLCJjb25uZWN0b3IiLCJmaWx0ZXJHcm91cHMiLCJsZW5ndGgiLCJzYXZlZF9maWx0ZXJzIiwia2VudGlrU2F2ZWRGaWx0ZXJzIiwiZmlsdGVycyIsInNhdmVkRmlsdGVyc0xpc3QiLCJrZW50aWtGaWx0ZXJzIiwiZmlsdGVyRmllbGRMaXN0RXh0ZW5kZWQiLCJfaSIsImZpbHRlcnNfMSIsImZpbHRlckZpZWxkRGVmIiwidW5kZWZpbmVkIiwic2F2ZWRGaWx0ZXJEZWYiLCJmaWx0ZXJfaWQiLCJpZCIsImlzX25vdCIsImNvbmRpdGlvbiIsInRvTG93ZXJDYXNlIiwibm90IiwiZGF0YXNvdXJjZV9LZW50aWtEYXRhc291cmNlIiwiS2VudGlrRGF0YXNvdXJjZSIsImluc3RhbmNlU2V0dGluZ3MiLCJ0ZW1wbGF0ZVNydiIsImtlbnRpa1Byb3h5U3J2Iiwia2VudGlrIiwiaW50ZXJwb2xhdGVEZXZpY2VGaWVsZCIsInZhcmlhYmxlIiwibXVsdGkiLCJpbmNsdWRlQWxsIiwidGFyZ2V0cyIsInRhcmdldCIsImdldEFkaG9jRmlsdGVycyIsImNvbnZlcnRUb0tlbnRpa0ZpbHRlckdyb3VwIiwicmVwbGFjZSIsInF1ZXJ5T3B0aW9ucyIsInByb2Nlc3NSZXNwb25zZSIsInJlc3VsdHMiLCJfZ2V0RXh0ZW5kZWREaW1lbnNpb25zTGlzdCIsIm1lc3NhZ2UiLCJleHRlbmRlZE1ldHJpY0xpc3QiLCJwcm9jZXNzVGFibGVEYXRhIiwiYnVja2V0RGF0YSIsIm1ldHJpY0RlZiIsInByb2Nlc3NUaW1lU2VyaWVzIiwic2VyaWVzTGlzdCIsImVuZEluZGV4Iiwic2VyaWVzIiwidGltZXNlcmllcyIsInRpbWVTZXJpZXMiLCJmbG93Iiwic2VyaWVzTmFtZSIsImRhdGFwb2ludHMiLCJwb2ludCIsImdyYWZhbmFTZXJpZXMiLCJ0YWJsZSIsInRhYmxlX21vZGVsX2RlZmF1bHQiLCJhIiwiY29sdW1ucyIsInRhYmxlRmllbGRzIiwiY29sIiwidmFsIiwicGFyc2VGbG9hdCIsInJvd3MiLCJtZXRyaWNGaW5kUXVlcnkiLCJkYXRhc291cmNlX2dlbmVyYXRvciIsImRldmljZSIsImxhYmVsIiwiaW5pdGlhbExpc3QiLCJmaWVsZF8xIiwiQ29uZmlnQ3RybCIsInRlbXBsYXRlVXJsIiwiYiIsIl9fIiwiS2VudGlrUXVlcnlDdHJsIiwiX3N1cGVyIiwiJHNjb3BlIiwiJGluamVjdG9yIiwicXVlcnlNb2RlcyJdLCJtYXBwaW5ncyI6InFIQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUEwREEsT0FyREFGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFB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QUF6UCxPQUFBWSxPQUFBNk8sSUFBQUMsRUFBQXhPLFVBQUF1TyxFQUFBdk8sVUFBQSxJQUFBd08sS0FPbERDLEVBQW9CLFNBQVNDLG1CQU01QixJQUFBdk4sRUFBQXVOLEVBQUFuUSxLQUFBNkMsS0FBQXVOLEVBQUFDLElBQUF4TixLQUdILE9BRkFELEVBQUEySyxPQUFBdk0sS0FBQzRCLEVBQUEySyxPQUFBdk0sTUFBQSxRQVo2QjRCLEVBQUEwTixXQVk3QixFQUFBeFAsTUFBQSxRQUFBK0QsS0FBQSxVQUFBL0QsTUFBQSxRQUFBK0QsS0FBQSxVQUVjakMsV0FUYnNOLEVBQ0VDLEtBSUsvTSxRQUFnQixVQUFPLGVBTFosY0NQcEI4TSxFQUFBSCxZQUFBLCtCQUNvQ3RRLEVBQUFVLEVBQUFxQyxFQUFBLCtCQUFBb0ssSUFDV25OLEVBQUFVLEVBQUFxQyxFQUFBLCtCQUFBc04sSUFNN0NyUSxFQUFBVSxFQUFBcUMsRUFBQSw4QkFBQTBOIiwiZmlsZSI6ImRhdGFzb3VyY2UvbW9kdWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDE3KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fOyIsIiAvKipcbiAgKiBSZXR1cm5zIHRoZSByZWdpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBrZW50aWsta3NcblxuICAqIEBwYXJhbSBkYXRhc291cmNlcyBcbiAgKi9cbmZ1bmN0aW9uIGdldFJlZ2lvbihkYXRhc291cmNlczogYW55KTogc3RyaW5nIHtcbiAgbGV0IGFSZWdpb24gPSBcImRlZmF1bHRcIjtcbiAgZm9yICh2YXIgaW5kZXggaW4gZGF0YXNvdXJjZXMpIHtcbiAgICBpZiAoZGF0YXNvdXJjZXNbaW5kZXhdLnR5cGUgPT09IFwia2VudGlrLWRzXCIpIHtcbiAgICAgIGFSZWdpb24gPSBkYXRhc291cmNlc1tpbmRleF0uanNvbkRhdGEucmVnaW9uO1xuICAgICAgaWYgKGFSZWdpb24gPT09ICdjdXN0b20nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZ2V0UmVnaW9uKCk6IEN1c3RvbSBEeW5hbWljIFVSTDogXCIgKyBkYXRhc291cmNlc1tpbmRleF0uanNvbkRhdGEuZHluYW1pY1VybCk7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJnZXRSZWdpb24oKTogQ3VzdG9tIERTIEluZm86IFwiICsgSlNPTi5zdHJpbmdpZnkoZGF0YXNvdXJjZXNbaW5kZXhdKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYVJlZ2lvbjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFSZWdpb247XG59XG5cbmV4cG9ydCB7IGdldFJlZ2lvbiB9XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzNfXzsiLCJpbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCB7IGdldFJlZ2lvbiB9IGZyb20gXCIuL3JlZ2lvbkhlbHBlclwiO1xuXG5leHBvcnQgY2xhc3MgS2VudGlrQVBJIHtcbiAgYmFzZVVybDogc3RyaW5nO1xuICByZWdpb246IHN0cmluZztcbiAgYXBpUmVhZHk6IGJvb2xlYW47XG4gIC8qKiBAbmdJbmplY3QgKi9cbiAgY29uc3RydWN0b3IocHVibGljIGJhY2tlbmRTcnY6IGFueSkge1xuICAgIHRoaXMuYXBpUmVhZHkgPSBmYWxzZTtcbiAgICB0aGlzLmJhc2VVcmwgPSBcIi9hcGkvcGx1Z2luLXByb3h5L2tlbnRpay1hcHBcIjtcbiAgICAvLyBnZXQgcmVnaW9uIGZyb20gZGF0YXNvdXJjZVxuICAgIGJhY2tlbmRTcnYuZ2V0KCcvYXBpL2RhdGFzb3VyY2VzJykudGhlbiggKGFsbERTOiBhbnkpID0+IHtcbiAgICAgIHRoaXMucmVnaW9uID0gZ2V0UmVnaW9uKGFsbERTKTtcbiAgICAgIHRoaXMuc2V0UmVnaW9uKHRoaXMucmVnaW9uKTtcbiAgICAgIHRoaXMuYXBpUmVhZHkgPSB0cnVlO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0UmVnaW9uKHJlZ2lvbjogc3RyaW5nKSB7XG4gICAgdGhpcy5yZWdpb24gPSByZWdpb247XG4gIH1cblxuICBhc3luYyBnZXREZXZpY2VzKCkge1xuICAgIHRoaXMuYmFja2VuZFNydi5nZXQoJy9hcGkvZGF0YXNvdXJjZXMnKS50aGVuKCAoYWxsRFM6IGFueSkgPT4ge1xuICAgICAgdGhpcy5yZWdpb24gPSBnZXRSZWdpb24oYWxsRFMpO1xuICAgICAgdGhpcy5zZXRSZWdpb24odGhpcy5yZWdpb24pO1xuICAgICAgdGhpcy5hcGlSZWFkeSA9IHRydWU7XG4gICAgfSk7XG5cbiAgICBjb25zdCByZXNwID0gYXdhaXQgdGhpcy5fZ2V0KCcvYXBpL3Y1L2RldmljZXMnKTtcblxuICAgIGlmIChyZXNwLmRhdGEgJiYgcmVzcC5kYXRhLmRldmljZXMpIHtcbiAgICAgIHJldHVybiByZXNwLmRhdGEuZGV2aWNlcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJzKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLl9nZXQoJy9hcGkvdjUvdXNlcnMnKVxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZ2V0RmllbGRWYWx1ZXMoZmllbGQ6IHN0cmluZykge1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFNFTEVDVCBESVNUSU5DVCAke2ZpZWxkfSBGUk9NIGFsbF9kZXZpY2VzIE9SREVSIEJZICR7ZmllbGR9IEFTQ2A7XG4gICAgcmV0dXJuIHRoaXMuaW52b2tlU1FMUXVlcnkocXVlcnkpO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q3VzdG9tRGltZW5zaW9ucygpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5fZ2V0KCcvYXBpL3Y1L2N1c3RvbWRpbWVuc2lvbnMnKTtcbiAgICByZXR1cm4gZGF0YS5kYXRhLmN1c3RvbURpbWVuc2lvbnM7XG4gIH1cblxuICBhc3luYyBnZXRTYXZlZEZpbHRlcnMoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuX2dldCgnL2FwaS92NS9zYXZlZC1maWx0ZXJzJyk7XG4gICAgcmV0dXJuIGRhdGEuZGF0YTtcbiAgfVxuXG4gIGludm9rZVRvcFhEYXRhUXVlcnkocXVlcnk6IGFueSkge1xuICAgIGNvbnN0IGtlbnRpa1Y1UXVlcnkgPSB7XG4gICAgICBxdWVyaWVzOiBbeyBxdWVyeTogcXVlcnksIGJ1Y2tldEluZGV4OiAwIH1dLFxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpcy5fcG9zdCgnL2FwaS92NS9xdWVyeS90b3BYZGF0YScsIGtlbnRpa1Y1UXVlcnkpO1xuICB9XG5cbiAgaW52b2tlU1FMUXVlcnkocXVlcnk6IGFueSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBxdWVyeTogcXVlcnksXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLl9wb3N0KCcvYXBpL3Y1L3F1ZXJ5L3NxbCcsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgX2dldCh1cmw6IHN0cmluZykge1xuICAgIC8vIGlmIHRoZSByZWdpb24gaXMgbm90IHNldCwgZ2V0IGl0IGZyb20gdGhlIGRhdGFzb3VyY2VcbiAgICBpZiAodHlwZW9mIHRoaXMucmVnaW9uID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy9jb25zb2xlLmxvZyhcIl9nZXQ6IHRoaXMucmVnaW9uIFVOREVGSU5FRCwgZmV0Y2hpbmdcIik7XG4gICAgICBhd2FpdCB0aGlzLmJhY2tlbmRTcnYuZ2V0KCcvYXBpL2RhdGFzb3VyY2VzJykudGhlbiggKGFsbERTOiBhbnkpID0+IHtcbiAgICAgICAgdGhpcy5zZXRSZWdpb24oZ2V0UmVnaW9uKGFsbERTKSk7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJrZW50aWtBUEk6IF9nZXQ6IEZFVENIRUQgcmVnaW9uIFwiICsgdGhpcy5yZWdpb24pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuYmFja2VuZFNydlxuICAgICAgLmRhdGFzb3VyY2VSZXF1ZXN0KHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgdXJsOiB0aGlzLmJhc2VVcmwgKyBcIi9cIiArIHRoaXMucmVnaW9uICsgdXJsLFxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICBpZiAoZXJyb3IuZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yLmVycik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBhc3luYyBfcG9zdCh1cmw6IHN0cmluZywgZGF0YTogYW55KSB7XG4gICAgLy8gaWYgdGhlIHJlZ2lvbiBpcyBub3Qgc2V0LCBnZXQgaXQgZnJvbSB0aGUgZGF0YXNvdXJjZVxuICAgIGlmICh0eXBlb2YgdGhpcy5yZWdpb24gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvL2NvbnNvbGUubG9nKFwia2VudGlrQVBJLl9wb3N0OiB0aGlzLnJlZ2lvbiBVTkRFRklORUQsIGZldGNoaW5nXCIpO1xuICAgICAgYXdhaXQgdGhpcy5iYWNrZW5kU3J2LmdldCgnL2FwaS9kYXRhc291cmNlcycpLnRoZW4oIChhbGxEUzogYW55KSA9PiB7XG4gICAgICAgIHRoaXMuc2V0UmVnaW9uKGdldFJlZ2lvbihhbGxEUykpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwia2VudGlrQVBJLl9wb3N0OiBGRVRDSEVEIHJlZ2lvbiBcIiArIHRoaXMucmVnaW9uKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5iYWNrZW5kU3J2XG4gICAgICAuZGF0YXNvdXJjZVJlcXVlc3Qoe1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgdXJsOiB0aGlzLmJhc2VVcmwgKyBcIi9cIiArIHRoaXMucmVnaW9uICsgdXJsLFxuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgfSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgaWYgKGVycm9yLmVycikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvci5lcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG59XG5cbmFuZ3VsYXIubW9kdWxlKCdncmFmYW5hLnNlcnZpY2VzJykuc2VydmljZSgna2VudGlrQVBJU3J2JywgS2VudGlrQVBJKTtcbiIsImNvbnN0IG1ldHJpY0xpc3QgPSBbXG4gIHsgdGV4dDogJ1RyYWZmaWMnLCB2YWx1ZTogJ1RyYWZmaWMnLCBmaWVsZDogJ3RyYWZmaWMnIH0sXG4gIHsgdGV4dDogJ1RvcEZsb3cnLCB2YWx1ZTogJ1RvcEZsb3cnLCBmaWVsZDogJ1RvcEZsb3cnIH0sXG4gIHsgdGV4dDogJ1RvcCBmbG93IElQJywgdmFsdWU6ICdUb3BGbG93c0lQJywgZmllbGQ6ICdUb3BGbG93c0lQJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgQ291bnRyeScsIHZhbHVlOiAnR2VvZ3JhcGh5X3NyYycsIGZpZWxkOiAnc3JjX2dlbycgfSxcbiAgeyB0ZXh0OiAnU291cmNlIEdlbyBSZWdpb24nLCB2YWx1ZTogJ3NyY19nZW9fcmVnaW9uJywgZmllbGQ6ICdzcmNfZ2VvX3JlZ2lvbicgfSxcbiAgeyB0ZXh0OiAnU291cmNlIEdlbyBDaXR5JywgdmFsdWU6ICdzcmNfZ2VvX2NpdHknLCBmaWVsZDogJ3NyY19nZW9fY2l0eScgfSxcbiAgeyB0ZXh0OiAnU291cmNlIEFzIE51bWJlcicsIHZhbHVlOiAnQVNfc3JjJywgZmllbGQ6ICdzcmNfYXMnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBJbnRlcmZhY2UnLCB2YWx1ZTogJ0ludGVyZmFjZUlEX3NyYycsIGZpZWxkOiAnaW5wdXRfcG9ydCcgfSxcbiAgeyB0ZXh0OiAnU291cmNlIFBvcnQnLCB2YWx1ZTogJ1BvcnRfc3JjJywgZmllbGQ6ICdsNF9zcmNfcG9ydCcgfSxcbiAgeyB0ZXh0OiAnU291cmNlIFZMQU4nLCB2YWx1ZTogJ1ZMQU5fc3JjJywgZmllbGQ6ICd2bGFuX2luJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgSVAvQ0lEUicsIHZhbHVlOiAnSVBfc3JjJywgZmllbGQ6ICdpcHY0X3NyY19hZGRyJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgTUFDIEFkZHJlc3MnLCB2YWx1ZTogJ3NyY19ldGhfbWFjJywgZmllbGQ6ICdzcmNfZXRoX21hYycgfSxcbiAgeyB0ZXh0OiAnU291cmNlIFJvdXRlIFByZWZpeC9MRU4nLCB2YWx1ZTogJ3NyY19yb3V0ZV9wcmVmaXhfbGVuJywgZmllbGQ6ICdzcmNfcm91dGVfcHJlZml4X2xlbicgfSxcbiAgeyB0ZXh0OiAnU291cmNlIFJvdXRlIExFTicsIHZhbHVlOiAnc3JjX3JvdXRlX2xlbmd0aCcsIGZpZWxkOiAnc3JjX3JvdXRlX2xlbmd0aCcgfSxcbiAgeyB0ZXh0OiAnU291cmNlIEJHUCBDb21tdW5pdHknLCB2YWx1ZTogJ3NyY19iZ3BfY29tbXVuaXR5JywgZmllbGQ6ICdzcmNfYmdwX2NvbW11bml0eScgfSxcbiAgeyB0ZXh0OiAnU291cmNlIEJHUCBBU19QYXRoJywgdmFsdWU6ICdzcmNfYmdwX2FzcGF0aCcsIGZpZWxkOiAnc3JjX2JncF9hc3BhdGgnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBCR1AgTmV4dCBIb3AgSVAvQ0lEUicsIHZhbHVlOiAnc3JjX25leHRob3BfaXAnLCBmaWVsZDogJ2lwdjRfc3JjX25leHRfaG9wJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgTmV4dCBIb3AgQVMgTnVtYmVyJywgdmFsdWU6ICdzcmNfbmV4dGhvcF9hc24nLCBmaWVsZDogJ3NyY19uZXh0aG9wX2FzJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgMm5kIEJHUF9IT1AgQVMgTnVtYmVyJywgdmFsdWU6ICdzcmNfc2Vjb25kX2FzbicsIGZpZWxkOiAnc3JjX3NlY29uZF9hc24nIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSAzbmQgQkdQX0hPUCBBUyBOdW1iZXInLCB2YWx1ZTogJ3NyY190aGlyZF9hc24nLCBmaWVsZDogJ3NyY190aGlyZF9hc24nIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBQcm90b2NvbDpJUCBQb3J0JywgdmFsdWU6ICdzcmNfcHJvdG9fcG9ydCcsIGZpZWxkOiAnc3JjX3Byb3RvX3BvcnQnIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIENvdW50cnknLCB2YWx1ZTogJ0dlb2dyYXBoeV9kc3QnLCBmaWVsZDogJ2RzdF9nZW8nIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIFJlZ2lvbicsIHZhbHVlOiAnZHN0X2dlb19yZWdpb24nLCBmaWVsZDogJ2RzdF9nZW9fcmVnaW9uJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBDaXR5JywgdmFsdWU6ICdkc3RfZ2VvX2NpdHknLCBmaWVsZDogJ2RzdF9nZW9fY2l0eScgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gQXMgTnVtYmVyJywgdmFsdWU6ICdBU19kc3QnLCBmaWVsZDogJ2RzdF9hcycgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gSW50ZXJmYWNlJywgdmFsdWU6ICdJbnRlcmZhY2VJRF9kc3QnLCBmaWVsZDogJ291dHB1dF9wb3J0JyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBQb3J0JywgdmFsdWU6ICdQb3J0X2RzdCcsIGZpZWxkOiAnbDRfZHN0X3BvcnQnIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIFZMQU4nLCB2YWx1ZTogJ1ZMQU5fZHN0JywgZmllbGQ6ICd2bGFuX291dCcgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gSVAvQ0lEUicsIHZhbHVlOiAnSVBfZHN0JywgZmllbGQ6ICdpcHY0X2RzdF9hZGRyJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBNQUMgQWRkcmVzcycsIHZhbHVlOiAnZHN0X2V0aF9tYWMnLCBmaWVsZDogJ2RzdF9ldGhfbWFjJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBSb3V0ZSBQcmVmaXgvTEVOJywgdmFsdWU6ICdkc3Rfcm91dGVfcHJlZml4X2xlbicsIGZpZWxkOiAnZHN0X3JvdXRlX3ByZWZpeF9sZW4nIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIFJvdXRlIExFTicsIHZhbHVlOiAnZHN0X3JvdXRlX2xlbmd0aCcsIGZpZWxkOiAnZHN0X3JvdXRlX2xlbmd0aCcgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gQkdQIENvbW11bml0eScsIHZhbHVlOiAnZHN0X2JncF9jb21tdW5pdHknLCBmaWVsZDogJ2RzdF9iZ3BfY29tbXVuaXR5JyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBCR1AgQVNfUGF0aCcsIHZhbHVlOiAnZHN0X2JncF9hc3BhdGgnLCBmaWVsZDogJ2RzdF9iZ3BfYXNwYXRoJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBCR1AgTmV4dCBIb3AgSVAvQ0lEUicsIHZhbHVlOiAnZHN0X25leHRob3BfaXAnLCBmaWVsZDogJ2lwdjRfZHN0X25leHRfaG9wJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBOZXh0IEhvcCBBUyBOdW1iZXInLCB2YWx1ZTogJ2RzdF9uZXh0aG9wX2FzbicsIGZpZWxkOiAnZHN0X25leHRob3BfYXMnIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIDJuZCBCR1BfSE9QIEFTIE51bWJlcicsIHZhbHVlOiAnZHN0X3NlY29uZF9hc24nLCBmaWVsZDogJ2RzdF9zZWNvbmRfYXNuJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiAzbmQgQkdQX0hPUCBBUyBOdW1iZXInLCB2YWx1ZTogJ2RzdF90aGlyZF9hc24nLCBmaWVsZDogJ2RzdF90aGlyZF9hc24nIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIFByb3RvY29sOklQIFBvcnQnLCB2YWx1ZTogJ2RzdF9wcm90b19wb3J0JywgZmllbGQ6ICdkc3RfcHJvdG9fcG9ydCcgfSxcbiAgeyB0ZXh0OiAnRnVsbCBEZXZpY2UnLCB2YWx1ZTogJ2lfZGV2aWNlX2lkJywgZmllbGQ6ICdpX2RldmljZV9pZCcgfSxcbiAgeyB0ZXh0OiAnRnVsbCBTaXRlJywgdmFsdWU6ICdpX2RldmljZV9zaXRlX25hbWUnLCBmaWVsZDogJ2lfZGV2aWNlX3NpdGVfbmFtZScgfSxcbiAgeyB0ZXh0OiAnRnVsbCBQcm90b2NvbCcsIHZhbHVlOiAnUHJvdG8nLCBmaWVsZDogJ3Byb3RvY2wnIH0sXG4gIHsgdGV4dDogJ0Z1bGwgSU5FVCBGYW1pbHknLCB2YWx1ZTogJ2luZXRfZmFtaWx5JywgZmllbGQ6ICdpbmV0X2ZhbWlseScgfSxcbiAgeyB0ZXh0OiAnRnVsbCBUT1MnLCB2YWx1ZTogJ1RPUycsIGZpZWxkOiAndG9zJyB9LFxuICB7IHRleHQ6ICdGdWxsIFRDUCBmbGFncycsIHZhbHVlOiAndGNwX2ZsYWdzJywgZmllbGQ6ICd0Y3BfZmxhZ3MnIH0sXG4gIHsgdGV4dDogJ0FTIFRvcCBUYWxrZXJzJywgdmFsdWU6ICdBU1RvcFRhbGtlcnMnLCBmaWVsZDonQVNUb3BUYWxrZXJzJ30sXG4gIHsgdGV4dDogJ0ludGVyZmFjZSBUb3AgVGFsa2VycycsIHZhbHVlOiAnSW50ZXJmYWNlVG9wVGFsa2VycycsIGZpZWxkOiAnSW50ZXJmYWNlVG9wVGFsa2VycycgfSxcbiAgeyB0ZXh0OiAnUG9ydCB0byBQb3J0IFRhbGtlcnMnLCB2YWx1ZTogJ1BvcnRQb3J0VGFsa2VycycsIGZpZWxkOiAnUG9ydFBvcnRUYWxrZXJzJyB9LFxuICB7IHRleHQ6ICdSZWdpb24gVG9wIFRhbGtlcnMnLCB2YWx1ZTogJ1JlZ2lvblRvcFRhbGtlcnMnLCBmaWVsZDogJ1JlZ2lvblRvcFRhbGtlcnMnIH0sXG5dO1xuXG5mdW5jdGlvbiB0b0JpdHNQZXJTZWNvbmQodmFsdWUsIHJvdykge1xuICByZXR1cm4gdmFsdWUgKiA4IC8gcm93LmlfZHVyYXRpb247XG59XG5cbmZ1bmN0aW9uIHRvUGVyU2Vjb25kUmF0ZSh2YWx1ZSwgcm93KSB7XG4gIHJldHVybiB2YWx1ZSAvIHJvdy5pX2R1cmF0aW9uO1xufVxuXG5mdW5jdGlvbiB0b3RhbFRvQXZnUGVyU2Vjb25kKHZhbHVlLCByb3csIHJhbmdlU2Vjb25kcykge1xuICByZXR1cm4gdmFsdWUgLyByYW5nZVNlY29uZHM7XG59XG5cbmZ1bmN0aW9uIHRvdGFsVG9CaXRzUGVyU2Vjb25kKHZhbHVlLCByb3csIHJhbmdlU2Vjb25kcykge1xuICByZXR1cm4gdmFsdWUgKiA4IC8gcmFuZ2VTZWNvbmRzO1xufVxuXG5jb25zdCB1bml0TGlzdCA9IFtcbiAge1xuICAgIHRleHQ6ICdCaXRzL3MnLFxuICAgIHZhbHVlOiAnYnl0ZXMnLFxuICAgIGZpZWxkOiAnZl9zdW1fYm90aF9ieXRlcycsXG4gICAgb3V0c29ydDogJ2F2Z19ib3RoJyxcbiAgICBnZlVuaXQ6ICdicHMnLFxuICAgIGdmQXhpc0xhYmVsOiAnQml0cy9zJyxcbiAgICB0cmFuc2Zvcm06IHRvQml0c1BlclNlY29uZCxcbiAgICB0YWJsZUZpZWxkczogW1xuICAgICAgeyB0ZXh0OiAnQXZnJywgZmllbGQ6ICdhdmdfYm90aCcsIHVuaXQ6ICdicHMnLCB0cmFuc2Zvcm06IHRvdGFsVG9CaXRzUGVyU2Vjb25kIH0sXG4gICAgICB7IHRleHQ6ICc5NXRoIFBlcmNlbnRpbGUnLCBmaWVsZDogJ3A5NXRoX2JvdGgnLCB1bml0OiAnYnBzJyB9LFxuICAgICAgeyB0ZXh0OiAnTWF4JywgZmllbGQ6ICdtYXhfYm90aCcsIHVuaXQ6ICdicHMnIH0sXG4gICAgXSxcbiAgfSxcbiAge1xuICAgIHRleHQ6ICdQYWNrZXRzL3MnLFxuICAgIHZhbHVlOiAncGFja2V0cycsXG4gICAgZmllbGQ6ICdmX3N1bV9ib3RoX3BrdHMnLFxuICAgIG91dHNvcnQ6ICdhdmdfYm90aCcsXG4gICAgZ2ZVbml0OiAncHBzJyxcbiAgICBnZkF4aXNsYWJlbDogJ1BhY2tldHMvcycsXG4gICAgdHJhbnNmb3JtOiB0b1BlclNlY29uZFJhdGUsXG4gICAgdGFibGVGaWVsZHM6IFtcbiAgICAgIHsgdGV4dDogJ0F2ZycsIGZpZWxkOiAnYXZnX2JvdGgnLCB1bml0OiAncHBzJywgdHJhbnNmb3JtOiB0b3RhbFRvQXZnUGVyU2Vjb25kIH0sXG4gICAgICB7IHRleHQ6ICc5NXRoIFBlcmNlbnRpbGUnLCBmaWVsZDogJ3A5NXRoX2JvdGgnLCB1bml0OiAncHBzJyB9LFxuICAgICAgeyB0ZXh0OiAnTWF4JywgZmllbGQ6ICdtYXhfYm90aCcsIHVuaXQ6ICdwcHMnIH0sXG4gICAgXSxcbiAgfSxcbiAge1xuICAgIHRleHQ6ICdVbmlxdWUgU3JjIElQcycsXG4gICAgdmFsdWU6ICd1bmlxdWVfc3JjX2lwJyxcbiAgICBmaWVsZDogJ2ZfaGxsKGluZXRfc3JjX2FkZHIsMC4wMDAxKScsXG4gICAgb3V0c29ydDogJ2F2Z19pcHMnLFxuICAgIGdmVW5pdDogJ3Nob3J0JyxcbiAgICBnZkF4aXNMYWJlbDogJ1VuaXF1ZSBTcmMgSVBzJyxcbiAgICB0YWJsZUZpZWxkczogW1xuICAgICAgeyB0ZXh0OiAnQXZlcmFnZScsIGZpZWxkOiAnYXZnX2lwcycsIHVuaXQ6ICdub25lJyB9LFxuICAgICAgeyB0ZXh0OiAncDk1dGgnLCBmaWVsZDogJ3A5NXRoX2lwcycsIHVuaXQ6ICdub25lJyB9LFxuICAgICAgeyB0ZXh0OiAnTWF4JywgZmllbGQ6ICdtYXhfaXBzJywgdW5pdDogJ25vbmUnIH0sXG4gICAgICB7IHRleHQ6ICdwOTV0aCBtYnBzJywgZmllbGQ6ICdwOTV0aF9iaXRzX3Blcl9zZWMnLCB1bml0OiAnYnBzJyB9LFxuICAgICAgeyB0ZXh0OiAncDk1dGggcHBzJywgZmllbGQ6ICdwOTV0aF9wa3RzX3Blcl9zZWMnLCB1bml0OiAncHBzJyB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICB0ZXh0OiAnVW5pcXVlIERzdCBJUHMnLFxuICAgIHZhbHVlOiAndW5pcXVlX2RzdF9pcCcsXG4gICAgZmllbGQ6ICdmX2hsbChpbmV0X2RzdF9hZGRyLDAuMDAwMSknLFxuICAgIG91dHNvcnQ6ICdhdmdfaXBzJyxcbiAgICBnZlVuaXQ6ICdzaG9ydCcsXG4gICAgZ2ZBeGlzTGFiZWw6ICdVbmlxdWUgRHN0IElQcycsXG4gICAgdGFibGVGaWVsZHM6IFtcbiAgICAgIHsgdGV4dDogJ0F2ZXJhZ2UnLCBmaWVsZDogJ2F2Z19pcHMnLCB1bml0OiAnbm9uZScgfSxcbiAgICAgIHsgdGV4dDogJ3A5NXRoJywgZmllbGQ6ICdwOTV0aF9pcHMnLCB1bml0OiAnbm9uZScgfSxcbiAgICAgIHsgdGV4dDogJ01heCcsIGZpZWxkOiAnbWF4X2lwcycsIHVuaXQ6ICdub25lJyB9LFxuICAgICAgeyB0ZXh0OiAncDk1dGggbWJwcycsIGZpZWxkOiAncDk1dGhfYml0c19wZXJfc2VjJywgdW5pdDogJ2JwcycgfSxcbiAgICAgIHsgdGV4dDogJ3A5NXRoIHBwcycsIGZpZWxkOiAncDk1dGhfcGt0c19wZXJfc2VjJywgdW5pdDogJ3BwcycgfSxcbiAgICBdLFxuICB9LFxuXTtcblxuY29uc3QgZmlsdGVyRmllbGRMaXN0ID0gW1xuICB7IHRleHQ6ICdTb3VyY2UgQ2l0eScsIGZpZWxkOiAnc3JjX2dlb19jaXR5JyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgUmVnaW9uJywgZmllbGQ6ICdzcmNfZ2VvX3JlZ2lvbicgfSxcbiAgeyB0ZXh0OiAnU291cmNlIENvdW50cnknLCBmaWVsZDogJ3NyY19nZW8nIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBBUyBOdW1iZXInLCBmaWVsZDogJ3NyY19hcycgfSxcbiAgeyB0ZXh0OiAnU291cmNlIEFTIE5hbWUnLCBmaWVsZDogJ3NyY19hc19uYW1lJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgRmxvdyBUYWcnLCBmaWVsZDogJ3NyY19mbG93X3RhZ3MnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBJUCBQb3J0JywgZmllbGQ6ICdsNF9zcmNfcG9ydCcgfSxcbiAgeyB0ZXh0OiAnU291cmNlIE1BQyBBZGRyZXNzJywgZmllbGQ6ICdzcmNfZXRoX21hYycgfSxcbiAgeyB0ZXh0OiAnU291cmNlIFZMQU4nLCBmaWVsZDogJ3ZsYW5faW4nIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBJUCBBZGRyZXNzJywgZmllbGQ6ICdpbmV0X3NyY19hZGRyJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgSW50ZXJmYWNlIElEJywgZmllbGQ6ICdpbnB1dF9wb3J0JyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgSW50ZXJmYWNlIE5hbWUnLCBmaWVsZDogJ2lfaW5wdXRfaW50ZXJmYWNlX2Rlc2NyaXB0aW9uJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgSW50ZXJmYWNlIERlc2NyaXB0aW9uJywgZmllbGQ6ICdpX2lucHV0X3NubXBfYWxpYXMnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBSb3V0ZSBQcmVmaXgnLCBmaWVsZDogJ2lwdjRfc3JjX3JvdXRlX3ByZWZpeCcgfSxcbiAgeyB0ZXh0OiAnU291cmNlIFJvdXRlIExFTicsIGZpZWxkOiAnc3JjX3JvdXRlX2xlbmd0aCcgfSxcbiAgeyB0ZXh0OiAnU291cmNlIEJHUCBBU19QQVRIJywgZmllbGQ6ICdzcmNfYmdwX2FzcGF0aCcgfSxcbiAgeyB0ZXh0OiAnU291cmNlIEJHUCBDb21tdW5pdHknLCBmaWVsZDogJ3NyY19iZ3BfY29tbXVuaXR5JyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgTmV4dCBIb3AgSVAvQ0lEUicsIGZpZWxkOiAnaXB2NF9zcmNfbmV4dF9ob3AnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBOZXh0IEhvcCBBUyBOdW1iZXInLCBmaWVsZDogJ3NyY19uZXh0aG9wX2FzJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgTmV4dCBIb3AgQVMgTmFtZScsIGZpZWxkOiAnc3JjX25leHRob3BfYXNfbmFtZScgfSxcbiAgeyB0ZXh0OiAnU291cmNlIDJuZCBCR1BfSE9QIEFTIE51bWJlcicsIGZpZWxkOiAnc3JjX3NlY29uZF9hc24nIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSAybmQgQkdQX0hPUCBBUyBOYW1lJywgZmllbGQ6ICdzcmNfc2Vjb25kX2Fzbl9uYW1lJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgM25kIEJHUF9IT1AgQVMgTnVtYmVyJywgZmllbGQ6ICdzcmNfdGhpcmRfYXNuJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgM25kIEJHUF9IT1AgQVMgTmFtZScsIGZpZWxkOiAnc3JjX3RoaXJkX2Fzbl9uYW1lJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBDaXR5JywgZmllbGQ6ICdkc3RfZ2VvX2NpdHknIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIFJlZ2lvbicsIGZpZWxkOiAnZHN0X2dlb19yZWdpb24nIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIENvdW50cnknLCBmaWVsZDogJ2RzdF9nZW8nIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIEFTIE51bWJlcicsIGZpZWxkOiAnZHN0X2FzJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBBUyBOYW1lJywgZmllbGQ6ICdkc3RfYXNfbmFtZScgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gRmxvdyBUYWcnLCBmaWVsZDogJ2RzdF9mbG93X3RhZ3MnIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIElQIFBvcnQnLCBmaWVsZDogJ2w0X2RzdF9wb3J0JyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBNQUMgQWRkcmVzcycsIGZpZWxkOiAnZHN0X2V0aF9tYWMnIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIFZMQU4nLCBmaWVsZDogJ3ZsYW5fb3V0JyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBJUCBBZGRyZXNzJywgZmllbGQ6ICdpbmV0X2RzdF9hZGRyJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBJbnRlcmZhY2UgSUQnLCBmaWVsZDogJ291dHB1dF9wb3J0JyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBJbnRlcmZhY2UgTmFtZScsIGZpZWxkOiAnaV9vdXRwdXRfaW50ZXJmYWNlX2Rlc2NyaXB0aW9uJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBJbnRlcmZhY2UgRGVzY3JpcHRpb24nLCBmaWVsZDogJ2lfb3V0cHV0X3NubXBfYWxpYXMnIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIFJvdXRlIFByZWZpeCcsIGZpZWxkOiAnaXB2NF9kc3Rfcm91dGVfcHJlZml4JyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBSb3V0ZSBMRU4nLCBmaWVsZDogJ2RzdF9yb3V0ZV9sZW5ndGgnIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIEJHUCBBU19QQVRIJywgZmllbGQ6ICdkc3RfYmdwX2FzcGF0aCcgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gQkdQIENvbW11bml0eScsIGZpZWxkOiAnZHN0X2JncF9jb21tdW5pdHknIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIE5leHQgSG9wIElQL0NJRFInLCBmaWVsZDogJ2lwdjRfZHN0X25leHRfaG9wJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBOZXh0IEhvcCBBUyBOdW1iZXInLCBmaWVsZDogJ2RzdF9uZXh0aG9wX2FzJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBOZXh0IEhvcCBBUyBOYW1lJywgZmllbGQ6ICdkc3RfbmV4dGhvcF9hc19uYW1lJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiAybmQgQkdQX0hPUCBBUyBOdW1iZXInLCBmaWVsZDogJ2RzdF9zZWNvbmRfYXNuJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiAybmQgQkdQX0hPUCBBUyBOYW1lJywgZmllbGQ6ICdkc3Rfc2Vjb25kX2Fzbl9uYW1lJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiAzbmQgQkdQX0hPUCBBUyBOdW1iZXInLCBmaWVsZDogJ2RzdF90aGlyZF9hc24nIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIDNuZCBCR1BfSE9QIEFTIE5hbWUnLCBmaWVsZDogJ2RzdF90aGlyZF9hc25fbmFtZScgfSxcbiAgeyB0ZXh0OiAnVENQIEZsYWdzJywgZmllbGQ6ICd0Y3BfZmxhZ3MnIH0sXG4gIHsgdGV4dDogJ1RDUCBGbGFncyAocmF3KScsIGZpZWxkOiAndGNwX2ZsYWdzX3JhdycgfSxcbiAgeyB0ZXh0OiAnUHJvdG9jb2wnLCBmaWVsZDogJ3Byb3RvY29sJyB9LFxuICAvLyB7dGV4dDogJ1Byb3RvY29sIE5hbWUnLCBmaWVsZDogJ2lfcHJvdG9jb2xfbmFtZSd9LFxuICB7IHRleHQ6ICdJTkVUIEZhbWlseScsIGZpZWxkOiAnaW5ldF9mYW1pbHknIH0sXG4gIHsgdGV4dDogJ0RldmljZSBOYW1lJywgZmllbGQ6ICdpX2RldmljZV9uYW1lJyB9LFxuICB7IHRleHQ6ICdUQ1AgUmV0cmFuc21pdHMnLCBmaWVsZDogJ3RjcF9yZXRyYW5zbWl0JyB9LFxuICB7IHRleHQ6ICdUT1MvRGlmZnNlcnYnLCBmaWVsZDogJ3RvcycgfSxcbiAgeyB0ZXh0OiAnUGVyLWZsb3cgcGFja2V0cyAoYm90aCBpbiBhbmQgb3V0KScsIGZpZWxkOiAnYm90aF9wa3RzJyB9LFxuICB7IHRleHQ6ICdQZXItZmxvdyBwYWNrZXRzIChyZWNvcmRlZCBpbmJvdW5kKScsIGZpZWxkOiAnaW5fcGt0cycgfSxcbiAgeyB0ZXh0OiAnUGVyLWZsb3cgYnl0ZXMgKHJlY29yZGVkIGluYm91bmQpJywgZmllbGQ6ICdpbl9ieXRlcycgfSxcbiAgeyB0ZXh0OiAnUGVyLWZsb3cgcGFja2V0cyAocmVjb3JkZWQgb3V0Ym91bmQpJywgZmllbGQ6ICdvdXRfcGt0cycgfSxcbiAgeyB0ZXh0OiAnUGVyLWZsb3cgYnl0ZXMgKHJlY29yZGVkIG91dGJvdW5kKScsIGZpZWxkOiAnb3V0X2J5dGVzJyB9LFxuXTtcblxuZXhwb3J0IHsgbWV0cmljTGlzdCwgdW5pdExpc3QsIGZpbHRlckZpZWxkTGlzdCB9O1xuIiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCAnLi9rZW50aWtBUEknO1xuaW1wb3J0IHsgZ2V0UmVnaW9uIH0gZnJvbSBcIi4vcmVnaW9uSGVscGVyXCI7XG5cblxuZnVuY3Rpb24gZ2V0VVRDVGltZXN0YW1wKCkge1xuICBjb25zdCB0cyA9IG5ldyBEYXRlKCk7XG4gIHJldHVybiB0cy5nZXRUaW1lKCkgKyB0cy5nZXRUaW1lem9uZU9mZnNldCgpICogNjAgKiAxMDAwO1xufVxuXG4vLyBHZXQgaGFzaCBvZiBLZW50aWsgcXVlcnlcbmZ1bmN0aW9uIGdldEhhc2gocXVlcnlPYmo6IGFueSkge1xuICBjb25zdCBxdWVyeSA9IF8uY2xvbmVEZWVwKHF1ZXJ5T2JqKTtcbiAgcXVlcnkuc3RhcnRpbmdfdGltZSA9IG51bGw7XG4gIHF1ZXJ5LmVuZGluZ190aW1lID0gbnVsbDtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHF1ZXJ5KTtcbn1cblxuLy8gUHJldmVudCB0b28gZnJlcXVlbnQgcXVlcmllc1xuZnVuY3Rpb24gZ2V0TWF4UmVmcmVzaEludGVydmFsKHF1ZXJ5OiBhbnkpIHtcbiAgY29uc3QgaW50ZXJ2YWw6IGFueSA9IERhdGUucGFyc2UocXVlcnkuZW5kaW5nX3RpbWUpIC0gRGF0ZS5wYXJzZShxdWVyeS5zdGFydGluZ190aW1lKTtcbiAgaWYgKGludGVydmFsID4gbW9tZW50LmR1cmF0aW9uKDEsICdtb250aHMnKSkge1xuICAgIHJldHVybiA2MCAqIDYwICogMTAwMDsgLy8gMSBob3VyXG4gIH0gZWxzZSBpZiAoaW50ZXJ2YWwgPiBtb21lbnQuZHVyYXRpb24oMSwgJ2RheScpKSB7XG4gICAgcmV0dXJuIDE1ICogNjAgKiAxMDAwOyAvLyAxNSBtaW5cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gNSAqIDYwICogMTAwMDsgLy8gNSBtaW5cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgS2VudGlrUHJveHkge1xuICBrZW50aWtBUEk6IGFueTtcbiAgY2FjaGU6IGFueTtcbiAgY2FjaGVVcGRhdGVJbnRlcnZhbDogbnVtYmVyO1xuICByZXF1ZXN0Q2FjaGluZ0ludGVydmFsczogeyAnMWQnOiBudW1iZXIgfTtcbiAgZ2V0RGV2aWNlczogKCkgPT4gUHJvbWlzZTxhbnlbXT47XG5cbiAgLyoqIEBuZ0luamVjdCAqL1xuICBjb25zdHJ1Y3RvcihiYWNrZW5kU3J2LCBrZW50aWtBUElTcnY6IGFueSkge1xuICAgIHRoaXMua2VudGlrQVBJID0ga2VudGlrQVBJU3J2O1xuICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICB0aGlzLmNhY2hlVXBkYXRlSW50ZXJ2YWwgPSA1ICogNjAgKiAxMDAwOyAvLyA1IG1pbiBieSBkZWZhdWx0XG4gICAgdGhpcy5yZXF1ZXN0Q2FjaGluZ0ludGVydmFscyA9IHtcbiAgICAgICcxZCc6IDAsXG4gICAgfTtcbiAgICB0aGlzLmdldERldmljZXMgPSB0aGlzLmtlbnRpa0FQSS5nZXREZXZpY2VzLmJpbmQodGhpcy5rZW50aWtBUEkpO1xuICB9XG5cbiAgaW52b2tlVG9wWERhdGFRdWVyeShxdWVyeTogYW55KSB7XG4gICAgY29uc3QgY2FjaGVkUXVlcnkgPSBfLmNsb25lRGVlcChxdWVyeSk7XG4gICAgY29uc3QgaGFzaCA9IGdldEhhc2goY2FjaGVkUXVlcnkpO1xuXG4gICAgaWYgKHRoaXMuc2hvdWxkSW52b2tlKHF1ZXJ5KSkge1xuICAgICAgLy8gSW52b2tlIHF1ZXJ5XG4gICAgICByZXR1cm4gdGhpcy5rZW50aWtBUEkuaW52b2tlVG9wWERhdGFRdWVyeShxdWVyeSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBnZXRVVENUaW1lc3RhbXAoKTtcblxuICAgICAgICB0aGlzLmNhY2hlW2hhc2hdID0ge1xuICAgICAgICAgIHRpbWVzdGFtcDogdGltZXN0YW1wLFxuICAgICAgICAgIHF1ZXJ5OiBjYWNoZWRRdWVyeSxcbiAgICAgICAgICByZXN1bHQ6IHJlc3VsdCxcbiAgICAgICAgfTtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnSW52b2tlIEtlbnRpayBxdWVyeScpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEdldCBmcm9tIGNhY2hlXG4gICAgICAvL2NvbnNvbGUubG9nKCdHZXQgcmVzdWx0IGZyb20gY2FjaGUnKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jYWNoZVtoYXNoXS5yZXN1bHQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIERlY2lkZSwgaWYgcXVlcnkgc2hvdWxkIGJlIGludm9rZWQgb3IgZ2V0IGRhdGEgZnJvbSBjYWNoZT9cbiAgc2hvdWxkSW52b2tlKHF1ZXJ5OiBhbnkpIHtcbiAgICBjb25zdCBrZW50aWtRdWVyeSA9IHF1ZXJ5O1xuICAgIGNvbnN0IGhhc2ggPSBnZXRIYXNoKGtlbnRpa1F1ZXJ5KTtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBnZXRVVENUaW1lc3RhbXAoKTtcblxuICAgIGNvbnN0IHN0YXJ0aW5nVGltZSA9IERhdGUucGFyc2Uoa2VudGlrUXVlcnkuc3RhcnRpbmdfdGltZSk7XG4gICAgY29uc3QgZW5kaW5nVGltZSA9IERhdGUucGFyc2Uoa2VudGlrUXVlcnkuZW5kaW5nX3RpbWUpO1xuICAgIGNvbnN0IHF1ZXJ5UmFuZ2UgPSBlbmRpbmdUaW1lIC0gc3RhcnRpbmdUaW1lO1xuXG4gICAgY29uc3QgY2FjaGVTdGFydGluZ1RpbWUgPSB0aGlzLmNhY2hlW2hhc2hdID8gRGF0ZS5wYXJzZSh0aGlzLmNhY2hlW2hhc2hdLnF1ZXJ5LnN0YXJ0aW5nX3RpbWUpIDogbnVsbDtcbiAgICBjb25zdCBjYWNoZUVuZGluZ1RpbWUgPSB0aGlzLmNhY2hlW2hhc2hdID8gRGF0ZS5wYXJzZSh0aGlzLmNhY2hlW2hhc2hdLnF1ZXJ5LmVuZGluZ190aW1lKSA6IG51bGw7XG4gICAgY29uc3QgY2FjaGVkUXVlcnlSYW5nZSA9IGNhY2hlRW5kaW5nVGltZSAtIGNhY2hlU3RhcnRpbmdUaW1lO1xuXG4gICAgY29uc3QgbWF4UmVmcmVzaEludGVydmFsID0gZ2V0TWF4UmVmcmVzaEludGVydmFsKGtlbnRpa1F1ZXJ5KTtcblxuICAgIHJldHVybiAoXG4gICAgICAhdGhpcy5jYWNoZVtoYXNoXSB8fFxuICAgICAgdGltZXN0YW1wIC0gZW5kaW5nVGltZSA+IG1heFJlZnJlc2hJbnRlcnZhbCB8fFxuICAgICAgKHRoaXMuY2FjaGVbaGFzaF0gJiZcbiAgICAgICAgKHRpbWVzdGFtcCAtIGNhY2hlRW5kaW5nVGltZSA+IG1heFJlZnJlc2hJbnRlcnZhbCB8fFxuICAgICAgICAgIHN0YXJ0aW5nVGltZSA8IGNhY2hlU3RhcnRpbmdUaW1lIHx8XG4gICAgICAgICAgTWF0aC5hYnMocXVlcnlSYW5nZSAtIGNhY2hlZFF1ZXJ5UmFuZ2UpID4gNjAgKiAxMDAwKSkgLy8gaXMgdGltZSByYW5nZSBjaGFuZ2VkP1xuICAgICk7XG4gIH1cblxuICBnZXRGaWVsZFZhbHVlcyhmaWVsZDogc3RyaW5nKSB7XG4gICAgbGV0IHRzID0gZ2V0VVRDVGltZXN0YW1wKCk7XG4gICAgaWYgKHRoaXMuY2FjaGVbZmllbGRdICYmIHRzIC0gdGhpcy5jYWNoZVtmaWVsZF0udHMgPCB0aGlzLmNhY2hlVXBkYXRlSW50ZXJ2YWwpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jYWNoZVtmaWVsZF0udmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5rZW50aWtBUEkuZ2V0RmllbGRWYWx1ZXMoZmllbGQpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgdHMgPSBnZXRVVENUaW1lc3RhbXAoKTtcbiAgICAgICAgdGhpcy5jYWNoZVtmaWVsZF0gPSB7XG4gICAgICAgICAgdHM6IHRzLFxuICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEN1c3RvbURpbWVuc2lvbnMoKSB7XG4gICAgaWYgKHRoaXMuY2FjaGUuY3VzdG9tRGltZW5zaW9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBjdXN0b21EaW1lbnNpb25zID0gYXdhaXQgdGhpcy5rZW50aWtBUEkuZ2V0Q3VzdG9tRGltZW5zaW9ucygpO1xuICAgICAgdGhpcy5jYWNoZS5jdXN0b21EaW1lbnNpb25zID0gY3VzdG9tRGltZW5zaW9ucy5tYXAoZGltZW5zaW9uID0+ICh7XG4gICAgICAgIHZhbHVlczogdGhpcy5fZ2V0RGltZW5zaW9uUG9wdWxhdG9yc1ZhbHVlcyhkaW1lbnNpb24pLFxuICAgICAgICB0ZXh0OiBgQ3VzdG9tICR7ZGltZW5zaW9uLmRpc3BsYXlfbmFtZX1gLFxuICAgICAgICB2YWx1ZTogZGltZW5zaW9uLm5hbWUsXG4gICAgICAgIGZpZWxkOiBkaW1lbnNpb24ubmFtZVxuICAgICAgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jYWNoZS5jdXN0b21EaW1lbnNpb25zO1xuICB9XG5cbiAgYXN5bmMgZ2V0U2F2ZWRGaWx0ZXJzKCkge1xuICAgIGlmICh0aGlzLmNhY2hlLnNhdmVkRmlsdGVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBzYXZlZEZpbHRlcnMgPSBhd2FpdCB0aGlzLmtlbnRpa0FQSS5nZXRTYXZlZEZpbHRlcnMoKTtcbiAgICAgIHRoaXMuY2FjaGUuc2F2ZWRGaWx0ZXJzID0gXy5tYXAoc2F2ZWRGaWx0ZXJzLCBmaWx0ZXIgPT4gKHtcbiAgICAgICAgdGV4dDogYFNhdmVkICR7ZmlsdGVyLmZpbHRlcl9uYW1lfWAsXG4gICAgICAgIGZpZWxkOiBmaWx0ZXIuZmlsdGVyX25hbWUsXG4gICAgICAgIGlkOiBmaWx0ZXIuaWRcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuc2F2ZWRGaWx0ZXJzO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0RGltZW5zaW9uUG9wdWxhdG9yc1ZhbHVlcyhkaW1lbnNpb246IGFueSkge1xuICAgIHJldHVybiBkaW1lbnNpb24ucG9wdWxhdG9ycy5yZWR1Y2UoKHZhbHVlcywgcG9wdWxhdG9yKSA9PiB7XG4gICAgICB2YWx1ZXMucHVzaChwb3B1bGF0b3IudmFsdWUpO1xuICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9LCBbXSk7XG4gIH1cbn1cblxuYW5ndWxhci5tb2R1bGUoJ2dyYWZhbmEuc2VydmljZXMnKS5zZXJ2aWNlKCdrZW50aWtQcm94eVNydicsIEtlbnRpa1Byb3h5KTtcbiIsImltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IHVuaXRMaXN0LCBmaWx0ZXJGaWVsZExpc3QgfSBmcm9tICcuL21ldHJpY19kZWYnO1xuXG5jb25zdCBLRU5USUtfVElNRV9GT1JNQVQgPSAnWVlZWS1NTS1ERCBISDptbTpzcyc7XG5cbmZ1bmN0aW9uIGZvcm1hdE1ldHJpY0FnZ3ModW5pdERlZjogYW55KSB7XG4gIGNvbnN0IGFnZ3MgPSBbXG4gICAge1xuICAgICAgbmFtZTogJ2F2Z19ib3RoJyxcbiAgICAgIGNvbHVtbjogdW5pdERlZi5maWVsZCxcbiAgICAgIGZuOiAnYXZlcmFnZScsXG4gICAgICByYXc6IHRydWUsIC8vIFNldCB0byBnZXQgdGltZXNlcmllcyBkYXRhXG4gICAgICBzYW1wbGVfcmF0ZTogMSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdwOTV0aF9ib3RoJyxcbiAgICAgIGNvbHVtbjogdW5pdERlZi5maWVsZCxcbiAgICAgIGZuOiAncGVyY2VudGlsZScsXG4gICAgICByYW5rOiA5NSxcbiAgICAgIHNhbXBsZV9yYXRlOiAxLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ21heF9ib3RoJyxcbiAgICAgIGNvbHVtbjogdW5pdERlZi5maWVsZCxcbiAgICAgIGZuOiAnbWF4JyxcbiAgICAgIHNhbXBsZV9yYXRlOiAxLFxuICAgIH0sXG4gIF07XG5cbiAgcmV0dXJuIGFnZ3M7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFVuaXF1ZUlwQWdncyh1bml0RGVmOiBhbnkpIHtcbiAgY29uc3QgYWdncyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiAnYXZnX2lwcycsXG4gICAgICBjb2x1bW46IHVuaXREZWYuZmllbGQsXG4gICAgICBmbjogJ2F2ZXJhZ2UnLFxuICAgICAgcmF3OiB0cnVlLFxuICAgICAgc2FtcGxlX3JhdGU6IDEsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAncDk1dGhfaXBzJyxcbiAgICAgIGNvbHVtbjogdW5pdERlZi5maWVsZCxcbiAgICAgIGZuOiAncGVyY2VudGlsZScsXG4gICAgICByYW5rOiA5NSxcbiAgICAgIHNhbXBsZV9yYXRlOiAxLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ21heF9pcHMnLFxuICAgICAgY29sdW1uOiB1bml0RGVmLmZpZWxkLFxuICAgICAgZm46ICdtYXgnLFxuICAgICAgc2FtcGxlX3JhdGU6IDEsXG4gICAgICByYXc6IHRydWUsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAncDk1dGhfYml0c19wZXJfc2VjJyxcbiAgICAgIGNvbHVtbjogJ2Zfc3VtX2JvdGhfYnl0ZXMnLFxuICAgICAgZm46ICdwZXJjZW50aWxlJyxcbiAgICAgIHJhbms6IDk1LFxuICAgICAgc2FtcGxlX3JhdGU6IDEsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAncDk1dGhfcGt0c19wZXJfc2VjJyxcbiAgICAgIGNvbHVtbjogJ2Zfc3VtX2JvdGhfcGt0cycsXG4gICAgICBmbjogJ3BlcmNlbnRpbGUnLFxuICAgICAgcmFuazogOTUsXG4gICAgICBzYW1wbGVfcmF0ZTogMSxcbiAgICB9LFxuICBdO1xuXG4gIHJldHVybiBhZ2dzO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRBZ2dzKHVuaXREZWY6IGFueSkge1xuICBsZXQgYWdncyA9IFtdO1xuICBpZiAodW5pdERlZi52YWx1ZSA9PT0gJ3VuaXF1ZV9zcmNfaXAnIHx8IHVuaXREZWYudmFsdWUgPT09ICd1bmlxdWVfZHN0X2lwJykge1xuICAgIGFnZ3MgPSBmb3JtYXRVbmlxdWVJcEFnZ3ModW5pdERlZik7XG4gIH0gZWxzZSB7XG4gICAgYWdncyA9IGZvcm1hdE1ldHJpY0FnZ3ModW5pdERlZik7XG4gIH1cblxuICByZXR1cm4gYWdncztcbn1cblxuZnVuY3Rpb24gZm9ybWF0RmlsdGVycyhrZW50aWtGaWx0ZXJHcm91cHM6IEFycmF5PGFueT4pIHtcbiAgY29uc3QgZmlsdGVyc09iaiA9IHtcbiAgICBjb25uZWN0b3I6ICdBbGwnLFxuICAgIGZpbHRlckdyb3VwczogW10sXG4gIH07XG5cbiAgaWYgKGtlbnRpa0ZpbHRlckdyb3Vwcy5sZW5ndGgpIHtcbiAgICBmaWx0ZXJzT2JqLmZpbHRlckdyb3VwcyA9IGtlbnRpa0ZpbHRlckdyb3VwcztcbiAgfVxuXG4gIHJldHVybiBmaWx0ZXJzT2JqO1xufVxuXG5mdW5jdGlvbiBidWlsZFRvcFhkYXRhUXVlcnkob3B0aW9ucykge1xuICBjb25zdCB1bml0RGVmID0gXy5maW5kKHVuaXRMaXN0LCB7IHZhbHVlOiBvcHRpb25zLnVuaXQgfSk7XG4gIGNvbnN0IHN0YXJ0aW5nVGltZSA9IG9wdGlvbnMucmFuZ2UuZnJvbS51dGMoKS5mb3JtYXQoS0VOVElLX1RJTUVfRk9STUFUKTtcbiAgY29uc3QgZW5kaW5nVGltZSA9IG9wdGlvbnMucmFuZ2UudG8udXRjKCkuZm9ybWF0KEtFTlRJS19USU1FX0ZPUk1BVCk7XG5cbiAgY29uc3QgcXVlcnkgPSB7XG4gICAgZGltZW5zaW9uOiBbb3B0aW9ucy5tZXRyaWNdLFxuICAgIG1ldHJpYzogb3B0aW9ucy51bml0LFxuICAgIG1hdHJpeEJ5OiBbXSxcbiAgICBjaWRyOiAzMixcbiAgICBjaWRyNjogMTI4LFxuICAgIHRvcHg6ICc4JywgLy8gVmlzdWFsaXphdGlvbiBkZXB0aCAoOCBieSBkZWZhdWx0KVxuICAgIGRlcHRoOiAxMDAsXG4gICAgZmFzdERhdGE6ICdBdXRvJyxcbiAgICBsb29rYmFja19zZWNvbmRzOiAwLFxuICAgIHRpbWVfZm9ybWF0OiAnVVRDJyxcbiAgICBzdGFydGluZ190aW1lOiBzdGFydGluZ1RpbWUsXG4gICAgZW5kaW5nX3RpbWU6IGVuZGluZ1RpbWUsXG4gICAgZGV2aWNlX25hbWU6IG9wdGlvbnMuZGV2aWNlTmFtZXMsXG4gICAgb3V0c29ydDogdW5pdERlZi5vdXRzb3J0LFxuICAgIGFnZ3JlZ2F0ZXM6IGZvcm1hdEFnZ3ModW5pdERlZiksXG4gICAgZmlsdGVyc19vYmo6IGZvcm1hdEZpbHRlcnMob3B0aW9ucy5rZW50aWtGaWx0ZXJHcm91cHMpLFxuICAgIHNhdmVkX2ZpbHRlcnM6IG9wdGlvbnMua2VudGlrU2F2ZWRGaWx0ZXJzLFxuICB9O1xuXG4gIHJldHVybiBxdWVyeTtcbn1cblxuZnVuY3Rpb24gY29udmVydFRvS2VudGlrRmlsdGVyKGZpbHRlck9iajogYW55LCBmaWx0ZXJEZWY6IGFueSkge1xuICAvLyBVc2UgS2VudGlrICdub3QgZXF1YWwnIHN0eWxlXG4gIGlmIChmaWx0ZXJPYmoub3BlcmF0b3IgPT09ICchPScpIHtcbiAgICBmaWx0ZXJPYmoub3BlcmF0b3IgPSAnPD4nO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBmaWx0ZXJGaWVsZDogZmlsdGVyRGVmLmZpZWxkLFxuICAgIG9wZXJhdG9yOiBmaWx0ZXJPYmoub3BlcmF0b3IsXG4gICAgZmlsdGVyVmFsdWU6IGZpbHRlck9iai52YWx1ZSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gY29udmVydFRvS2VudGlrU2F2ZWRGaWx0ZXIoZmlsdGVyT2JqOiBhbnksIGZpbHRlckRlZjogYW55KSB7XG4gIHJldHVybiB7XG4gICAgZmlsdGVyX2lkOiBmaWx0ZXJEZWYuaWQsXG4gICAgaXNfbm90OiBmaWx0ZXJPYmoudmFsdWUgPT09ICdleGNsdWRlJ1xuICB9O1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0VG9LZW50aWtGaWx0ZXJHcm91cChmaWx0ZXJzOiBBcnJheTxhbnk+LCBjdXN0b21EaW1lbnNpb25zOiBBcnJheTxhbnk+LCBzYXZlZEZpbHRlcnNMaXN0OiBBcnJheTxhbnk+KSB7XG4gIGxldCBrZW50aWtGaWx0ZXJzID0gW107XG4gIGxldCBzYXZlZEZpbHRlcnMgPSBbXTtcblxuICBpZiAoZmlsdGVycy5sZW5ndGgpIHtcbiAgICBjb25zdCBmaWx0ZXJGaWVsZExpc3RFeHRlbmRlZCA9IF8uY29uY2F0KGZpbHRlckZpZWxkTGlzdCwgY3VzdG9tRGltZW5zaW9ucyk7XG4gICAgZm9yIChsZXQgZmlsdGVyIG9mIGZpbHRlcnMpIHtcbiAgICAgIGNvbnN0IGZpbHRlckZpZWxkRGVmID0gXy5maW5kKGZpbHRlckZpZWxkTGlzdEV4dGVuZGVkLCB7IHRleHQ6IGZpbHRlci5rZXkgfSk7XG4gICAgICBpZiAoZmlsdGVyRmllbGREZWYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBzYXZlZEZpbHRlckRlZiA9IF8uZmluZChzYXZlZEZpbHRlcnNMaXN0LCB7IHRleHQ6IGZpbHRlci5rZXkgfSk7XG4gICAgICAgIHNhdmVkRmlsdGVycy5wdXNoKGNvbnZlcnRUb0tlbnRpa1NhdmVkRmlsdGVyKGZpbHRlciwgc2F2ZWRGaWx0ZXJEZWYpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGtlbnRpa0ZpbHRlcnMucHVzaChjb252ZXJ0VG9LZW50aWtGaWx0ZXIoZmlsdGVyLCBmaWx0ZXJGaWVsZERlZikpO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgaWYgKGtlbnRpa0ZpbHRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IGNvbm5lY3RvciA9ICdBbGwnO1xuICAgICAgaWYgKFxuICAgICAgICBmaWx0ZXJzWzBdLmNvbmRpdGlvbiAmJlxuICAgICAgICAoZmlsdGVyc1swXS5jb25kaXRpb24udG9Mb3dlckNhc2UoKSA9PT0gJ29yJyB8fCBmaWx0ZXJzWzBdLmNvbmRpdGlvbi50b0xvd2VyQ2FzZSgpID09PSAnYW55JylcbiAgICAgICkge1xuICAgICAgICBjb25uZWN0b3IgPSAnQW55JztcbiAgICAgIH1cblxuICAgICAga2VudGlrRmlsdGVycyA9IFt7XG4gICAgICAgIGNvbm5lY3RvcixcbiAgICAgICAgZmlsdGVyczoga2VudGlrRmlsdGVycyxcbiAgICAgICAgbm90OiBmYWxzZSxcbiAgICAgIH1dO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAga2VudGlrRmlsdGVycyxcbiAgICBzYXZlZEZpbHRlcnMsXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgYnVpbGRUb3BYZGF0YVF1ZXJ5LFxuICBmb3JtYXRBZ2dzLFxuICBjb252ZXJ0VG9LZW50aWtGaWx0ZXJHcm91cCxcbn07XG4iLCJpbXBvcnQgeyBtZXRyaWNMaXN0LCB1bml0TGlzdCwgZmlsdGVyRmllbGRMaXN0IH0gZnJvbSAnLi9tZXRyaWNfZGVmJztcbmltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCAnLi9rZW50aWtQcm94eSc7XG5pbXBvcnQgVGFibGVNb2RlbCBmcm9tICdncmFmYW5hL2FwcC9jb3JlL3RhYmxlX21vZGVsJztcbmltcG9ydCBxdWVyeUJ1aWxkZXIgZnJvbSAnLi9xdWVyeV9idWlsZGVyJztcblxuY2xhc3MgS2VudGlrRGF0YXNvdXJjZSB7XG4gIG5hbWU6IHN0cmluZztcbiAga2VudGlrOiBhbnk7XG5cbiAgLyoqIEBuZ0luamVjdCAqL1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgaW5zdGFuY2VTZXR0aW5nczogYW55LCBwdWJsaWMgdGVtcGxhdGVTcnY6IGFueSwga2VudGlrUHJveHlTcnY6IGFueSkge1xuICAgIHRoaXMubmFtZSA9IGluc3RhbmNlU2V0dGluZ3MubmFtZTtcbiAgICB0aGlzLmtlbnRpayA9IGtlbnRpa1Byb3h5U3J2O1xuICB9XG5cbiAgaW50ZXJwb2xhdGVEZXZpY2VGaWVsZCh2YWx1ZTogYW55LCB2YXJpYWJsZTogYW55KSB7XG4gICAgLy8gaWYgbm8gbXVsdGkgb3IgaW5jbHVkZSBhbGwgZG8gbm90IHJlZ2V4RXNjYXBlXG4gICAgaWYgKCF2YXJpYWJsZS5tdWx0aSAmJiAhdmFyaWFibGUuaW5jbHVkZUFsbCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlLmpvaW4oJywnKTtcbiAgfVxuXG4gIGFzeW5jIHF1ZXJ5KG9wdGlvbnM6IGFueSkge1xuICAgIGlmICghb3B0aW9ucy50YXJnZXRzIHx8IG9wdGlvbnMudGFyZ2V0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoeyBkYXRhOiBbXSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldHNbMF07XG4gICAgY29uc3QgZGV2aWNlTmFtZXMgPSB0aGlzLnRlbXBsYXRlU3J2LnJlcGxhY2UoXG4gICAgICB0YXJnZXQuZGV2aWNlLFxuICAgICAgb3B0aW9ucy5zY29wZWRWYXJzLFxuICAgICAgdGhpcy5pbnRlcnBvbGF0ZURldmljZUZpZWxkLmJpbmQodGhpcylcbiAgICApO1xuXG4gICAgbGV0IGtlbnRpa0ZpbHRlcnMgPSB0aGlzLnRlbXBsYXRlU3J2LmdldEFkaG9jRmlsdGVycyh0aGlzLm5hbWUpO1xuICAgIGNvbnN0IGN1c3RvbURpbWVuc2lvbnMgPSBhd2FpdCB0aGlzLmtlbnRpay5nZXRDdXN0b21EaW1lbnNpb25zKCk7XG4gICAgY29uc3Qgc2F2ZWRGaWx0ZXJzTGlzdCA9IGF3YWl0IHRoaXMua2VudGlrLmdldFNhdmVkRmlsdGVycygpO1xuICAgIGNvbnN0IGtlbnRpa0ZpbHRlckdyb3VwcyA9IHF1ZXJ5QnVpbGRlci5jb252ZXJ0VG9LZW50aWtGaWx0ZXJHcm91cChrZW50aWtGaWx0ZXJzLCBjdXN0b21EaW1lbnNpb25zLCBzYXZlZEZpbHRlcnNMaXN0KTtcblxuICAgIGNvbnN0IHF1ZXJ5T3B0aW9ucyA9IHtcbiAgICAgIGRldmljZU5hbWVzOiBkZXZpY2VOYW1lcyxcbiAgICAgIHJhbmdlOiB7XG4gICAgICAgIGZyb206IG9wdGlvbnMucmFuZ2UuZnJvbSxcbiAgICAgICAgdG86IG9wdGlvbnMucmFuZ2UudG8sXG4gICAgICB9LFxuICAgICAgbWV0cmljOiB0aGlzLnRlbXBsYXRlU3J2LnJlcGxhY2UodGFyZ2V0Lm1ldHJpYyksXG4gICAgICB1bml0OiB0aGlzLnRlbXBsYXRlU3J2LnJlcGxhY2UodGFyZ2V0LnVuaXQpLFxuICAgICAga2VudGlrRmlsdGVyR3JvdXBzOiBrZW50aWtGaWx0ZXJHcm91cHMua2VudGlrRmlsdGVycyxcbiAgICAgIGtlbnRpa1NhdmVkRmlsdGVyczoga2VudGlrRmlsdGVyR3JvdXBzLnNhdmVkRmlsdGVycyxcbiAgICB9O1xuICAgIGNvbnN0IHF1ZXJ5ID0gcXVlcnlCdWlsZGVyLmJ1aWxkVG9wWGRhdGFRdWVyeShxdWVyeU9wdGlvbnMpO1xuXG4gICAgcmV0dXJuIHRoaXMua2VudGlrXG4gICAgICAuaW52b2tlVG9wWERhdGFRdWVyeShxdWVyeSlcbiAgICAgIC50aGVuKHRoaXMucHJvY2Vzc1Jlc3BvbnNlLmJpbmQodGhpcywgcXVlcnksIHRhcmdldC5tb2RlLCBvcHRpb25zKSlcbiAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gIH1cblxuICBhc3luYyBwcm9jZXNzUmVzcG9uc2UocXVlcnk6IGFueSwgbW9kZTogc3RyaW5nLCBvcHRpb25zOiBhbnksIGRhdGE6IGFueSkge1xuICAgIGlmICghZGF0YS5yZXN1bHRzKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBtZXNzYWdlOiAnbm8ga2VudGlrIGRhdGEnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1Y2tldERhdGEgPSBkYXRhLnJlc3VsdHNbMF0uZGF0YTtcbiAgICBpZiAoYnVja2V0RGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBleHRlbmRlZE1ldHJpY0xpc3QgPSBhd2FpdCB0aGlzLl9nZXRFeHRlbmRlZERpbWVuc2lvbnNMaXN0KG1ldHJpY0xpc3QpO1xuICAgIGNvbnN0IG1ldHJpY0RlZiA9IF8uZmluZChcbiAgICAgIGV4dGVuZGVkTWV0cmljTGlzdCxcbiAgICAgIHsgdmFsdWU6IHF1ZXJ5LmRpbWVuc2lvblswXSB9XG4gICAgKTtcblxuICAgIGNvbnN0IHVuaXREZWYgPSBfLmZpbmQodW5pdExpc3QsIHsgdmFsdWU6IHF1ZXJ5Lm1ldHJpYyB9KTtcblxuICAgIGlmIChtb2RlID09PSAndGFibGUnKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9jZXNzVGFibGVEYXRhKGJ1Y2tldERhdGEsIG1ldHJpY0RlZiwgdW5pdERlZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NUaW1lU2VyaWVzKGJ1Y2tldERhdGEsIHF1ZXJ5LCBvcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICBwcm9jZXNzVGltZVNlcmllcyhidWNrZXREYXRhOiBhbnksIHF1ZXJ5OiBhbnksIG9wdGlvbnM/OiBhbnkpIHtcbiAgICBjb25zdCBzZXJpZXNMaXN0ID0gW107XG4gICAgbGV0IGVuZEluZGV4ID0gcXVlcnkudG9weDtcbiAgICBpZiAoYnVja2V0RGF0YS5sZW5ndGggPCBlbmRJbmRleCkge1xuICAgICAgZW5kSW5kZXggPSBidWNrZXREYXRhLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVuZEluZGV4OyBpKyspIHtcbiAgICAgIGNvbnN0IHNlcmllcyA9IGJ1Y2tldERhdGFbaV07XG4gICAgICBjb25zdCB0aW1lc2VyaWVzID0gXy5maW5kKHNlcmllcy50aW1lU2VyaWVzLCBzZXJpZXMgPT4ge1xuICAgICAgICByZXR1cm4gc2VyaWVzLmZsb3cgJiYgc2VyaWVzLmZsb3cubGVuZ3RoO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBzZXJpZXNOYW1lID0gc2VyaWVzLmtleTtcblxuICAgICAgaWYgKHRpbWVzZXJpZXMpIHtcbiAgICAgICAgY29uc3QgZ3JhZmFuYVNlcmllcyA9IHtcbiAgICAgICAgICB0YXJnZXQ6IHNlcmllc05hbWUsXG4gICAgICAgICAgZGF0YXBvaW50czogXy5tYXAodGltZXNlcmllcy5mbG93LCBwb2ludCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gW3BvaW50WzFdLCBwb2ludFswXV07XG4gICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgICAgIHNlcmllc0xpc3QucHVzaChncmFmYW5hU2VyaWVzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VyaWVzTGlzdDtcbiAgfVxuXG4gIHByb2Nlc3NUYWJsZURhdGEoYnVja2V0RGF0YTogYW55LCBtZXRyaWNEZWY6IGFueSwgdW5pdERlZjogYW55KSB7XG4gICAgY29uc3QgdGFibGUgPSBuZXcgVGFibGVNb2RlbCgpO1xuXG4gICAgdGFibGUuY29sdW1ucy5wdXNoKHsgdGV4dDogbWV0cmljRGVmLnRleHQgfSk7XG5cbiAgICBmb3IgKGNvbnN0IGNvbCBvZiB1bml0RGVmLnRhYmxlRmllbGRzKSB7XG4gICAgICB0YWJsZS5jb2x1bW5zLnB1c2goeyB0ZXh0OiBjb2wudGV4dCwgdW5pdDogY29sLnVuaXQgfSk7XG4gICAgfVxuXG4gICAgXy5mb3JFYWNoKGJ1Y2tldERhdGEsIHJvdyA9PiB7XG4gICAgICBjb25zdCBzZXJpZXNOYW1lID0gcm93LmtleTtcblxuICAgICAgY29uc3QgdmFsdWVzID0gW3Nlcmllc05hbWVdO1xuICAgICAgZm9yIChjb25zdCBjb2wgb2YgdW5pdERlZi50YWJsZUZpZWxkcykge1xuICAgICAgICBsZXQgdmFsID0gcm93W2NvbC5maWVsZF07XG5cbiAgICAgICAgaWYgKF8uaXNTdHJpbmcodmFsKSkge1xuICAgICAgICAgIHZhbCA9IHBhcnNlRmxvYXQodmFsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhbHVlcy5wdXNoKHZhbCk7XG4gICAgICB9XG5cbiAgICAgIHRhYmxlLnJvd3MucHVzaCh2YWx1ZXMpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIFt0YWJsZV07XG4gIH1cblxuICBhc3luYyBtZXRyaWNGaW5kUXVlcnkocXVlcnk6IGFueSkge1xuICAgIGlmIChxdWVyeSA9PT0gJ21ldHJpY3MoKScpIHtcbiAgICAgIHJldHVybiB0aGlzLl9nZXRFeHRlbmRlZERpbWVuc2lvbnNMaXN0KG1ldHJpY0xpc3QpO1xuICAgIH1cbiAgICBpZiAocXVlcnkgPT09ICd1bml0cygpJykge1xuICAgICAgcmV0dXJuIHVuaXRMaXN0O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmtlbnRpay5nZXREZXZpY2VzKCkudGhlbihkZXZpY2VzID0+IHtcbiAgICAgIHJldHVybiBkZXZpY2VzLm1hcChkZXZpY2UgPT4ge1xuICAgICAgICByZXR1cm4geyB0ZXh0OiBkZXZpY2UuZGV2aWNlX25hbWUsIHZhbHVlOiBkZXZpY2UuZGV2aWNlX25hbWUgfTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0VGFnS2V5cygpIHtcbiAgICBsZXQgaW5pdGlhbExpc3QgPSBhd2FpdCB0aGlzLl9nZXRFeHRlbmRlZERpbWVuc2lvbnNMaXN0KGZpbHRlckZpZWxkTGlzdCk7XG4gICAgY29uc3Qgc2F2ZWRGaWx0ZXJzID0gYXdhaXQgdGhpcy5rZW50aWsuZ2V0U2F2ZWRGaWx0ZXJzKCk7XG4gICAgcmV0dXJuIF8uY29uY2F0KGluaXRpYWxMaXN0LCBzYXZlZEZpbHRlcnMpO1xuICB9XG5cbiAgYXN5bmMgZ2V0VGFnVmFsdWVzKG9wdGlvbnM6IGFueSkge1xuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICBsZXQgZmlsdGVyID0gXy5maW5kKGZpbHRlckZpZWxkTGlzdCwgeyB0ZXh0OiBvcHRpb25zLmtleSB9KTtcblxuICAgICAgaWYgKGZpbHRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHNhdmVkRmlsdGVycyA9IGF3YWl0IHRoaXMua2VudGlrLmdldFNhdmVkRmlsdGVycygpO1xuICAgICAgICBmaWx0ZXIgPSBfLmZpbmQoc2F2ZWRGaWx0ZXJzLCB7IHRleHQ6IG9wdGlvbnMua2V5IH0pO1xuICAgICAgICBpZiAoZmlsdGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb25zdCBjdXN0b21EaW1lbnNpb25zID0gYXdhaXQgdGhpcy5rZW50aWsuZ2V0Q3VzdG9tRGltZW5zaW9ucygpO1xuICAgICAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IF8uZmluZChjdXN0b21EaW1lbnNpb25zLCB7IHRleHQ6IG9wdGlvbnMua2V5IH0pO1xuICAgICAgICAgIHJldHVybiBkaW1lbnNpb24udmFsdWVzLm1hcCh2YWx1ZSA9PiAoeyB0ZXh0OiB2YWx1ZSB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFt7IHRleHQ6ICdpbmNsdWRlJyB9LCB7IHRleHQ6ICdleGNsdWRlJyB9XTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZmllbGQgPSBmaWx0ZXIuZmllbGQ7XG4gICAgICAgIHJldHVybiB0aGlzLmtlbnRpay5nZXRGaWVsZFZhbHVlcyhmaWVsZCkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgIHJldHVybiByZXN1bHQucm93cy5tYXAocm93ID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IHRleHQ6IHJvd1tmaWVsZF0udG9TdHJpbmcoKSB9O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX2dldEV4dGVuZGVkRGltZW5zaW9uc0xpc3QobGlzdDogQXJyYXk8YW55Pikge1xuICAgIGNvbnN0IGN1c3RvbURpbWVuc2lvbnMgPSBhd2FpdCB0aGlzLmtlbnRpay5nZXRDdXN0b21EaW1lbnNpb25zKCk7XG4gICAgcmV0dXJuIF8uY29uY2F0KGxpc3QsIGN1c3RvbURpbWVuc2lvbnMpO1xuICB9XG59XG5cbmV4cG9ydCB7IEtlbnRpa0RhdGFzb3VyY2UgfTtcbiIsImV4cG9ydCBjbGFzcyBDb25maWdDdHJsIHtcbiAgc3RhdGljIHRlbXBsYXRlVXJsID0gJ2RhdGFzb3VyY2UvY29uZmlnLmh0bWwnO1xufVxuIiwiaW1wb3J0IHsgUXVlcnlDdHJsIH0gZnJvbSAnZ3JhZmFuYS9hcHAvcGx1Z2lucy9zZGsnO1xuXG5jbGFzcyBLZW50aWtRdWVyeUN0cmwgZXh0ZW5kcyBRdWVyeUN0cmwge1xuICBzdGF0aWMgdGVtcGxhdGVVcmw6IHN0cmluZztcbiAgcXVlcnlNb2RlczogYW55W107XG5cbiAgLyoqIEBuZ0luamVjdCAqL1xuICBjb25zdHJ1Y3Rvcigkc2NvcGUsICRpbmplY3Rvcikge1xuICAgIHN1cGVyKCRzY29wZSwgJGluamVjdG9yKTtcblxuICAgIHRoaXMudGFyZ2V0Lm1vZGUgPSB0aGlzLnRhcmdldC5tb2RlIHx8ICdncmFwaCc7XG5cbiAgICB0aGlzLnF1ZXJ5TW9kZXMgPSBbeyB2YWx1ZTogJ2dyYXBoJywgdGV4dDogJ0dyYXBoJyB9LCB7IHZhbHVlOiAndGFibGUnLCB0ZXh0OiAnVGFibGUnIH1dO1xuICB9XG59XG5cbktlbnRpa1F1ZXJ5Q3RybC50ZW1wbGF0ZVVybCA9ICdkYXRhc291cmNlL3F1ZXJ5X2VkaXRvci5odG1sJztcblxuZXhwb3J0IHsgS2VudGlrUXVlcnlDdHJsIH07XG4iLCJpbXBvcnQge0tlbnRpa0RhdGFzb3VyY2V9IGZyb20gJy4vZGF0YXNvdXJjZSc7XG5pbXBvcnQge0NvbmZpZ0N0cmx9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7S2VudGlrUXVlcnlDdHJsfSBmcm9tICcuL3F1ZXJ5X2VkaXRvcic7XG5cbmV4cG9ydCB7XG4gIEtlbnRpa0RhdGFzb3VyY2UgYXMgRGF0YXNvdXJjZSxcbiAgQ29uZmlnQ3RybCBhcyBDb25maWdDdHJsLFxuICBLZW50aWtRdWVyeUN0cmwgYXMgUXVlcnlDdHJsXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==