define(["lodash","angular","app/plugins/sdk","moment","app/core/table_model"],function(e,t,n,i,r){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function i(e){var t="default";for(var n in e)if("kentik-ds"===e[n].type)return t=e[n].jsonData.region;return t}n.d(t,"a",function(){return i})},function(e,n){e.exports=t},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(2),r=n.n(i),o=n(1),s=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},a=function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},u=function(){function e(e){var t=this;this.backendSrv=e,this.apiReady=!1,this.baseUrl="/api/plugin-proxy/kentik-app",e.get("/api/datasources").then(function(e){t.region=Object(o.a)(e),t.setRegion(t.region),t.apiReady=!0})}return e.$inject=["backendSrv"],e.prototype.setRegion=function(e){this.region=e},e.prototype.getDevices=function(){return s(this,void 0,void 0,function(){var e,t=this;return a(this,function(n){switch(n.label){case 0:return this.backendSrv.get("/api/datasources").then(function(e){t.region=Object(o.a)(e),t.setRegion(t.region),t.apiReady=!0}),[4,this._get("/api/v5/devices")];case 1:return(e=n.sent()).data&&e.data.devices?[2,e.data.devices]:[2,[]]}})})},e.prototype.getUsers=function(){return this._get("/api/v5/users")},e.prototype.getFieldValues=function(e){var t="SELECT DISTINCT "+e+" FROM all_devices ORDER BY "+e+" ASC";return this.invokeSQLQuery(t)},e.prototype.getCustomDimensions=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._get("/api/v5/customdimensions")];case 1:return[2,e.sent().data.customDimensions]}})})},e.prototype.getSavedFilters=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._get("/api/v5/saved-filters")];case 1:return[2,e.sent().data]}})})},e.prototype.invokeTopXDataQuery=function(e){var t={queries:[{query:e,bucketIndex:0}]};return this._post("/api/v5/query/topXdata",t)},e.prototype.invokeSQLQuery=function(e){var t={query:e};return this._post("/api/v5/query/sql",t)},e.prototype._get=function(e){return s(this,void 0,void 0,function(){var t=this;return a(this,function(n){switch(n.label){case 0:return void 0!==this.region?[3,2]:[4,this.backendSrv.get("/api/datasources").then(function(e){t.setRegion(Object(o.a)(e))})];case 1:n.sent(),n.label=2;case 2:return[2,this.backendSrv.datasourceRequest({method:"GET",url:this.baseUrl+"/"+this.region+e}).catch(function(e){return console.error(e),e.err?Promise.reject(e.err):Promise.reject(e)})]}})})},e.prototype._post=function(e,t){return s(this,void 0,void 0,function(){var n=this;return a(this,function(i){switch(i.label){case 0:return void 0!==this.region?[3,2]:[4,this.backendSrv.get("/api/datasources").then(function(e){n.setRegion(Object(o.a)(e))})];case 1:i.sent(),i.label=2;case 2:return[2,this.backendSrv.datasourceRequest({method:"POST",url:this.baseUrl+"/"+this.region+e,data:t}).then(function(e){return e.data?e.data:[]}).catch(function(e){return console.error(e),e.err?Promise.reject(e.err):Promise.reject(e)})]}})})},e}();r.a.module("grafana.services").service("kentikAPISrv",u)},,function(e,t){e.exports=n},,,,,,function(e,t){e.exports=i},function(e,t){e.exports=r},,,,function(e,t,n){"use strict";n.r(t);var i=[{text:"Traffic",value:"Traffic",field:"traffic"},{text:"TopFlow",value:"TopFlow",field:"TopFlow"},{text:"Top flow IP",value:"TopFlowsIP",field:"TopFlowsIP"},{text:"Source Country",value:"Geography_src",field:"src_geo"},{text:"Source Geo Region",value:"src_geo_region",field:"src_geo_region"},{text:"Source Geo City",value:"src_geo_city",field:"src_geo_city"},{text:"Source As Number",value:"AS_src",field:"src_as"},{text:"Source Interface",value:"InterfaceID_src",field:"input_port"},{text:"Source Port",value:"Port_src",field:"l4_src_port"},{text:"Source VLAN",value:"VLAN_src",field:"vlan_in"},{text:"Source IP/CIDR",value:"IP_src",field:"ipv4_src_addr"},{text:"Source MAC Address",value:"src_eth_mac",field:"src_eth_mac"},{text:"Source Route Prefix/LEN",value:"src_route_prefix_len",field:"src_route_prefix_len"},{text:"Source Route LEN",value:"src_route_length",field:"src_route_length"},{text:"Source BGP Community",value:"src_bgp_community",field:"src_bgp_community"},{text:"Source BGP AS_Path",value:"src_bgp_aspath",field:"src_bgp_aspath"},{text:"Source BGP Next Hop IP/CIDR",value:"src_nexthop_ip",field:"ipv4_src_next_hop"},{text:"Source Next Hop AS Number",value:"src_nexthop_asn",field:"src_nexthop_as"},{text:"Source 2nd BGP_HOP AS Number",value:"src_second_asn",field:"src_second_asn"},{text:"Source 3nd BGP_HOP AS Number",value:"src_third_asn",field:"src_third_asn"},{text:"Source Protocol:IP Port",value:"src_proto_port",field:"src_proto_port"},{text:"Destination Country",value:"Geography_dst",field:"dst_geo"},{text:"Destination Region",value:"dst_geo_region",field:"dst_geo_region"},{text:"Destination City",value:"dst_geo_city",field:"dst_geo_city"},{text:"Destination As Number",value:"AS_dst",field:"dst_as"},{text:"Destination Interface",value:"InterfaceID_dst",field:"output_port"},{text:"Destination Port",value:"Port_dst",field:"l4_dst_port"},{text:"Destination VLAN",value:"VLAN_dst",field:"vlan_out"},{text:"Destination IP/CIDR",value:"IP_dst",field:"ipv4_dst_addr"},{text:"Destination MAC Address",value:"dst_eth_mac",field:"dst_eth_mac"},{text:"Destination Route Prefix/LEN",value:"dst_route_prefix_len",field:"dst_route_prefix_len"},{text:"Destination Route LEN",value:"dst_route_length",field:"dst_route_length"},{text:"Destination BGP Community",value:"dst_bgp_community",field:"dst_bgp_community"},{text:"Destination BGP AS_Path",value:"dst_bgp_aspath",field:"dst_bgp_aspath"},{text:"Destination BGP Next Hop IP/CIDR",value:"dst_nexthop_ip",field:"ipv4_dst_next_hop"},{text:"Destination Next Hop AS Number",value:"dst_nexthop_asn",field:"dst_nexthop_as"},{text:"Destination 2nd BGP_HOP AS Number",value:"dst_second_asn",field:"dst_second_asn"},{text:"Destination 3nd BGP_HOP AS Number",value:"dst_third_asn",field:"dst_third_asn"},{text:"Destination Protocol:IP Port",value:"dst_proto_port",field:"dst_proto_port"},{text:"Full Device",value:"i_device_id",field:"i_device_id"},{text:"Full Site",value:"i_device_site_name",field:"i_device_site_name"},{text:"Full Protocol",value:"Proto",field:"protocl"},{text:"Full INET Family",value:"inet_family",field:"inet_family"},{text:"Full TOS",value:"TOS",field:"tos"},{text:"Full TCP flags",value:"tcp_flags",field:"tcp_flags"},{text:"AS Top Talkers",value:"ASTopTalkers",field:"ASTopTalkers"},{text:"Interface Top Talkers",value:"InterfaceTopTalkers",field:"InterfaceTopTalkers"},{text:"Port to Port Talkers",value:"PortPortTalkers",field:"PortPortTalkers"},{text:"Region Top Talkers",value:"RegionTopTalkers",field:"RegionTopTalkers"}];var r=[{text:"Bits/s",value:"bytes",field:"f_sum_both_bytes",outsort:"avg_both",gfUnit:"bps",gfAxisLabel:"Bits/s",transform:function(e,t){return 8*e/t.i_duration},tableFields:[{text:"Avg",field:"avg_both",unit:"bps",transform:function(e,t,n){return 8*e/n}},{text:"95th Percentile",field:"p95th_both",unit:"bps"},{text:"Max",field:"max_both",unit:"bps"}]},{text:"Packets/s",value:"packets",field:"f_sum_both_pkts",outsort:"avg_both",gfUnit:"pps",gfAxislabel:"Packets/s",transform:function(e,t){return e/t.i_duration},tableFields:[{text:"Avg",field:"avg_both",unit:"pps",transform:function(e,t,n){return e/n}},{text:"95th Percentile",field:"p95th_both",unit:"pps"},{text:"Max",field:"max_both",unit:"pps"}]},{text:"Unique Src IPs",value:"unique_src_ip",field:"f_hll(inet_src_addr,0.0001)",outsort:"avg_ips",gfUnit:"short",gfAxisLabel:"Unique Src IPs",tableFields:[{text:"Average",field:"avg_ips",unit:"none"},{text:"p95th",field:"p95th_ips",unit:"none"},{text:"Max",field:"max_ips",unit:"none"},{text:"p95th mbps",field:"p95th_bits_per_sec",unit:"bps"},{text:"p95th pps",field:"p95th_pkts_per_sec",unit:"pps"}]},{text:"Unique Dst IPs",value:"unique_dst_ip",field:"f_hll(inet_dst_addr,0.0001)",outsort:"avg_ips",gfUnit:"short",gfAxisLabel:"Unique Dst IPs",tableFields:[{text:"Average",field:"avg_ips",unit:"none"},{text:"p95th",field:"p95th_ips",unit:"none"},{text:"Max",field:"max_ips",unit:"none"},{text:"p95th mbps",field:"p95th_bits_per_sec",unit:"bps"},{text:"p95th pps",field:"p95th_pkts_per_sec",unit:"pps"}]}],o=[{text:"Source City",field:"src_geo_city"},{text:"Source Region",field:"src_geo_region"},{text:"Source Country",field:"src_geo"},{text:"Source AS Number",field:"src_as"},{text:"Source AS Name",field:"src_as_name"},{text:"Source Flow Tag",field:"src_flow_tags"},{text:"Source IP Port",field:"l4_src_port"},{text:"Source MAC Address",field:"src_eth_mac"},{text:"Source VLAN",field:"vlan_in"},{text:"Source IP Address",field:"inet_src_addr"},{text:"Source Interface ID",field:"input_port"},{text:"Source Interface Name",field:"i_input_interface_description"},{text:"Source Interface Description",field:"i_input_snmp_alias"},{text:"Source Route Prefix",field:"ipv4_src_route_prefix"},{text:"Source Route LEN",field:"src_route_length"},{text:"Source BGP AS_PATH",field:"src_bgp_aspath"},{text:"Source BGP Community",field:"src_bgp_community"},{text:"Source Next Hop IP/CIDR",field:"ipv4_src_next_hop"},{text:"Source Next Hop AS Number",field:"src_nexthop_as"},{text:"Source Next Hop AS Name",field:"src_nexthop_as_name"},{text:"Source 2nd BGP_HOP AS Number",field:"src_second_asn"},{text:"Source 2nd BGP_HOP AS Name",field:"src_second_asn_name"},{text:"Source 3nd BGP_HOP AS Number",field:"src_third_asn"},{text:"Source 3nd BGP_HOP AS Name",field:"src_third_asn_name"},{text:"Destination City",field:"dst_geo_city"},{text:"Destination Region",field:"dst_geo_region"},{text:"Destination Country",field:"dst_geo"},{text:"Destination AS Number",field:"dst_as"},{text:"Destination AS Name",field:"dst_as_name"},{text:"Destination Flow Tag",field:"dst_flow_tags"},{text:"Destination IP Port",field:"l4_dst_port"},{text:"Destination MAC Address",field:"dst_eth_mac"},{text:"Destination VLAN",field:"vlan_out"},{text:"Destination IP Address",field:"inet_dst_addr"},{text:"Destination Interface ID",field:"output_port"},{text:"Destination Interface Name",field:"i_output_interface_description"},{text:"Destination Interface Description",field:"i_output_snmp_alias"},{text:"Destination Route Prefix",field:"ipv4_dst_route_prefix"},{text:"Destination Route LEN",field:"dst_route_length"},{text:"Destination BGP AS_PATH",field:"dst_bgp_aspath"},{text:"Destination BGP Community",field:"dst_bgp_community"},{text:"Destination Next Hop IP/CIDR",field:"ipv4_dst_next_hop"},{text:"Destination Next Hop AS Number",field:"dst_nexthop_as"},{text:"Destination Next Hop AS Name",field:"dst_nexthop_as_name"},{text:"Destination 2nd BGP_HOP AS Number",field:"dst_second_asn"},{text:"Destination 2nd BGP_HOP AS Name",field:"dst_second_asn_name"},{text:"Destination 3nd BGP_HOP AS Number",field:"dst_third_asn"},{text:"Destination 3nd BGP_HOP AS Name",field:"dst_third_asn_name"},{text:"TCP Flags",field:"tcp_flags"},{text:"TCP Flags (raw)",field:"tcp_flags_raw"},{text:"Protocol",field:"protocol"},{text:"INET Family",field:"inet_family"},{text:"Device Name",field:"i_device_name"},{text:"TCP Retransmits",field:"tcp_retransmit"},{text:"TOS/Diffserv",field:"tos"},{text:"Per-flow packets (both in and out)",field:"both_pkts"},{text:"Per-flow packets (recorded inbound)",field:"in_pkts"},{text:"Per-flow bytes (recorded inbound)",field:"in_bytes"},{text:"Per-flow packets (recorded outbound)",field:"out_pkts"},{text:"Per-flow bytes (recorded outbound)",field:"out_bytes"}],s=n(0),a=n(2),u=n.n(a),c=n(12),l=(n(4),function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})}),d=function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function f(){var e=new Date;return e.getTime()+60*e.getTimezoneOffset()*1e3}function p(e){var t=s.cloneDeep(e);return t.starting_time=null,t.ending_time=null,JSON.stringify(t)}var _=function(){function e(e,t){this.kentikAPI=t,this.cache={},this.cacheUpdateInterval=3e5,this.requestCachingIntervals={"1d":0},this.getDevices=this.kentikAPI.getDevices.bind(this.kentikAPI)}return e.$inject=["backendSrv","kentikAPISrv"],e.prototype.invokeTopXDataQuery=function(e){var t=this,n=s.cloneDeep(e),i=p(n);return this.shouldInvoke(e)?this.kentikAPI.invokeTopXDataQuery(e).then(function(e){var r=f();return t.cache[i]={timestamp:r,query:n,result:e},e}):Promise.resolve(this.cache[i].result)},e.prototype.shouldInvoke=function(e){var t=e,n=p(t),i=f(),r=Date.parse(t.starting_time),o=Date.parse(t.ending_time),s=o-r,a=this.cache[n]?Date.parse(this.cache[n].query.starting_time):null,u=this.cache[n]?Date.parse(this.cache[n].query.ending_time):null,l=u-a,d=function(e){var t=Date.parse(e.ending_time)-Date.parse(e.starting_time);return t>c.duration(1,"months")?36e5:t>c.duration(1,"day")?9e5:3e5}(t);return!this.cache[n]||i-o>d||this.cache[n]&&(i-u>d||r<a||Math.abs(s-l)>6e4)},e.prototype.getFieldValues=function(e){var t=this,n=f();return this.cache[e]&&n-this.cache[e].ts<this.cacheUpdateInterval?Promise.resolve(this.cache[e].value):this.kentikAPI.getFieldValues(e).then(function(i){return n=f(),t.cache[e]={ts:n,value:i},i})},e.prototype.getCustomDimensions=function(){return l(this,void 0,void 0,function(){var e,t=this;return d(this,function(n){switch(n.label){case 0:return void 0!==this.cache.customDimensions?[3,2]:[4,this.kentikAPI.getCustomDimensions()];case 1:e=n.sent(),this.cache.customDimensions=e.map(function(e){return{values:t._getDimensionPopulatorsValues(e),text:"Custom "+e.display_name,value:e.name,field:e.name}}),n.label=2;case 2:return[2,this.cache.customDimensions]}})})},e.prototype.getSavedFilters=function(){return l(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return void 0!==this.cache.savedFilters?[3,2]:[4,this.kentikAPI.getSavedFilters()];case 1:e=t.sent(),this.cache.savedFilters=s.map(e,function(e){return{text:"Saved "+e.filter_name,field:e.filter_name,id:e.id}}),t.label=2;case 2:return[2,this.cache.savedFilters]}})})},e.prototype._getDimensionPopulatorsValues=function(e){return e.populators.reduce(function(e,t){return e.push(t.value),e},[])},e}();u.a.module("grafana.services").service("kentikProxySrv",_);var h=n(13),v=n.n(h),m="YYYY-MM-DD HH:mm:ss";function x(e){return"unique_src_ip"===e.value||"unique_dst_ip"===e.value?function(e){return[{name:"avg_ips",column:e.field,fn:"average",raw:!0,sample_rate:1},{name:"p95th_ips",column:e.field,fn:"percentile",rank:95,sample_rate:1},{name:"max_ips",column:e.field,fn:"max",sample_rate:1,raw:!0},{name:"p95th_bits_per_sec",column:"f_sum_both_bytes",fn:"percentile",rank:95,sample_rate:1},{name:"p95th_pkts_per_sec",column:"f_sum_both_pkts",fn:"percentile",rank:95,sample_rate:1}]}(e):function(e){return[{name:"avg_both",column:e.field,fn:"average",raw:!0,sample_rate:1},{name:"p95th_both",column:e.field,fn:"percentile",rank:95,sample_rate:1},{name:"max_both",column:e.field,fn:"max",sample_rate:1}]}(e)}function g(e,t){return"!="===e.operator&&(e.operator="<>"),{filterField:t.field,operator:e.operator,filterValue:e.value}}var b,y={buildTopXdataQuery:function(e){var t,n,i=s.find(r,{value:e.unit}),o=e.range.from.utc().format(m),a=e.range.to.utc().format(m);return{dimension:[e.metric],metric:e.unit,matrixBy:[],cidr:32,cidr6:128,topx:"8",depth:100,fastData:"Auto",lookback_seconds:0,time_format:"UTC",starting_time:o,ending_time:a,device_name:e.deviceNames,outsort:i.outsort,aggregates:x(i),filters_obj:(t=e.kentikFilterGroups,n={connector:"All",filterGroups:[]},t.length&&(n.filterGroups=t),n),saved_filters:e.kentikSavedFilters}},formatAggs:x,convertToKentikFilterGroup:function(e,t,n){var i,r=[],a=[];if(e.length){for(var u=s.concat(o,t),c=0,l=e;c<l.length;c++){var d=l[c],f=s.find(u,{text:d.key});if(void 0===f){var p=s.find(n,{text:d.key});a.push((i=d,{filter_id:p.id,is_not:"exclude"===i.value}))}else r.push(g(d,f))}if(r.length>0){var _="All";!e[0].condition||"or"!==e[0].condition.toLowerCase()&&"any"!==e[0].condition.toLowerCase()||(_="Any"),r=[{connector:_,filters:r,not:!1}]}}return{kentikFilters:r,savedFilters:a}}},k=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},S=function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},P=function(){function e(e,t,n){this.instanceSettings=e,this.templateSrv=t,this.name=e.name,this.kentik=n}return e.$inject=["instanceSettings","templateSrv","kentikProxySrv"],e.prototype.interpolateDeviceField=function(e,t){return t.multi||t.includeAll?"string"==typeof e?e:e.join(","):e},e.prototype.query=function(e){return k(this,void 0,void 0,function(){var t,n,i,r,o,s,a,u;return S(this,function(c){switch(c.label){case 0:return e.targets&&0!==e.targets.length?(t=e.targets[0],n=this.templateSrv.replace(t.device,e.scopedVars,this.interpolateDeviceField.bind(this)),i=this.templateSrv.getAdhocFilters(this.name),[4,this.kentik.getCustomDimensions()]):[2,Promise.resolve({data:[]})];case 1:return r=c.sent(),[4,this.kentik.getSavedFilters()];case 2:return o=c.sent(),s=y.convertToKentikFilterGroup(i,r,o),a={deviceNames:n,range:{from:e.range.from,to:e.range.to},metric:this.templateSrv.replace(t.metric),unit:this.templateSrv.replace(t.unit),kentikFilterGroups:s.kentikFilters,kentikSavedFilters:s.savedFilters},u=y.buildTopXdataQuery(a),[2,this.kentik.invokeTopXDataQuery(u).then(this.processResponse.bind(this,u,t.mode,e)).then(function(e){return{data:e}})]}})})},e.prototype.processResponse=function(e,t,n,o){return k(this,void 0,void 0,function(){var a,u,c,l;return S(this,function(d){switch(d.label){case 0:return o.results?0===(a=o.results[0].data).length?[2,[]]:[4,this._getExtendedDimensionsList(i)]:[2,Promise.reject({message:"no kentik data"})];case 1:return u=d.sent(),c=s.find(u,{value:e.dimension[0]}),l=s.find(r,{value:e.metric}),"table"===t?[2,this.processTableData(a,c,l)]:[2,this.processTimeSeries(a,e,n)]}})})},e.prototype.processTimeSeries=function(e,t,n){var i=[],r=t.topx;e.length<r&&(r=e.length);for(var o=0;o<r;o++){var a=e[o],u=s.find(a.timeSeries,function(e){return e.flow&&e.flow.length}),c=a.key;if(u){var l={target:c,datapoints:s.map(u.flow,function(e){return[e[1],e[0]]})};i.push(l)}}return i},e.prototype.processTableData=function(e,t,n){var i=new v.a;i.columns.push({text:t.text});for(var r=0,o=n.tableFields;r<o.length;r++){var a=o[r];i.columns.push({text:a.text,unit:a.unit})}return s.forEach(e,function(e){for(var t=[e.key],r=0,o=n.tableFields;r<o.length;r++){var a=e[o[r].field];s.isString(a)&&(a=parseFloat(a)),t.push(a)}i.rows.push(t)}),[i]},e.prototype.metricFindQuery=function(e){return k(this,void 0,void 0,function(){return S(this,function(t){return"metrics()"===e?[2,this._getExtendedDimensionsList(i)]:"units()"===e?[2,r]:[2,this.kentik.getDevices().then(function(e){return e.map(function(e){return{text:e.device_name,value:e.device_name}})})]})})},e.prototype.getTagKeys=function(){return k(this,void 0,void 0,function(){var e,t;return S(this,function(n){switch(n.label){case 0:return[4,this._getExtendedDimensionsList(o)];case 1:return e=n.sent(),[4,this.kentik.getSavedFilters()];case 2:return t=n.sent(),[2,s.concat(e,t)]}})})},e.prototype.getTagValues=function(e){return k(this,void 0,void 0,function(){var t,n,i,r;return S(this,function(a){switch(a.label){case 0:return e?void 0!==(t=s.find(o,{text:e.key}))?[3,5]:[4,this.kentik.getSavedFilters()]:[3,7];case 1:return n=a.sent(),void 0!==(t=s.find(n,{text:e.key}))?[3,3]:[4,this.kentik.getCustomDimensions()];case 2:return i=a.sent(),[2,s.find(i,{text:e.key}).values.map(function(e){return{text:e}})];case 3:return[2,[{text:"include"},{text:"exclude"}]];case 4:return[3,6];case 5:return r=t.field,[2,this.kentik.getFieldValues(r).then(function(e){return e.rows.map(function(e){return{text:e[r].toString()}})})];case 6:return[3,8];case 7:return[2,[]];case 8:return[2]}})})},e.prototype._getExtendedDimensionsList=function(e){return k(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return[4,this.kentik.getCustomDimensions()];case 1:return t=n.sent(),[2,s.concat(e,t)]}})})},e}(),D=function(){function e(){}return e.templateUrl="datasource/config.html",e}(),A=n(6),w=(b=function(e,t){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),T=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.target.mode=i.target.mode||"graph",i.queryModes=[{value:"graph",text:"Graph"},{value:"table",text:"Table"}],i}return w(t,e),t.$inject=["$scope","$injector"],t}(A.QueryCtrl);T.templateUrl="datasource/query_editor.html",n.d(t,"Datasource",function(){return P}),n.d(t,"ConfigCtrl",function(){return D}),n.d(t,"QueryCtrl",function(){return T})}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibG9kYXNoXCIiLCJ3ZWJwYWNrOi8vLy4vZGF0YXNvdXJjZS9yZWdpb25IZWxwZXIudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYW5ndWxhclwiIiwid2VicGFjazovLy8uL2RhdGFzb3VyY2Uva2VudGlrQVBJLnRzIiwid2VicGFjazovLy8uL2RhdGFzb3VyY2UvbWV0cmljX2RlZi50cyIsIndlYnBhY2s6Ly8vLi9kYXRhc291cmNlL2tlbnRpa1Byb3h5LnRzIiwid2VicGFjazovLy8uL2RhdGFzb3VyY2UvcXVlcnlfYnVpbGRlci50cyIsIndlYnBhY2s6Ly8vLi9kYXRhc291cmNlL2RhdGFzb3VyY2UudHMiLCJ3ZWJwYWNrOi8vLy4vZGF0YXNvdXJjZS9jb25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vZGF0YXNvdXJjZS9xdWVyeV9lZGl0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vZGF0YXNvdXJjZS9tb2R1bGUudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX18iLCJnZXRSZWdpb24iLCJkYXRhc291cmNlcyIsImFSZWdpb24iLCJpbmRleCIsInR5cGUiLCJqc29uRGF0YSIsInJlZ2lvbiIsIl9fd2VicGFja19leHBvcnRzX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18yX18iLCJLZW50aWtBUEkiLCJiYWNrZW5kU3J2IiwiX3RoaXMiLCJ0aGlzIiwiYXBpUmVhZHkiLCJiYXNlVXJsIiwidGhlbiIsImFsbERTIiwiX3JlZ2lvbkhlbHBlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwic2V0UmVnaW9uIiwiJGluamVjdCIsInJlc3AiLCJfYSIsInNlbnQiLCJkYXRhIiwiZGV2aWNlcyIsImdldFVzZXJzIiwiX2dldCIsImdldEZpZWxkVmFsdWVzIiwiZmllbGQiLCJxdWVyeSIsImludm9rZVNRTFF1ZXJ5IiwiaW52b2tlVG9wWERhdGFRdWVyeSIsImtlbnRpa1Y1UXVlcnkiLCJxdWVyaWVzIiwiYnVja2V0SW5kZXgiLCJfcG9zdCIsImRhdGFzb3VyY2VSZXF1ZXN0IiwibWV0aG9kIiwidXJsIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJlcnIiLCJQcm9taXNlIiwicmVqZWN0IiwicmVzcG9uc2UiLCJtZXRyaWNMaXN0IiwidGV4dCIsInVuaXRMaXN0Iiwib3V0c29ydCIsImdmVW5pdCIsImdmQXhpc0xhYmVsIiwidHJhbnNmb3JtIiwicm93IiwiaV9kdXJhdGlvbiIsInVuaXQiLCJyYW5nZVNlY29uZHMiLCJnZkF4aXNsYWJlbCIsImZpbHRlckZpZWxkTGlzdCIsImdldFVUQ1RpbWVzdGFtcCIsInRzIiwiRGF0ZSIsImdldFRpbWUiLCJnZXRUaW1lem9uZU9mZnNldCIsImdldEhhc2giLCJxdWVyeU9iaiIsImV4dGVybmFsX2xvZGFzaF8iLCJzdGFydGluZ190aW1lIiwiZW5kaW5nX3RpbWUiLCJKU09OIiwic3RyaW5naWZ5Iiwia2VudGlrUHJveHlfS2VudGlrUHJveHkiLCJLZW50aWtQcm94eSIsImtlbnRpa0FQSVNydiIsImtlbnRpa0FQSSIsImNhY2hlIiwiY2FjaGVVcGRhdGVJbnRlcnZhbCIsInJlcXVlc3RDYWNoaW5nSW50ZXJ2YWxzIiwiMWQiLCJnZXREZXZpY2VzIiwiY2FjaGVkUXVlcnkiLCJoYXNoIiwic2hvdWxkSW52b2tlIiwicmVzdWx0IiwidGltZXN0YW1wIiwicmVzb2x2ZSIsImtlbnRpa1F1ZXJ5Iiwic3RhcnRpbmdUaW1lIiwicGFyc2UiLCJlbmRpbmdUaW1lIiwicXVlcnlSYW5nZSIsImNhY2hlU3RhcnRpbmdUaW1lIiwiY2FjaGVFbmRpbmdUaW1lIiwiY2FjaGVkUXVlcnlSYW5nZSIsIm1heFJlZnJlc2hJbnRlcnZhbCIsImludGVydmFsIiwiZXh0ZXJuYWxfbW9tZW50XyIsImdldE1heFJlZnJlc2hJbnRlcnZhbCIsIk1hdGgiLCJhYnMiLCJnZXRDdXN0b21EaW1lbnNpb25zIiwiY3VzdG9tRGltZW5zaW9ucyIsIm1hcCIsImRpbWVuc2lvbiIsInZhbHVlcyIsIl9nZXREaW1lbnNpb25Qb3B1bGF0b3JzVmFsdWVzIiwiZGlzcGxheV9uYW1lIiwiZ2V0U2F2ZWRGaWx0ZXJzIiwic2F2ZWRGaWx0ZXJzIiwiZmlsdGVyIiwiZmlsdGVyX25hbWUiLCJwb3B1bGF0b3JzIiwicmVkdWNlIiwicG9wdWxhdG9yIiwicHVzaCIsIktFTlRJS19USU1FX0ZPUk1BVCIsImZvcm1hdEFnZ3MiLCJ1bml0RGVmIiwiY29sdW1uIiwiZm4iLCJyYXciLCJzYW1wbGVfcmF0ZSIsInJhbmsiLCJmb3JtYXRVbmlxdWVJcEFnZ3MiLCJmb3JtYXRNZXRyaWNBZ2dzIiwiY29udmVydFRvS2VudGlrRmlsdGVyIiwiZmlsdGVyT2JqIiwiZmlsdGVyRGVmIiwib3BlcmF0b3IiLCJmaWx0ZXJGaWVsZCIsImZpbHRlclZhbHVlIiwicXVlcnlfYnVpbGRlciIsImJ1aWxkVG9wWGRhdGFRdWVyeSIsIm9wdGlvbnMiLCJrZW50aWtGaWx0ZXJHcm91cHMiLCJmaWx0ZXJzT2JqIiwicmFuZ2UiLCJmcm9tIiwidXRjIiwiZm9ybWF0IiwidG8iLCJtZXRyaWMiLCJtYXRyaXhCeSIsImNpZHIiLCJjaWRyNiIsInRvcHgiLCJkZXB0aCIsImZhc3REYXRhIiwibG9va2JhY2tfc2Vjb25kcyIsInRpbWVfZm9ybWF0IiwiZGV2aWNlX25hbWUiLCJkZXZpY2VOYW1lcyIsImFnZ3JlZ2F0ZXMiLCJmaWx0ZXJzX29iaiIsImNvbm5lY3RvciIsImZpbHRlckdyb3VwcyIsImxlbmd0aCIsInNhdmVkX2ZpbHRlcnMiLCJrZW50aWtTYXZlZEZpbHRlcnMiLCJmaWx0ZXJzIiwic2F2ZWRGaWx0ZXJzTGlzdCIsImtlbnRpa0ZpbHRlcnMiLCJmaWx0ZXJGaWVsZExpc3RFeHRlbmRlZCIsIl9pIiwiZmlsdGVyc18xIiwiZmlsdGVyRmllbGREZWYiLCJ1bmRlZmluZWQiLCJzYXZlZEZpbHRlckRlZiIsImZpbHRlcl9pZCIsImlkIiwiaXNfbm90IiwiY29uZGl0aW9uIiwidG9Mb3dlckNhc2UiLCJub3QiLCJkYXRhc291cmNlX0tlbnRpa0RhdGFzb3VyY2UiLCJLZW50aWtEYXRhc291cmNlIiwiaW5zdGFuY2VTZXR0aW5ncyIsInRlbXBsYXRlU3J2Iiwia2VudGlrUHJveHlTcnYiLCJrZW50aWsiLCJpbnRlcnBvbGF0ZURldmljZUZpZWxkIiwidmFyaWFibGUiLCJtdWx0aSIsImluY2x1ZGVBbGwiLCJ0YXJnZXRzIiwidGFyZ2V0IiwiZ2V0QWRob2NGaWx0ZXJzIiwiY29udmVydFRvS2VudGlrRmlsdGVyR3JvdXAiLCJyZXBsYWNlIiwicXVlcnlPcHRpb25zIiwicHJvY2Vzc1Jlc3BvbnNlIiwicmVzdWx0cyIsIl9nZXRFeHRlbmRlZERpbWVuc2lvbnNMaXN0IiwibWVzc2FnZSIsImV4dGVuZGVkTWV0cmljTGlzdCIsInByb2Nlc3NUYWJsZURhdGEiLCJidWNrZXREYXRhIiwibWV0cmljRGVmIiwicHJvY2Vzc1RpbWVTZXJpZXMiLCJzZXJpZXNMaXN0IiwiZW5kSW5kZXgiLCJzZXJpZXMiLCJ0aW1lc2VyaWVzIiwidGltZVNlcmllcyIsImZsb3ciLCJzZXJpZXNOYW1lIiwiZGF0YXBvaW50cyIsInBvaW50IiwiZ3JhZmFuYVNlcmllcyIsInRhYmxlIiwidGFibGVfbW9kZWxfZGVmYXVsdCIsImEiLCJjb2x1bW5zIiwidGFibGVGaWVsZHMiLCJjb2wiLCJ2YWwiLCJwYXJzZUZsb2F0Iiwicm93cyIsIm1ldHJpY0ZpbmRRdWVyeSIsImRhdGFzb3VyY2VfZ2VuZXJhdG9yIiwiZGV2aWNlIiwibGFiZWwiLCJpbml0aWFsTGlzdCIsImZpZWxkXzEiLCJDb25maWdDdHJsIiwidGVtcGxhdGVVcmwiLCJiIiwiX18iLCJLZW50aWtRdWVyeUN0cmwiLCJfc3VwZXIiLCIkc2NvcGUiLCIkaW5qZWN0b3IiLCJxdWVyeU1vZGVzIl0sIm1hcHBpbmdzIjoicUhBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQTBEQSxPQXJEQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFB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eE8sVUFBQXVPLEVBQUF2TyxVQUFBLElBQUF3TyxLQU9sREMsRUFBb0IsU0FBU0MsbUJBTTVCLElBQUExTixFQUFBME4sRUFBQW5RLEtBQUEwQyxLQUFBME4sRUFBQUMsSUFBQTNOLEtBR0gsT0FGQUQsRUFBQThLLE9BQUF2TSxLQUFDeUIsRUFBQThLLE9BQUF2TSxNQUFBLFFBWjZCeUIsRUFBQTZOLFdBWTdCLEVBQUF4UCxNQUFBLFFBQUErRCxLQUFBLFVBQUEvRCxNQUFBLFFBQUErRCxLQUFBLFVBRWNwQyxXQVRieU4sRUFDRUMsS0FJS2xOLFFBQWdCLFVBQU8sZUFMWixjQ1BwQmlOLEVBQUFILFlBQUEsK0JBQ29DdFEsRUFBQVUsRUFBQWtDLEVBQUEsK0JBQUF1SyxJQUNXbk4sRUFBQVUsRUFBQWtDLEVBQUEsK0JBQUF5TixJQU03Q3JRLEVBQUFVLEVBQUFrQyxFQUFBLDhCQUFBNk4iLCJmaWxlIjoiZGF0YXNvdXJjZS9tb2R1bGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTcpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX187IiwiIC8qKlxuICAqIFJldHVybnMgdGhlIHJlZ2lvbiBhc3NvY2lhdGVkIHdpdGggdGhlIGtlbnRpay1rc1xuXG4gICogQHBhcmFtIGRhdGFzb3VyY2VzIFxuICAqL1xuZnVuY3Rpb24gZ2V0UmVnaW9uKGRhdGFzb3VyY2VzOiBhbnkpOiBzdHJpbmcge1xuICBsZXQgYVJlZ2lvbiA9IFwiZGVmYXVsdFwiO1xuICBmb3IgKHZhciBpbmRleCBpbiBkYXRhc291cmNlcykge1xuICAgIGlmIChkYXRhc291cmNlc1tpbmRleF0udHlwZSA9PT0gXCJrZW50aWstZHNcIikge1xuICAgICAgLy9jb25zb2xlLmxvZyhcImdldFJlZ2lvbjogZm91bmQgcmVnaW9uOiBcIiArZGF0YXNvdXJjZXNbaW5kZXhdLmpzb25EYXRhLnJlZ2lvbik7XG4gICAgICAvL2NvbnNvbGUubG9nKGFsbERTW2luZGV4XSk7XG4gICAgICBhUmVnaW9uID0gZGF0YXNvdXJjZXNbaW5kZXhdLmpzb25EYXRhLnJlZ2lvbjtcbiAgICAgIHJldHVybiBhUmVnaW9uO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYVJlZ2lvbjtcbn1cblxuZXhwb3J0IHsgZ2V0UmVnaW9uIH1cbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMl9fOyIsImltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgZ2V0UmVnaW9uIH0gZnJvbSBcIi4vcmVnaW9uSGVscGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBLZW50aWtBUEkge1xuICBiYXNlVXJsOiBzdHJpbmc7XG4gIHJlZ2lvbjogc3RyaW5nO1xuICBhcGlSZWFkeTogYm9vbGVhbjtcbiAgLyoqIEBuZ0luamVjdCAqL1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgYmFja2VuZFNydjogYW55KSB7XG4gICAgdGhpcy5hcGlSZWFkeSA9IGZhbHNlO1xuICAgIHRoaXMuYmFzZVVybCA9IFwiL2FwaS9wbHVnaW4tcHJveHkva2VudGlrLWFwcFwiO1xuICAgIC8vIGdldCByZWdpb24gZnJvbSBkYXRhc291cmNlXG4gICAgYmFja2VuZFNydi5nZXQoJy9hcGkvZGF0YXNvdXJjZXMnKS50aGVuKCAoYWxsRFM6IGFueSkgPT4ge1xuICAgICAgdGhpcy5yZWdpb24gPSBnZXRSZWdpb24oYWxsRFMpO1xuICAgICAgdGhpcy5zZXRSZWdpb24odGhpcy5yZWdpb24pO1xuICAgICAgdGhpcy5hcGlSZWFkeSA9IHRydWU7XG4gICAgfSk7XG4gIH1cblxuICBzZXRSZWdpb24ocmVnaW9uOiBzdHJpbmcpIHtcbiAgICB0aGlzLnJlZ2lvbiA9IHJlZ2lvbjtcbiAgfVxuXG4gIGFzeW5jIGdldERldmljZXMoKSB7XG4gICAgdGhpcy5iYWNrZW5kU3J2LmdldCgnL2FwaS9kYXRhc291cmNlcycpLnRoZW4oIChhbGxEUzogYW55KSA9PiB7XG4gICAgICB0aGlzLnJlZ2lvbiA9IGdldFJlZ2lvbihhbGxEUyk7XG4gICAgICB0aGlzLnNldFJlZ2lvbih0aGlzLnJlZ2lvbik7XG4gICAgICB0aGlzLmFwaVJlYWR5ID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB0aGlzLl9nZXQoJy9hcGkvdjUvZGV2aWNlcycpO1xuXG4gICAgaWYgKHJlc3AuZGF0YSAmJiByZXNwLmRhdGEuZGV2aWNlcykge1xuICAgICAgcmV0dXJuIHJlc3AuZGF0YS5kZXZpY2VzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgZ2V0VXNlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldCgnL2FwaS92NS91c2VycycpO1xuICB9XG5cbiAgZ2V0RmllbGRWYWx1ZXMoZmllbGQ6IHN0cmluZykge1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFNFTEVDVCBESVNUSU5DVCAke2ZpZWxkfSBGUk9NIGFsbF9kZXZpY2VzIE9SREVSIEJZICR7ZmllbGR9IEFTQ2A7XG4gICAgcmV0dXJuIHRoaXMuaW52b2tlU1FMUXVlcnkocXVlcnkpO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q3VzdG9tRGltZW5zaW9ucygpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5fZ2V0KCcvYXBpL3Y1L2N1c3RvbWRpbWVuc2lvbnMnKTtcbiAgICByZXR1cm4gZGF0YS5kYXRhLmN1c3RvbURpbWVuc2lvbnM7XG4gIH1cblxuICBhc3luYyBnZXRTYXZlZEZpbHRlcnMoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuX2dldCgnL2FwaS92NS9zYXZlZC1maWx0ZXJzJyk7XG4gICAgcmV0dXJuIGRhdGEuZGF0YTtcbiAgfVxuXG4gIGludm9rZVRvcFhEYXRhUXVlcnkocXVlcnk6IGFueSkge1xuICAgIGNvbnN0IGtlbnRpa1Y1UXVlcnkgPSB7XG4gICAgICBxdWVyaWVzOiBbeyBxdWVyeTogcXVlcnksIGJ1Y2tldEluZGV4OiAwIH1dLFxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpcy5fcG9zdCgnL2FwaS92NS9xdWVyeS90b3BYZGF0YScsIGtlbnRpa1Y1UXVlcnkpO1xuICB9XG5cbiAgaW52b2tlU1FMUXVlcnkocXVlcnk6IGFueSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBxdWVyeTogcXVlcnksXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLl9wb3N0KCcvYXBpL3Y1L3F1ZXJ5L3NxbCcsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgX2dldCh1cmw6IHN0cmluZykge1xuICAgIC8vIGlmIHRoZSByZWdpb24gaXMgbm90IHNldCwgZ2V0IGl0IGZyb20gdGhlIGRhdGFzb3VyY2VcbiAgICBpZiAodHlwZW9mIHRoaXMucmVnaW9uID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy9jb25zb2xlLmxvZyhcIl9nZXQ6IHRoaXMucmVnaW9uIFVOREVGSU5FRCwgZmV0Y2hpbmdcIik7XG4gICAgICBhd2FpdCB0aGlzLmJhY2tlbmRTcnYuZ2V0KCcvYXBpL2RhdGFzb3VyY2VzJykudGhlbiggKGFsbERTOiBhbnkpID0+IHtcbiAgICAgICAgdGhpcy5zZXRSZWdpb24oZ2V0UmVnaW9uKGFsbERTKSk7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJrZW50aWtBUEk6IF9nZXQ6IEZFVENIRUQgcmVnaW9uIFwiICsgdGhpcy5yZWdpb24pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmJhY2tlbmRTcnZcbiAgICAgIC5kYXRhc291cmNlUmVxdWVzdCh7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIHVybDogdGhpcy5iYXNlVXJsICsgXCIvXCIgKyB0aGlzLnJlZ2lvbiArIHVybCxcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgaWYgKGVycm9yLmVycikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvci5lcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgX3Bvc3QodXJsOiBzdHJpbmcsIGRhdGE6IGFueSkge1xuICAgIC8vIGlmIHRoZSByZWdpb24gaXMgbm90IHNldCwgZ2V0IGl0IGZyb20gdGhlIGRhdGFzb3VyY2VcbiAgICBpZiAodHlwZW9mIHRoaXMucmVnaW9uID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy9jb25zb2xlLmxvZyhcImtlbnRpa0FQSS5fcG9zdDogdGhpcy5yZWdpb24gVU5ERUZJTkVELCBmZXRjaGluZ1wiKTtcbiAgICAgIGF3YWl0IHRoaXMuYmFja2VuZFNydi5nZXQoJy9hcGkvZGF0YXNvdXJjZXMnKS50aGVuKCAoYWxsRFM6IGFueSkgPT4ge1xuICAgICAgICB0aGlzLnNldFJlZ2lvbihnZXRSZWdpb24oYWxsRFMpKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcImtlbnRpa0FQSS5fcG9zdDogRkVUQ0hFRCByZWdpb24gXCIgKyB0aGlzLnJlZ2lvbik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYmFja2VuZFNydlxuICAgICAgLmRhdGFzb3VyY2VSZXF1ZXN0KHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIHVybDogdGhpcy5iYXNlVXJsICsgXCIvXCIgKyB0aGlzLnJlZ2lvbiArIHVybCxcbiAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIGlmIChlcnJvci5lcnIpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IuZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxufVxuXG5hbmd1bGFyLm1vZHVsZSgnZ3JhZmFuYS5zZXJ2aWNlcycpLnNlcnZpY2UoJ2tlbnRpa0FQSVNydicsIEtlbnRpa0FQSSk7XG4iLCJjb25zdCBtZXRyaWNMaXN0ID0gW1xuICB7IHRleHQ6ICdUcmFmZmljJywgdmFsdWU6ICdUcmFmZmljJywgZmllbGQ6ICd0cmFmZmljJyB9LFxuICB7IHRleHQ6ICdUb3BGbG93JywgdmFsdWU6ICdUb3BGbG93JywgZmllbGQ6ICdUb3BGbG93JyB9LFxuICB7IHRleHQ6ICdUb3AgZmxvdyBJUCcsIHZhbHVlOiAnVG9wRmxvd3NJUCcsIGZpZWxkOiAnVG9wRmxvd3NJUCcgfSxcbiAgeyB0ZXh0OiAnU291cmNlIENvdW50cnknLCB2YWx1ZTogJ0dlb2dyYXBoeV9zcmMnLCBmaWVsZDogJ3NyY19nZW8nIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBHZW8gUmVnaW9uJywgdmFsdWU6ICdzcmNfZ2VvX3JlZ2lvbicsIGZpZWxkOiAnc3JjX2dlb19yZWdpb24nIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBHZW8gQ2l0eScsIHZhbHVlOiAnc3JjX2dlb19jaXR5JywgZmllbGQ6ICdzcmNfZ2VvX2NpdHknIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBBcyBOdW1iZXInLCB2YWx1ZTogJ0FTX3NyYycsIGZpZWxkOiAnc3JjX2FzJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgSW50ZXJmYWNlJywgdmFsdWU6ICdJbnRlcmZhY2VJRF9zcmMnLCBmaWVsZDogJ2lucHV0X3BvcnQnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBQb3J0JywgdmFsdWU6ICdQb3J0X3NyYycsIGZpZWxkOiAnbDRfc3JjX3BvcnQnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBWTEFOJywgdmFsdWU6ICdWTEFOX3NyYycsIGZpZWxkOiAndmxhbl9pbicgfSxcbiAgeyB0ZXh0OiAnU291cmNlIElQL0NJRFInLCB2YWx1ZTogJ0lQX3NyYycsIGZpZWxkOiAnaXB2NF9zcmNfYWRkcicgfSxcbiAgeyB0ZXh0OiAnU291cmNlIE1BQyBBZGRyZXNzJywgdmFsdWU6ICdzcmNfZXRoX21hYycsIGZpZWxkOiAnc3JjX2V0aF9tYWMnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBSb3V0ZSBQcmVmaXgvTEVOJywgdmFsdWU6ICdzcmNfcm91dGVfcHJlZml4X2xlbicsIGZpZWxkOiAnc3JjX3JvdXRlX3ByZWZpeF9sZW4nIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBSb3V0ZSBMRU4nLCB2YWx1ZTogJ3NyY19yb3V0ZV9sZW5ndGgnLCBmaWVsZDogJ3NyY19yb3V0ZV9sZW5ndGgnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBCR1AgQ29tbXVuaXR5JywgdmFsdWU6ICdzcmNfYmdwX2NvbW11bml0eScsIGZpZWxkOiAnc3JjX2JncF9jb21tdW5pdHknIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBCR1AgQVNfUGF0aCcsIHZhbHVlOiAnc3JjX2JncF9hc3BhdGgnLCBmaWVsZDogJ3NyY19iZ3BfYXNwYXRoJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgQkdQIE5leHQgSG9wIElQL0NJRFInLCB2YWx1ZTogJ3NyY19uZXh0aG9wX2lwJywgZmllbGQ6ICdpcHY0X3NyY19uZXh0X2hvcCcgfSxcbiAgeyB0ZXh0OiAnU291cmNlIE5leHQgSG9wIEFTIE51bWJlcicsIHZhbHVlOiAnc3JjX25leHRob3BfYXNuJywgZmllbGQ6ICdzcmNfbmV4dGhvcF9hcycgfSxcbiAgeyB0ZXh0OiAnU291cmNlIDJuZCBCR1BfSE9QIEFTIE51bWJlcicsIHZhbHVlOiAnc3JjX3NlY29uZF9hc24nLCBmaWVsZDogJ3NyY19zZWNvbmRfYXNuJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgM25kIEJHUF9IT1AgQVMgTnVtYmVyJywgdmFsdWU6ICdzcmNfdGhpcmRfYXNuJywgZmllbGQ6ICdzcmNfdGhpcmRfYXNuJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgUHJvdG9jb2w6SVAgUG9ydCcsIHZhbHVlOiAnc3JjX3Byb3RvX3BvcnQnLCBmaWVsZDogJ3NyY19wcm90b19wb3J0JyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBDb3VudHJ5JywgdmFsdWU6ICdHZW9ncmFwaHlfZHN0JywgZmllbGQ6ICdkc3RfZ2VvJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBSZWdpb24nLCB2YWx1ZTogJ2RzdF9nZW9fcmVnaW9uJywgZmllbGQ6ICdkc3RfZ2VvX3JlZ2lvbicgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gQ2l0eScsIHZhbHVlOiAnZHN0X2dlb19jaXR5JywgZmllbGQ6ICdkc3RfZ2VvX2NpdHknIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIEFzIE51bWJlcicsIHZhbHVlOiAnQVNfZHN0JywgZmllbGQ6ICdkc3RfYXMnIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIEludGVyZmFjZScsIHZhbHVlOiAnSW50ZXJmYWNlSURfZHN0JywgZmllbGQ6ICdvdXRwdXRfcG9ydCcgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gUG9ydCcsIHZhbHVlOiAnUG9ydF9kc3QnLCBmaWVsZDogJ2w0X2RzdF9wb3J0JyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBWTEFOJywgdmFsdWU6ICdWTEFOX2RzdCcsIGZpZWxkOiAndmxhbl9vdXQnIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIElQL0NJRFInLCB2YWx1ZTogJ0lQX2RzdCcsIGZpZWxkOiAnaXB2NF9kc3RfYWRkcicgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gTUFDIEFkZHJlc3MnLCB2YWx1ZTogJ2RzdF9ldGhfbWFjJywgZmllbGQ6ICdkc3RfZXRoX21hYycgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gUm91dGUgUHJlZml4L0xFTicsIHZhbHVlOiAnZHN0X3JvdXRlX3ByZWZpeF9sZW4nLCBmaWVsZDogJ2RzdF9yb3V0ZV9wcmVmaXhfbGVuJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBSb3V0ZSBMRU4nLCB2YWx1ZTogJ2RzdF9yb3V0ZV9sZW5ndGgnLCBmaWVsZDogJ2RzdF9yb3V0ZV9sZW5ndGgnIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIEJHUCBDb21tdW5pdHknLCB2YWx1ZTogJ2RzdF9iZ3BfY29tbXVuaXR5JywgZmllbGQ6ICdkc3RfYmdwX2NvbW11bml0eScgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gQkdQIEFTX1BhdGgnLCB2YWx1ZTogJ2RzdF9iZ3BfYXNwYXRoJywgZmllbGQ6ICdkc3RfYmdwX2FzcGF0aCcgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gQkdQIE5leHQgSG9wIElQL0NJRFInLCB2YWx1ZTogJ2RzdF9uZXh0aG9wX2lwJywgZmllbGQ6ICdpcHY0X2RzdF9uZXh0X2hvcCcgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gTmV4dCBIb3AgQVMgTnVtYmVyJywgdmFsdWU6ICdkc3RfbmV4dGhvcF9hc24nLCBmaWVsZDogJ2RzdF9uZXh0aG9wX2FzJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiAybmQgQkdQX0hPUCBBUyBOdW1iZXInLCB2YWx1ZTogJ2RzdF9zZWNvbmRfYXNuJywgZmllbGQ6ICdkc3Rfc2Vjb25kX2FzbicgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gM25kIEJHUF9IT1AgQVMgTnVtYmVyJywgdmFsdWU6ICdkc3RfdGhpcmRfYXNuJywgZmllbGQ6ICdkc3RfdGhpcmRfYXNuJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBQcm90b2NvbDpJUCBQb3J0JywgdmFsdWU6ICdkc3RfcHJvdG9fcG9ydCcsIGZpZWxkOiAnZHN0X3Byb3RvX3BvcnQnIH0sXG4gIHsgdGV4dDogJ0Z1bGwgRGV2aWNlJywgdmFsdWU6ICdpX2RldmljZV9pZCcsIGZpZWxkOiAnaV9kZXZpY2VfaWQnIH0sXG4gIHsgdGV4dDogJ0Z1bGwgU2l0ZScsIHZhbHVlOiAnaV9kZXZpY2Vfc2l0ZV9uYW1lJywgZmllbGQ6ICdpX2RldmljZV9zaXRlX25hbWUnIH0sXG4gIHsgdGV4dDogJ0Z1bGwgUHJvdG9jb2wnLCB2YWx1ZTogJ1Byb3RvJywgZmllbGQ6ICdwcm90b2NsJyB9LFxuICB7IHRleHQ6ICdGdWxsIElORVQgRmFtaWx5JywgdmFsdWU6ICdpbmV0X2ZhbWlseScsIGZpZWxkOiAnaW5ldF9mYW1pbHknIH0sXG4gIHsgdGV4dDogJ0Z1bGwgVE9TJywgdmFsdWU6ICdUT1MnLCBmaWVsZDogJ3RvcycgfSxcbiAgeyB0ZXh0OiAnRnVsbCBUQ1AgZmxhZ3MnLCB2YWx1ZTogJ3RjcF9mbGFncycsIGZpZWxkOiAndGNwX2ZsYWdzJyB9LFxuICB7IHRleHQ6ICdBUyBUb3AgVGFsa2VycycsIHZhbHVlOiAnQVNUb3BUYWxrZXJzJywgZmllbGQ6J0FTVG9wVGFsa2Vycyd9LFxuICB7IHRleHQ6ICdJbnRlcmZhY2UgVG9wIFRhbGtlcnMnLCB2YWx1ZTogJ0ludGVyZmFjZVRvcFRhbGtlcnMnLCBmaWVsZDogJ0ludGVyZmFjZVRvcFRhbGtlcnMnIH0sXG4gIHsgdGV4dDogJ1BvcnQgdG8gUG9ydCBUYWxrZXJzJywgdmFsdWU6ICdQb3J0UG9ydFRhbGtlcnMnLCBmaWVsZDogJ1BvcnRQb3J0VGFsa2VycycgfSxcbiAgeyB0ZXh0OiAnUmVnaW9uIFRvcCBUYWxrZXJzJywgdmFsdWU6ICdSZWdpb25Ub3BUYWxrZXJzJywgZmllbGQ6ICdSZWdpb25Ub3BUYWxrZXJzJyB9LFxuXTtcblxuZnVuY3Rpb24gdG9CaXRzUGVyU2Vjb25kKHZhbHVlLCByb3cpIHtcbiAgcmV0dXJuIHZhbHVlICogOCAvIHJvdy5pX2R1cmF0aW9uO1xufVxuXG5mdW5jdGlvbiB0b1BlclNlY29uZFJhdGUodmFsdWUsIHJvdykge1xuICByZXR1cm4gdmFsdWUgLyByb3cuaV9kdXJhdGlvbjtcbn1cblxuZnVuY3Rpb24gdG90YWxUb0F2Z1BlclNlY29uZCh2YWx1ZSwgcm93LCByYW5nZVNlY29uZHMpIHtcbiAgcmV0dXJuIHZhbHVlIC8gcmFuZ2VTZWNvbmRzO1xufVxuXG5mdW5jdGlvbiB0b3RhbFRvQml0c1BlclNlY29uZCh2YWx1ZSwgcm93LCByYW5nZVNlY29uZHMpIHtcbiAgcmV0dXJuIHZhbHVlICogOCAvIHJhbmdlU2Vjb25kcztcbn1cblxuY29uc3QgdW5pdExpc3QgPSBbXG4gIHtcbiAgICB0ZXh0OiAnQml0cy9zJyxcbiAgICB2YWx1ZTogJ2J5dGVzJyxcbiAgICBmaWVsZDogJ2Zfc3VtX2JvdGhfYnl0ZXMnLFxuICAgIG91dHNvcnQ6ICdhdmdfYm90aCcsXG4gICAgZ2ZVbml0OiAnYnBzJyxcbiAgICBnZkF4aXNMYWJlbDogJ0JpdHMvcycsXG4gICAgdHJhbnNmb3JtOiB0b0JpdHNQZXJTZWNvbmQsXG4gICAgdGFibGVGaWVsZHM6IFtcbiAgICAgIHsgdGV4dDogJ0F2ZycsIGZpZWxkOiAnYXZnX2JvdGgnLCB1bml0OiAnYnBzJywgdHJhbnNmb3JtOiB0b3RhbFRvQml0c1BlclNlY29uZCB9LFxuICAgICAgeyB0ZXh0OiAnOTV0aCBQZXJjZW50aWxlJywgZmllbGQ6ICdwOTV0aF9ib3RoJywgdW5pdDogJ2JwcycgfSxcbiAgICAgIHsgdGV4dDogJ01heCcsIGZpZWxkOiAnbWF4X2JvdGgnLCB1bml0OiAnYnBzJyB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICB0ZXh0OiAnUGFja2V0cy9zJyxcbiAgICB2YWx1ZTogJ3BhY2tldHMnLFxuICAgIGZpZWxkOiAnZl9zdW1fYm90aF9wa3RzJyxcbiAgICBvdXRzb3J0OiAnYXZnX2JvdGgnLFxuICAgIGdmVW5pdDogJ3BwcycsXG4gICAgZ2ZBeGlzbGFiZWw6ICdQYWNrZXRzL3MnLFxuICAgIHRyYW5zZm9ybTogdG9QZXJTZWNvbmRSYXRlLFxuICAgIHRhYmxlRmllbGRzOiBbXG4gICAgICB7IHRleHQ6ICdBdmcnLCBmaWVsZDogJ2F2Z19ib3RoJywgdW5pdDogJ3BwcycsIHRyYW5zZm9ybTogdG90YWxUb0F2Z1BlclNlY29uZCB9LFxuICAgICAgeyB0ZXh0OiAnOTV0aCBQZXJjZW50aWxlJywgZmllbGQ6ICdwOTV0aF9ib3RoJywgdW5pdDogJ3BwcycgfSxcbiAgICAgIHsgdGV4dDogJ01heCcsIGZpZWxkOiAnbWF4X2JvdGgnLCB1bml0OiAncHBzJyB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICB0ZXh0OiAnVW5pcXVlIFNyYyBJUHMnLFxuICAgIHZhbHVlOiAndW5pcXVlX3NyY19pcCcsXG4gICAgZmllbGQ6ICdmX2hsbChpbmV0X3NyY19hZGRyLDAuMDAwMSknLFxuICAgIG91dHNvcnQ6ICdhdmdfaXBzJyxcbiAgICBnZlVuaXQ6ICdzaG9ydCcsXG4gICAgZ2ZBeGlzTGFiZWw6ICdVbmlxdWUgU3JjIElQcycsXG4gICAgdGFibGVGaWVsZHM6IFtcbiAgICAgIHsgdGV4dDogJ0F2ZXJhZ2UnLCBmaWVsZDogJ2F2Z19pcHMnLCB1bml0OiAnbm9uZScgfSxcbiAgICAgIHsgdGV4dDogJ3A5NXRoJywgZmllbGQ6ICdwOTV0aF9pcHMnLCB1bml0OiAnbm9uZScgfSxcbiAgICAgIHsgdGV4dDogJ01heCcsIGZpZWxkOiAnbWF4X2lwcycsIHVuaXQ6ICdub25lJyB9LFxuICAgICAgeyB0ZXh0OiAncDk1dGggbWJwcycsIGZpZWxkOiAncDk1dGhfYml0c19wZXJfc2VjJywgdW5pdDogJ2JwcycgfSxcbiAgICAgIHsgdGV4dDogJ3A5NXRoIHBwcycsIGZpZWxkOiAncDk1dGhfcGt0c19wZXJfc2VjJywgdW5pdDogJ3BwcycgfSxcbiAgICBdLFxuICB9LFxuICB7XG4gICAgdGV4dDogJ1VuaXF1ZSBEc3QgSVBzJyxcbiAgICB2YWx1ZTogJ3VuaXF1ZV9kc3RfaXAnLFxuICAgIGZpZWxkOiAnZl9obGwoaW5ldF9kc3RfYWRkciwwLjAwMDEpJyxcbiAgICBvdXRzb3J0OiAnYXZnX2lwcycsXG4gICAgZ2ZVbml0OiAnc2hvcnQnLFxuICAgIGdmQXhpc0xhYmVsOiAnVW5pcXVlIERzdCBJUHMnLFxuICAgIHRhYmxlRmllbGRzOiBbXG4gICAgICB7IHRleHQ6ICdBdmVyYWdlJywgZmllbGQ6ICdhdmdfaXBzJywgdW5pdDogJ25vbmUnIH0sXG4gICAgICB7IHRleHQ6ICdwOTV0aCcsIGZpZWxkOiAncDk1dGhfaXBzJywgdW5pdDogJ25vbmUnIH0sXG4gICAgICB7IHRleHQ6ICdNYXgnLCBmaWVsZDogJ21heF9pcHMnLCB1bml0OiAnbm9uZScgfSxcbiAgICAgIHsgdGV4dDogJ3A5NXRoIG1icHMnLCBmaWVsZDogJ3A5NXRoX2JpdHNfcGVyX3NlYycsIHVuaXQ6ICdicHMnIH0sXG4gICAgICB7IHRleHQ6ICdwOTV0aCBwcHMnLCBmaWVsZDogJ3A5NXRoX3BrdHNfcGVyX3NlYycsIHVuaXQ6ICdwcHMnIH0sXG4gICAgXSxcbiAgfSxcbl07XG5cbmNvbnN0IGZpbHRlckZpZWxkTGlzdCA9IFtcbiAgeyB0ZXh0OiAnU291cmNlIENpdHknLCBmaWVsZDogJ3NyY19nZW9fY2l0eScgfSxcbiAgeyB0ZXh0OiAnU291cmNlIFJlZ2lvbicsIGZpZWxkOiAnc3JjX2dlb19yZWdpb24nIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBDb3VudHJ5JywgZmllbGQ6ICdzcmNfZ2VvJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgQVMgTnVtYmVyJywgZmllbGQ6ICdzcmNfYXMnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBBUyBOYW1lJywgZmllbGQ6ICdzcmNfYXNfbmFtZScgfSxcbiAgeyB0ZXh0OiAnU291cmNlIEZsb3cgVGFnJywgZmllbGQ6ICdzcmNfZmxvd190YWdzJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgSVAgUG9ydCcsIGZpZWxkOiAnbDRfc3JjX3BvcnQnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBNQUMgQWRkcmVzcycsIGZpZWxkOiAnc3JjX2V0aF9tYWMnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBWTEFOJywgZmllbGQ6ICd2bGFuX2luJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgSVAgQWRkcmVzcycsIGZpZWxkOiAnaW5ldF9zcmNfYWRkcicgfSxcbiAgeyB0ZXh0OiAnU291cmNlIEludGVyZmFjZSBJRCcsIGZpZWxkOiAnaW5wdXRfcG9ydCcgfSxcbiAgeyB0ZXh0OiAnU291cmNlIEludGVyZmFjZSBOYW1lJywgZmllbGQ6ICdpX2lucHV0X2ludGVyZmFjZV9kZXNjcmlwdGlvbicgfSxcbiAgeyB0ZXh0OiAnU291cmNlIEludGVyZmFjZSBEZXNjcmlwdGlvbicsIGZpZWxkOiAnaV9pbnB1dF9zbm1wX2FsaWFzJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgUm91dGUgUHJlZml4JywgZmllbGQ6ICdpcHY0X3NyY19yb3V0ZV9wcmVmaXgnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBSb3V0ZSBMRU4nLCBmaWVsZDogJ3NyY19yb3V0ZV9sZW5ndGgnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBCR1AgQVNfUEFUSCcsIGZpZWxkOiAnc3JjX2JncF9hc3BhdGgnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSBCR1AgQ29tbXVuaXR5JywgZmllbGQ6ICdzcmNfYmdwX2NvbW11bml0eScgfSxcbiAgeyB0ZXh0OiAnU291cmNlIE5leHQgSG9wIElQL0NJRFInLCBmaWVsZDogJ2lwdjRfc3JjX25leHRfaG9wJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgTmV4dCBIb3AgQVMgTnVtYmVyJywgZmllbGQ6ICdzcmNfbmV4dGhvcF9hcycgfSxcbiAgeyB0ZXh0OiAnU291cmNlIE5leHQgSG9wIEFTIE5hbWUnLCBmaWVsZDogJ3NyY19uZXh0aG9wX2FzX25hbWUnIH0sXG4gIHsgdGV4dDogJ1NvdXJjZSAybmQgQkdQX0hPUCBBUyBOdW1iZXInLCBmaWVsZDogJ3NyY19zZWNvbmRfYXNuJyB9LFxuICB7IHRleHQ6ICdTb3VyY2UgMm5kIEJHUF9IT1AgQVMgTmFtZScsIGZpZWxkOiAnc3JjX3NlY29uZF9hc25fbmFtZScgfSxcbiAgeyB0ZXh0OiAnU291cmNlIDNuZCBCR1BfSE9QIEFTIE51bWJlcicsIGZpZWxkOiAnc3JjX3RoaXJkX2FzbicgfSxcbiAgeyB0ZXh0OiAnU291cmNlIDNuZCBCR1BfSE9QIEFTIE5hbWUnLCBmaWVsZDogJ3NyY190aGlyZF9hc25fbmFtZScgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gQ2l0eScsIGZpZWxkOiAnZHN0X2dlb19jaXR5JyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBSZWdpb24nLCBmaWVsZDogJ2RzdF9nZW9fcmVnaW9uJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBDb3VudHJ5JywgZmllbGQ6ICdkc3RfZ2VvJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBBUyBOdW1iZXInLCBmaWVsZDogJ2RzdF9hcycgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gQVMgTmFtZScsIGZpZWxkOiAnZHN0X2FzX25hbWUnIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIEZsb3cgVGFnJywgZmllbGQ6ICdkc3RfZmxvd190YWdzJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBJUCBQb3J0JywgZmllbGQ6ICdsNF9kc3RfcG9ydCcgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gTUFDIEFkZHJlc3MnLCBmaWVsZDogJ2RzdF9ldGhfbWFjJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBWTEFOJywgZmllbGQ6ICd2bGFuX291dCcgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gSVAgQWRkcmVzcycsIGZpZWxkOiAnaW5ldF9kc3RfYWRkcicgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gSW50ZXJmYWNlIElEJywgZmllbGQ6ICdvdXRwdXRfcG9ydCcgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gSW50ZXJmYWNlIE5hbWUnLCBmaWVsZDogJ2lfb3V0cHV0X2ludGVyZmFjZV9kZXNjcmlwdGlvbicgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gSW50ZXJmYWNlIERlc2NyaXB0aW9uJywgZmllbGQ6ICdpX291dHB1dF9zbm1wX2FsaWFzJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBSb3V0ZSBQcmVmaXgnLCBmaWVsZDogJ2lwdjRfZHN0X3JvdXRlX3ByZWZpeCcgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gUm91dGUgTEVOJywgZmllbGQ6ICdkc3Rfcm91dGVfbGVuZ3RoJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBCR1AgQVNfUEFUSCcsIGZpZWxkOiAnZHN0X2JncF9hc3BhdGgnIH0sXG4gIHsgdGV4dDogJ0Rlc3RpbmF0aW9uIEJHUCBDb21tdW5pdHknLCBmaWVsZDogJ2RzdF9iZ3BfY29tbXVuaXR5JyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiBOZXh0IEhvcCBJUC9DSURSJywgZmllbGQ6ICdpcHY0X2RzdF9uZXh0X2hvcCcgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gTmV4dCBIb3AgQVMgTnVtYmVyJywgZmllbGQ6ICdkc3RfbmV4dGhvcF9hcycgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gTmV4dCBIb3AgQVMgTmFtZScsIGZpZWxkOiAnZHN0X25leHRob3BfYXNfbmFtZScgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gMm5kIEJHUF9IT1AgQVMgTnVtYmVyJywgZmllbGQ6ICdkc3Rfc2Vjb25kX2FzbicgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gMm5kIEJHUF9IT1AgQVMgTmFtZScsIGZpZWxkOiAnZHN0X3NlY29uZF9hc25fbmFtZScgfSxcbiAgeyB0ZXh0OiAnRGVzdGluYXRpb24gM25kIEJHUF9IT1AgQVMgTnVtYmVyJywgZmllbGQ6ICdkc3RfdGhpcmRfYXNuJyB9LFxuICB7IHRleHQ6ICdEZXN0aW5hdGlvbiAzbmQgQkdQX0hPUCBBUyBOYW1lJywgZmllbGQ6ICdkc3RfdGhpcmRfYXNuX25hbWUnIH0sXG4gIHsgdGV4dDogJ1RDUCBGbGFncycsIGZpZWxkOiAndGNwX2ZsYWdzJyB9LFxuICB7IHRleHQ6ICdUQ1AgRmxhZ3MgKHJhdyknLCBmaWVsZDogJ3RjcF9mbGFnc19yYXcnIH0sXG4gIHsgdGV4dDogJ1Byb3RvY29sJywgZmllbGQ6ICdwcm90b2NvbCcgfSxcbiAgLy8ge3RleHQ6ICdQcm90b2NvbCBOYW1lJywgZmllbGQ6ICdpX3Byb3RvY29sX25hbWUnfSxcbiAgeyB0ZXh0OiAnSU5FVCBGYW1pbHknLCBmaWVsZDogJ2luZXRfZmFtaWx5JyB9LFxuICB7IHRleHQ6ICdEZXZpY2UgTmFtZScsIGZpZWxkOiAnaV9kZXZpY2VfbmFtZScgfSxcbiAgeyB0ZXh0OiAnVENQIFJldHJhbnNtaXRzJywgZmllbGQ6ICd0Y3BfcmV0cmFuc21pdCcgfSxcbiAgeyB0ZXh0OiAnVE9TL0RpZmZzZXJ2JywgZmllbGQ6ICd0b3MnIH0sXG4gIHsgdGV4dDogJ1Blci1mbG93IHBhY2tldHMgKGJvdGggaW4gYW5kIG91dCknLCBmaWVsZDogJ2JvdGhfcGt0cycgfSxcbiAgeyB0ZXh0OiAnUGVyLWZsb3cgcGFja2V0cyAocmVjb3JkZWQgaW5ib3VuZCknLCBmaWVsZDogJ2luX3BrdHMnIH0sXG4gIHsgdGV4dDogJ1Blci1mbG93IGJ5dGVzIChyZWNvcmRlZCBpbmJvdW5kKScsIGZpZWxkOiAnaW5fYnl0ZXMnIH0sXG4gIHsgdGV4dDogJ1Blci1mbG93IHBhY2tldHMgKHJlY29yZGVkIG91dGJvdW5kKScsIGZpZWxkOiAnb3V0X3BrdHMnIH0sXG4gIHsgdGV4dDogJ1Blci1mbG93IGJ5dGVzIChyZWNvcmRlZCBvdXRib3VuZCknLCBmaWVsZDogJ291dF9ieXRlcycgfSxcbl07XG5cbmV4cG9ydCB7IG1ldHJpY0xpc3QsIHVuaXRMaXN0LCBmaWx0ZXJGaWVsZExpc3QgfTtcbiIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgJy4va2VudGlrQVBJJztcbmltcG9ydCB7IGdldFJlZ2lvbiB9IGZyb20gXCIuL3JlZ2lvbkhlbHBlclwiO1xuXG5cbmZ1bmN0aW9uIGdldFVUQ1RpbWVzdGFtcCgpIHtcbiAgY29uc3QgdHMgPSBuZXcgRGF0ZSgpO1xuICByZXR1cm4gdHMuZ2V0VGltZSgpICsgdHMuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwICogMTAwMDtcbn1cblxuLy8gR2V0IGhhc2ggb2YgS2VudGlrIHF1ZXJ5XG5mdW5jdGlvbiBnZXRIYXNoKHF1ZXJ5T2JqOiBhbnkpIHtcbiAgY29uc3QgcXVlcnkgPSBfLmNsb25lRGVlcChxdWVyeU9iaik7XG4gIHF1ZXJ5LnN0YXJ0aW5nX3RpbWUgPSBudWxsO1xuICBxdWVyeS5lbmRpbmdfdGltZSA9IG51bGw7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShxdWVyeSk7XG59XG5cbi8vIFByZXZlbnQgdG9vIGZyZXF1ZW50IHF1ZXJpZXNcbmZ1bmN0aW9uIGdldE1heFJlZnJlc2hJbnRlcnZhbChxdWVyeTogYW55KSB7XG4gIGNvbnN0IGludGVydmFsOiBhbnkgPSBEYXRlLnBhcnNlKHF1ZXJ5LmVuZGluZ190aW1lKSAtIERhdGUucGFyc2UocXVlcnkuc3RhcnRpbmdfdGltZSk7XG4gIGlmIChpbnRlcnZhbCA+IG1vbWVudC5kdXJhdGlvbigxLCAnbW9udGhzJykpIHtcbiAgICByZXR1cm4gNjAgKiA2MCAqIDEwMDA7IC8vIDEgaG91clxuICB9IGVsc2UgaWYgKGludGVydmFsID4gbW9tZW50LmR1cmF0aW9uKDEsICdkYXknKSkge1xuICAgIHJldHVybiAxNSAqIDYwICogMTAwMDsgLy8gMTUgbWluXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIDUgKiA2MCAqIDEwMDA7IC8vIDUgbWluXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEtlbnRpa1Byb3h5IHtcbiAga2VudGlrQVBJOiBhbnk7XG4gIGNhY2hlOiBhbnk7XG4gIGNhY2hlVXBkYXRlSW50ZXJ2YWw6IG51bWJlcjtcbiAgcmVxdWVzdENhY2hpbmdJbnRlcnZhbHM6IHsgJzFkJzogbnVtYmVyIH07XG4gIGdldERldmljZXM6ICgpID0+IFByb21pc2U8YW55W10+O1xuXG4gIC8qKiBAbmdJbmplY3QgKi9cbiAgY29uc3RydWN0b3IoYmFja2VuZFNydiwga2VudGlrQVBJU3J2OiBhbnkpIHtcbiAgICB0aGlzLmtlbnRpa0FQSSA9IGtlbnRpa0FQSVNydjtcbiAgICB0aGlzLmNhY2hlID0ge307XG4gICAgdGhpcy5jYWNoZVVwZGF0ZUludGVydmFsID0gNSAqIDYwICogMTAwMDsgLy8gNSBtaW4gYnkgZGVmYXVsdFxuICAgIHRoaXMucmVxdWVzdENhY2hpbmdJbnRlcnZhbHMgPSB7XG4gICAgICAnMWQnOiAwLFxuICAgIH07XG4gICAgdGhpcy5nZXREZXZpY2VzID0gdGhpcy5rZW50aWtBUEkuZ2V0RGV2aWNlcy5iaW5kKHRoaXMua2VudGlrQVBJKTtcbiAgfVxuXG4gIGludm9rZVRvcFhEYXRhUXVlcnkocXVlcnk6IGFueSkge1xuICAgIGNvbnN0IGNhY2hlZFF1ZXJ5ID0gXy5jbG9uZURlZXAocXVlcnkpO1xuICAgIGNvbnN0IGhhc2ggPSBnZXRIYXNoKGNhY2hlZFF1ZXJ5KTtcblxuICAgIGlmICh0aGlzLnNob3VsZEludm9rZShxdWVyeSkpIHtcbiAgICAgIC8vIEludm9rZSBxdWVyeVxuICAgICAgcmV0dXJuIHRoaXMua2VudGlrQVBJLmludm9rZVRvcFhEYXRhUXVlcnkocXVlcnkpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gZ2V0VVRDVGltZXN0YW1wKCk7XG5cbiAgICAgICAgdGhpcy5jYWNoZVtoYXNoXSA9IHtcbiAgICAgICAgICB0aW1lc3RhbXA6IHRpbWVzdGFtcCxcbiAgICAgICAgICBxdWVyeTogY2FjaGVkUXVlcnksXG4gICAgICAgICAgcmVzdWx0OiByZXN1bHQsXG4gICAgICAgIH07XG4gICAgICAgIC8vY29uc29sZS5sb2coJ0ludm9rZSBLZW50aWsgcXVlcnknKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBHZXQgZnJvbSBjYWNoZVxuICAgICAgLy9jb25zb2xlLmxvZygnR2V0IHJlc3VsdCBmcm9tIGNhY2hlJyk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuY2FjaGVbaGFzaF0ucmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICAvLyBEZWNpZGUsIGlmIHF1ZXJ5IHNob3VsZCBiZSBpbnZva2VkIG9yIGdldCBkYXRhIGZyb20gY2FjaGU/XG4gIHNob3VsZEludm9rZShxdWVyeTogYW55KSB7XG4gICAgY29uc3Qga2VudGlrUXVlcnkgPSBxdWVyeTtcbiAgICBjb25zdCBoYXNoID0gZ2V0SGFzaChrZW50aWtRdWVyeSk7XG4gICAgY29uc3QgdGltZXN0YW1wID0gZ2V0VVRDVGltZXN0YW1wKCk7XG5cbiAgICBjb25zdCBzdGFydGluZ1RpbWUgPSBEYXRlLnBhcnNlKGtlbnRpa1F1ZXJ5LnN0YXJ0aW5nX3RpbWUpO1xuICAgIGNvbnN0IGVuZGluZ1RpbWUgPSBEYXRlLnBhcnNlKGtlbnRpa1F1ZXJ5LmVuZGluZ190aW1lKTtcbiAgICBjb25zdCBxdWVyeVJhbmdlID0gZW5kaW5nVGltZSAtIHN0YXJ0aW5nVGltZTtcblxuICAgIGNvbnN0IGNhY2hlU3RhcnRpbmdUaW1lID0gdGhpcy5jYWNoZVtoYXNoXSA/IERhdGUucGFyc2UodGhpcy5jYWNoZVtoYXNoXS5xdWVyeS5zdGFydGluZ190aW1lKSA6IG51bGw7XG4gICAgY29uc3QgY2FjaGVFbmRpbmdUaW1lID0gdGhpcy5jYWNoZVtoYXNoXSA/IERhdGUucGFyc2UodGhpcy5jYWNoZVtoYXNoXS5xdWVyeS5lbmRpbmdfdGltZSkgOiBudWxsO1xuICAgIGNvbnN0IGNhY2hlZFF1ZXJ5UmFuZ2UgPSBjYWNoZUVuZGluZ1RpbWUgLSBjYWNoZVN0YXJ0aW5nVGltZTtcblxuICAgIGNvbnN0IG1heFJlZnJlc2hJbnRlcnZhbCA9IGdldE1heFJlZnJlc2hJbnRlcnZhbChrZW50aWtRdWVyeSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgIXRoaXMuY2FjaGVbaGFzaF0gfHxcbiAgICAgIHRpbWVzdGFtcCAtIGVuZGluZ1RpbWUgPiBtYXhSZWZyZXNoSW50ZXJ2YWwgfHxcbiAgICAgICh0aGlzLmNhY2hlW2hhc2hdICYmXG4gICAgICAgICh0aW1lc3RhbXAgLSBjYWNoZUVuZGluZ1RpbWUgPiBtYXhSZWZyZXNoSW50ZXJ2YWwgfHxcbiAgICAgICAgICBzdGFydGluZ1RpbWUgPCBjYWNoZVN0YXJ0aW5nVGltZSB8fFxuICAgICAgICAgIE1hdGguYWJzKHF1ZXJ5UmFuZ2UgLSBjYWNoZWRRdWVyeVJhbmdlKSA+IDYwICogMTAwMCkpIC8vIGlzIHRpbWUgcmFuZ2UgY2hhbmdlZD9cbiAgICApO1xuICB9XG5cbiAgZ2V0RmllbGRWYWx1ZXMoZmllbGQ6IHN0cmluZykge1xuICAgIGxldCB0cyA9IGdldFVUQ1RpbWVzdGFtcCgpO1xuICAgIGlmICh0aGlzLmNhY2hlW2ZpZWxkXSAmJiB0cyAtIHRoaXMuY2FjaGVbZmllbGRdLnRzIDwgdGhpcy5jYWNoZVVwZGF0ZUludGVydmFsKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuY2FjaGVbZmllbGRdLnZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMua2VudGlrQVBJLmdldEZpZWxkVmFsdWVzKGZpZWxkKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIHRzID0gZ2V0VVRDVGltZXN0YW1wKCk7XG4gICAgICAgIHRoaXMuY2FjaGVbZmllbGRdID0ge1xuICAgICAgICAgIHRzOiB0cyxcbiAgICAgICAgICB2YWx1ZTogcmVzdWx0LFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRDdXN0b21EaW1lbnNpb25zKCkge1xuICAgIGlmICh0aGlzLmNhY2hlLmN1c3RvbURpbWVuc2lvbnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgY3VzdG9tRGltZW5zaW9ucyA9IGF3YWl0IHRoaXMua2VudGlrQVBJLmdldEN1c3RvbURpbWVuc2lvbnMoKTtcbiAgICAgIHRoaXMuY2FjaGUuY3VzdG9tRGltZW5zaW9ucyA9IGN1c3RvbURpbWVuc2lvbnMubWFwKGRpbWVuc2lvbiA9PiAoe1xuICAgICAgICB2YWx1ZXM6IHRoaXMuX2dldERpbWVuc2lvblBvcHVsYXRvcnNWYWx1ZXMoZGltZW5zaW9uKSxcbiAgICAgICAgdGV4dDogYEN1c3RvbSAke2RpbWVuc2lvbi5kaXNwbGF5X25hbWV9YCxcbiAgICAgICAgdmFsdWU6IGRpbWVuc2lvbi5uYW1lLFxuICAgICAgICBmaWVsZDogZGltZW5zaW9uLm5hbWVcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuY3VzdG9tRGltZW5zaW9ucztcbiAgfVxuXG4gIGFzeW5jIGdldFNhdmVkRmlsdGVycygpIHtcbiAgICBpZiAodGhpcy5jYWNoZS5zYXZlZEZpbHRlcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3Qgc2F2ZWRGaWx0ZXJzID0gYXdhaXQgdGhpcy5rZW50aWtBUEkuZ2V0U2F2ZWRGaWx0ZXJzKCk7XG4gICAgICB0aGlzLmNhY2hlLnNhdmVkRmlsdGVycyA9IF8ubWFwKHNhdmVkRmlsdGVycywgZmlsdGVyID0+ICh7XG4gICAgICAgIHRleHQ6IGBTYXZlZCAke2ZpbHRlci5maWx0ZXJfbmFtZX1gLFxuICAgICAgICBmaWVsZDogZmlsdGVyLmZpbHRlcl9uYW1lLFxuICAgICAgICBpZDogZmlsdGVyLmlkXG4gICAgICB9KSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNhY2hlLnNhdmVkRmlsdGVycztcbiAgfVxuXG4gIHByaXZhdGUgX2dldERpbWVuc2lvblBvcHVsYXRvcnNWYWx1ZXMoZGltZW5zaW9uOiBhbnkpIHtcbiAgICByZXR1cm4gZGltZW5zaW9uLnBvcHVsYXRvcnMucmVkdWNlKCh2YWx1ZXMsIHBvcHVsYXRvcikgPT4ge1xuICAgICAgdmFsdWVzLnB1c2gocG9wdWxhdG9yLnZhbHVlKTtcbiAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfSwgW10pO1xuICB9XG59XG5cbmFuZ3VsYXIubW9kdWxlKCdncmFmYW5hLnNlcnZpY2VzJykuc2VydmljZSgna2VudGlrUHJveHlTcnYnLCBLZW50aWtQcm94eSk7XG4iLCJpbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyB1bml0TGlzdCwgZmlsdGVyRmllbGRMaXN0IH0gZnJvbSAnLi9tZXRyaWNfZGVmJztcblxuY29uc3QgS0VOVElLX1RJTUVfRk9STUFUID0gJ1lZWVktTU0tREQgSEg6bW06c3MnO1xuXG5mdW5jdGlvbiBmb3JtYXRNZXRyaWNBZ2dzKHVuaXREZWY6IGFueSkge1xuICBjb25zdCBhZ2dzID0gW1xuICAgIHtcbiAgICAgIG5hbWU6ICdhdmdfYm90aCcsXG4gICAgICBjb2x1bW46IHVuaXREZWYuZmllbGQsXG4gICAgICBmbjogJ2F2ZXJhZ2UnLFxuICAgICAgcmF3OiB0cnVlLCAvLyBTZXQgdG8gZ2V0IHRpbWVzZXJpZXMgZGF0YVxuICAgICAgc2FtcGxlX3JhdGU6IDEsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAncDk1dGhfYm90aCcsXG4gICAgICBjb2x1bW46IHVuaXREZWYuZmllbGQsXG4gICAgICBmbjogJ3BlcmNlbnRpbGUnLFxuICAgICAgcmFuazogOTUsXG4gICAgICBzYW1wbGVfcmF0ZTogMSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdtYXhfYm90aCcsXG4gICAgICBjb2x1bW46IHVuaXREZWYuZmllbGQsXG4gICAgICBmbjogJ21heCcsXG4gICAgICBzYW1wbGVfcmF0ZTogMSxcbiAgICB9LFxuICBdO1xuXG4gIHJldHVybiBhZ2dzO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRVbmlxdWVJcEFnZ3ModW5pdERlZjogYW55KSB7XG4gIGNvbnN0IGFnZ3MgPSBbXG4gICAge1xuICAgICAgbmFtZTogJ2F2Z19pcHMnLFxuICAgICAgY29sdW1uOiB1bml0RGVmLmZpZWxkLFxuICAgICAgZm46ICdhdmVyYWdlJyxcbiAgICAgIHJhdzogdHJ1ZSxcbiAgICAgIHNhbXBsZV9yYXRlOiAxLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3A5NXRoX2lwcycsXG4gICAgICBjb2x1bW46IHVuaXREZWYuZmllbGQsXG4gICAgICBmbjogJ3BlcmNlbnRpbGUnLFxuICAgICAgcmFuazogOTUsXG4gICAgICBzYW1wbGVfcmF0ZTogMSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdtYXhfaXBzJyxcbiAgICAgIGNvbHVtbjogdW5pdERlZi5maWVsZCxcbiAgICAgIGZuOiAnbWF4JyxcbiAgICAgIHNhbXBsZV9yYXRlOiAxLFxuICAgICAgcmF3OiB0cnVlLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3A5NXRoX2JpdHNfcGVyX3NlYycsXG4gICAgICBjb2x1bW46ICdmX3N1bV9ib3RoX2J5dGVzJyxcbiAgICAgIGZuOiAncGVyY2VudGlsZScsXG4gICAgICByYW5rOiA5NSxcbiAgICAgIHNhbXBsZV9yYXRlOiAxLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3A5NXRoX3BrdHNfcGVyX3NlYycsXG4gICAgICBjb2x1bW46ICdmX3N1bV9ib3RoX3BrdHMnLFxuICAgICAgZm46ICdwZXJjZW50aWxlJyxcbiAgICAgIHJhbms6IDk1LFxuICAgICAgc2FtcGxlX3JhdGU6IDEsXG4gICAgfSxcbiAgXTtcblxuICByZXR1cm4gYWdncztcbn1cblxuZnVuY3Rpb24gZm9ybWF0QWdncyh1bml0RGVmOiBhbnkpIHtcbiAgbGV0IGFnZ3MgPSBbXTtcbiAgaWYgKHVuaXREZWYudmFsdWUgPT09ICd1bmlxdWVfc3JjX2lwJyB8fCB1bml0RGVmLnZhbHVlID09PSAndW5pcXVlX2RzdF9pcCcpIHtcbiAgICBhZ2dzID0gZm9ybWF0VW5pcXVlSXBBZ2dzKHVuaXREZWYpO1xuICB9IGVsc2Uge1xuICAgIGFnZ3MgPSBmb3JtYXRNZXRyaWNBZ2dzKHVuaXREZWYpO1xuICB9XG5cbiAgcmV0dXJuIGFnZ3M7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEZpbHRlcnMoa2VudGlrRmlsdGVyR3JvdXBzOiBBcnJheTxhbnk+KSB7XG4gIGNvbnN0IGZpbHRlcnNPYmogPSB7XG4gICAgY29ubmVjdG9yOiAnQWxsJyxcbiAgICBmaWx0ZXJHcm91cHM6IFtdLFxuICB9O1xuXG4gIGlmIChrZW50aWtGaWx0ZXJHcm91cHMubGVuZ3RoKSB7XG4gICAgZmlsdGVyc09iai5maWx0ZXJHcm91cHMgPSBrZW50aWtGaWx0ZXJHcm91cHM7XG4gIH1cblxuICByZXR1cm4gZmlsdGVyc09iajtcbn1cblxuZnVuY3Rpb24gYnVpbGRUb3BYZGF0YVF1ZXJ5KG9wdGlvbnMpIHtcbiAgY29uc3QgdW5pdERlZiA9IF8uZmluZCh1bml0TGlzdCwgeyB2YWx1ZTogb3B0aW9ucy51bml0IH0pO1xuICBjb25zdCBzdGFydGluZ1RpbWUgPSBvcHRpb25zLnJhbmdlLmZyb20udXRjKCkuZm9ybWF0KEtFTlRJS19USU1FX0ZPUk1BVCk7XG4gIGNvbnN0IGVuZGluZ1RpbWUgPSBvcHRpb25zLnJhbmdlLnRvLnV0YygpLmZvcm1hdChLRU5USUtfVElNRV9GT1JNQVQpO1xuXG4gIGNvbnN0IHF1ZXJ5ID0ge1xuICAgIGRpbWVuc2lvbjogW29wdGlvbnMubWV0cmljXSxcbiAgICBtZXRyaWM6IG9wdGlvbnMudW5pdCxcbiAgICBtYXRyaXhCeTogW10sXG4gICAgY2lkcjogMzIsXG4gICAgY2lkcjY6IDEyOCxcbiAgICB0b3B4OiAnOCcsIC8vIFZpc3VhbGl6YXRpb24gZGVwdGggKDggYnkgZGVmYXVsdClcbiAgICBkZXB0aDogMTAwLFxuICAgIGZhc3REYXRhOiAnQXV0bycsXG4gICAgbG9va2JhY2tfc2Vjb25kczogMCxcbiAgICB0aW1lX2Zvcm1hdDogJ1VUQycsXG4gICAgc3RhcnRpbmdfdGltZTogc3RhcnRpbmdUaW1lLFxuICAgIGVuZGluZ190aW1lOiBlbmRpbmdUaW1lLFxuICAgIGRldmljZV9uYW1lOiBvcHRpb25zLmRldmljZU5hbWVzLFxuICAgIG91dHNvcnQ6IHVuaXREZWYub3V0c29ydCxcbiAgICBhZ2dyZWdhdGVzOiBmb3JtYXRBZ2dzKHVuaXREZWYpLFxuICAgIGZpbHRlcnNfb2JqOiBmb3JtYXRGaWx0ZXJzKG9wdGlvbnMua2VudGlrRmlsdGVyR3JvdXBzKSxcbiAgICBzYXZlZF9maWx0ZXJzOiBvcHRpb25zLmtlbnRpa1NhdmVkRmlsdGVycyxcbiAgfTtcblxuICByZXR1cm4gcXVlcnk7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRUb0tlbnRpa0ZpbHRlcihmaWx0ZXJPYmo6IGFueSwgZmlsdGVyRGVmOiBhbnkpIHtcbiAgLy8gVXNlIEtlbnRpayAnbm90IGVxdWFsJyBzdHlsZVxuICBpZiAoZmlsdGVyT2JqLm9wZXJhdG9yID09PSAnIT0nKSB7XG4gICAgZmlsdGVyT2JqLm9wZXJhdG9yID0gJzw+JztcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZmlsdGVyRmllbGQ6IGZpbHRlckRlZi5maWVsZCxcbiAgICBvcGVyYXRvcjogZmlsdGVyT2JqLm9wZXJhdG9yLFxuICAgIGZpbHRlclZhbHVlOiBmaWx0ZXJPYmoudmFsdWUsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRUb0tlbnRpa1NhdmVkRmlsdGVyKGZpbHRlck9iajogYW55LCBmaWx0ZXJEZWY6IGFueSkge1xuICByZXR1cm4ge1xuICAgIGZpbHRlcl9pZDogZmlsdGVyRGVmLmlkLFxuICAgIGlzX25vdDogZmlsdGVyT2JqLnZhbHVlID09PSAnZXhjbHVkZSdcbiAgfTtcbn1cblxuZnVuY3Rpb24gY29udmVydFRvS2VudGlrRmlsdGVyR3JvdXAoZmlsdGVyczogQXJyYXk8YW55PiwgY3VzdG9tRGltZW5zaW9uczogQXJyYXk8YW55Piwgc2F2ZWRGaWx0ZXJzTGlzdDogQXJyYXk8YW55Pikge1xuICBsZXQga2VudGlrRmlsdGVycyA9IFtdO1xuICBsZXQgc2F2ZWRGaWx0ZXJzID0gW107XG5cbiAgaWYgKGZpbHRlcnMubGVuZ3RoKSB7XG4gICAgY29uc3QgZmlsdGVyRmllbGRMaXN0RXh0ZW5kZWQgPSBfLmNvbmNhdChmaWx0ZXJGaWVsZExpc3QsIGN1c3RvbURpbWVuc2lvbnMpO1xuICAgIGZvciAobGV0IGZpbHRlciBvZiBmaWx0ZXJzKSB7XG4gICAgICBjb25zdCBmaWx0ZXJGaWVsZERlZiA9IF8uZmluZChmaWx0ZXJGaWVsZExpc3RFeHRlbmRlZCwgeyB0ZXh0OiBmaWx0ZXIua2V5IH0pO1xuICAgICAgaWYgKGZpbHRlckZpZWxkRGVmID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3Qgc2F2ZWRGaWx0ZXJEZWYgPSBfLmZpbmQoc2F2ZWRGaWx0ZXJzTGlzdCwgeyB0ZXh0OiBmaWx0ZXIua2V5IH0pO1xuICAgICAgICBzYXZlZEZpbHRlcnMucHVzaChjb252ZXJ0VG9LZW50aWtTYXZlZEZpbHRlcihmaWx0ZXIsIHNhdmVkRmlsdGVyRGVmKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBrZW50aWtGaWx0ZXJzLnB1c2goY29udmVydFRvS2VudGlrRmlsdGVyKGZpbHRlciwgZmlsdGVyRmllbGREZWYpKTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGlmIChrZW50aWtGaWx0ZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCBjb25uZWN0b3IgPSAnQWxsJztcbiAgICAgIGlmIChcbiAgICAgICAgZmlsdGVyc1swXS5jb25kaXRpb24gJiZcbiAgICAgICAgKGZpbHRlcnNbMF0uY29uZGl0aW9uLnRvTG93ZXJDYXNlKCkgPT09ICdvcicgfHwgZmlsdGVyc1swXS5jb25kaXRpb24udG9Mb3dlckNhc2UoKSA9PT0gJ2FueScpXG4gICAgICApIHtcbiAgICAgICAgY29ubmVjdG9yID0gJ0FueSc7XG4gICAgICB9XG5cbiAgICAgIGtlbnRpa0ZpbHRlcnMgPSBbe1xuICAgICAgICBjb25uZWN0b3IsXG4gICAgICAgIGZpbHRlcnM6IGtlbnRpa0ZpbHRlcnMsXG4gICAgICAgIG5vdDogZmFsc2UsXG4gICAgICB9XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGtlbnRpa0ZpbHRlcnMsXG4gICAgc2F2ZWRGaWx0ZXJzLFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGJ1aWxkVG9wWGRhdGFRdWVyeSxcbiAgZm9ybWF0QWdncyxcbiAgY29udmVydFRvS2VudGlrRmlsdGVyR3JvdXAsXG59O1xuIiwiaW1wb3J0IHsgbWV0cmljTGlzdCwgdW5pdExpc3QsIGZpbHRlckZpZWxkTGlzdCB9IGZyb20gJy4vbWV0cmljX2RlZic7XG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgJy4va2VudGlrUHJveHknO1xuaW1wb3J0IFRhYmxlTW9kZWwgZnJvbSAnZ3JhZmFuYS9hcHAvY29yZS90YWJsZV9tb2RlbCc7XG5pbXBvcnQgcXVlcnlCdWlsZGVyIGZyb20gJy4vcXVlcnlfYnVpbGRlcic7XG5cbmNsYXNzIEtlbnRpa0RhdGFzb3VyY2Uge1xuICBuYW1lOiBzdHJpbmc7XG4gIGtlbnRpazogYW55O1xuXG4gIC8qKiBAbmdJbmplY3QgKi9cbiAgY29uc3RydWN0b3IocHVibGljIGluc3RhbmNlU2V0dGluZ3M6IGFueSwgcHVibGljIHRlbXBsYXRlU3J2OiBhbnksIGtlbnRpa1Byb3h5U3J2OiBhbnkpIHtcbiAgICB0aGlzLm5hbWUgPSBpbnN0YW5jZVNldHRpbmdzLm5hbWU7XG4gICAgdGhpcy5rZW50aWsgPSBrZW50aWtQcm94eVNydjtcbiAgfVxuXG4gIGludGVycG9sYXRlRGV2aWNlRmllbGQodmFsdWU6IGFueSwgdmFyaWFibGU6IGFueSkge1xuICAgIC8vIGlmIG5vIG11bHRpIG9yIGluY2x1ZGUgYWxsIGRvIG5vdCByZWdleEVzY2FwZVxuICAgIGlmICghdmFyaWFibGUubXVsdGkgJiYgIXZhcmlhYmxlLmluY2x1ZGVBbGwpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZS5qb2luKCcsJyk7XG4gIH1cblxuICBhc3luYyBxdWVyeShvcHRpb25zOiBhbnkpIHtcbiAgICBpZiAoIW9wdGlvbnMudGFyZ2V0cyB8fCBvcHRpb25zLnRhcmdldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgZGF0YTogW10gfSk7XG4gICAgfVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gb3B0aW9ucy50YXJnZXRzWzBdO1xuICAgIGNvbnN0IGRldmljZU5hbWVzID0gdGhpcy50ZW1wbGF0ZVNydi5yZXBsYWNlKFxuICAgICAgdGFyZ2V0LmRldmljZSxcbiAgICAgIG9wdGlvbnMuc2NvcGVkVmFycyxcbiAgICAgIHRoaXMuaW50ZXJwb2xhdGVEZXZpY2VGaWVsZC5iaW5kKHRoaXMpXG4gICAgKTtcblxuICAgIGxldCBrZW50aWtGaWx0ZXJzID0gdGhpcy50ZW1wbGF0ZVNydi5nZXRBZGhvY0ZpbHRlcnModGhpcy5uYW1lKTtcbiAgICBjb25zdCBjdXN0b21EaW1lbnNpb25zID0gYXdhaXQgdGhpcy5rZW50aWsuZ2V0Q3VzdG9tRGltZW5zaW9ucygpO1xuICAgIGNvbnN0IHNhdmVkRmlsdGVyc0xpc3QgPSBhd2FpdCB0aGlzLmtlbnRpay5nZXRTYXZlZEZpbHRlcnMoKTtcbiAgICBjb25zdCBrZW50aWtGaWx0ZXJHcm91cHMgPSBxdWVyeUJ1aWxkZXIuY29udmVydFRvS2VudGlrRmlsdGVyR3JvdXAoa2VudGlrRmlsdGVycywgY3VzdG9tRGltZW5zaW9ucywgc2F2ZWRGaWx0ZXJzTGlzdCk7XG5cbiAgICBjb25zdCBxdWVyeU9wdGlvbnMgPSB7XG4gICAgICBkZXZpY2VOYW1lczogZGV2aWNlTmFtZXMsXG4gICAgICByYW5nZToge1xuICAgICAgICBmcm9tOiBvcHRpb25zLnJhbmdlLmZyb20sXG4gICAgICAgIHRvOiBvcHRpb25zLnJhbmdlLnRvLFxuICAgICAgfSxcbiAgICAgIG1ldHJpYzogdGhpcy50ZW1wbGF0ZVNydi5yZXBsYWNlKHRhcmdldC5tZXRyaWMpLFxuICAgICAgdW5pdDogdGhpcy50ZW1wbGF0ZVNydi5yZXBsYWNlKHRhcmdldC51bml0KSxcbiAgICAgIGtlbnRpa0ZpbHRlckdyb3Vwczoga2VudGlrRmlsdGVyR3JvdXBzLmtlbnRpa0ZpbHRlcnMsXG4gICAgICBrZW50aWtTYXZlZEZpbHRlcnM6IGtlbnRpa0ZpbHRlckdyb3Vwcy5zYXZlZEZpbHRlcnMsXG4gICAgfTtcbiAgICBjb25zdCBxdWVyeSA9IHF1ZXJ5QnVpbGRlci5idWlsZFRvcFhkYXRhUXVlcnkocXVlcnlPcHRpb25zKTtcblxuICAgIHJldHVybiB0aGlzLmtlbnRpa1xuICAgICAgLmludm9rZVRvcFhEYXRhUXVlcnkocXVlcnkpXG4gICAgICAudGhlbih0aGlzLnByb2Nlc3NSZXNwb25zZS5iaW5kKHRoaXMsIHF1ZXJ5LCB0YXJnZXQubW9kZSwgb3B0aW9ucykpXG4gICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgcHJvY2Vzc1Jlc3BvbnNlKHF1ZXJ5OiBhbnksIG1vZGU6IHN0cmluZywgb3B0aW9uczogYW55LCBkYXRhOiBhbnkpIHtcbiAgICBpZiAoIWRhdGEucmVzdWx0cykge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgbWVzc2FnZTogJ25vIGtlbnRpayBkYXRhJyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBidWNrZXREYXRhID0gZGF0YS5yZXN1bHRzWzBdLmRhdGE7XG4gICAgaWYgKGJ1Y2tldERhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgZXh0ZW5kZWRNZXRyaWNMaXN0ID0gYXdhaXQgdGhpcy5fZ2V0RXh0ZW5kZWREaW1lbnNpb25zTGlzdChtZXRyaWNMaXN0KTtcbiAgICBjb25zdCBtZXRyaWNEZWYgPSBfLmZpbmQoXG4gICAgICBleHRlbmRlZE1ldHJpY0xpc3QsXG4gICAgICB7IHZhbHVlOiBxdWVyeS5kaW1lbnNpb25bMF0gfVxuICAgICk7XG5cbiAgICBjb25zdCB1bml0RGVmID0gXy5maW5kKHVuaXRMaXN0LCB7IHZhbHVlOiBxdWVyeS5tZXRyaWMgfSk7XG5cbiAgICBpZiAobW9kZSA9PT0gJ3RhYmxlJykge1xuICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc1RhYmxlRGF0YShidWNrZXREYXRhLCBtZXRyaWNEZWYsIHVuaXREZWYpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9jZXNzVGltZVNlcmllcyhidWNrZXREYXRhLCBxdWVyeSwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgcHJvY2Vzc1RpbWVTZXJpZXMoYnVja2V0RGF0YTogYW55LCBxdWVyeTogYW55LCBvcHRpb25zPzogYW55KSB7XG4gICAgY29uc3Qgc2VyaWVzTGlzdCA9IFtdO1xuICAgIGxldCBlbmRJbmRleCA9IHF1ZXJ5LnRvcHg7XG4gICAgaWYgKGJ1Y2tldERhdGEubGVuZ3RoIDwgZW5kSW5kZXgpIHtcbiAgICAgIGVuZEluZGV4ID0gYnVja2V0RGF0YS5sZW5ndGg7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbmRJbmRleDsgaSsrKSB7XG4gICAgICBjb25zdCBzZXJpZXMgPSBidWNrZXREYXRhW2ldO1xuICAgICAgY29uc3QgdGltZXNlcmllcyA9IF8uZmluZChzZXJpZXMudGltZVNlcmllcywgc2VyaWVzID0+IHtcbiAgICAgICAgcmV0dXJuIHNlcmllcy5mbG93ICYmIHNlcmllcy5mbG93Lmxlbmd0aDtcbiAgICAgIH0pO1xuICAgICAgY29uc3Qgc2VyaWVzTmFtZSA9IHNlcmllcy5rZXk7XG5cbiAgICAgIGlmICh0aW1lc2VyaWVzKSB7XG4gICAgICAgIGNvbnN0IGdyYWZhbmFTZXJpZXMgPSB7XG4gICAgICAgICAgdGFyZ2V0OiBzZXJpZXNOYW1lLFxuICAgICAgICAgIGRhdGFwb2ludHM6IF8ubWFwKHRpbWVzZXJpZXMuZmxvdywgcG9pbnQgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFtwb2ludFsxXSwgcG9pbnRbMF1dO1xuICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgICAgICBzZXJpZXNMaXN0LnB1c2goZ3JhZmFuYVNlcmllcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlcmllc0xpc3Q7XG4gIH1cblxuICBwcm9jZXNzVGFibGVEYXRhKGJ1Y2tldERhdGE6IGFueSwgbWV0cmljRGVmOiBhbnksIHVuaXREZWY6IGFueSkge1xuICAgIGNvbnN0IHRhYmxlID0gbmV3IFRhYmxlTW9kZWwoKTtcblxuICAgIHRhYmxlLmNvbHVtbnMucHVzaCh7IHRleHQ6IG1ldHJpY0RlZi50ZXh0IH0pO1xuXG4gICAgZm9yIChjb25zdCBjb2wgb2YgdW5pdERlZi50YWJsZUZpZWxkcykge1xuICAgICAgdGFibGUuY29sdW1ucy5wdXNoKHsgdGV4dDogY29sLnRleHQsIHVuaXQ6IGNvbC51bml0IH0pO1xuICAgIH1cblxuICAgIF8uZm9yRWFjaChidWNrZXREYXRhLCByb3cgPT4ge1xuICAgICAgY29uc3Qgc2VyaWVzTmFtZSA9IHJvdy5rZXk7XG5cbiAgICAgIGNvbnN0IHZhbHVlcyA9IFtzZXJpZXNOYW1lXTtcbiAgICAgIGZvciAoY29uc3QgY29sIG9mIHVuaXREZWYudGFibGVGaWVsZHMpIHtcbiAgICAgICAgbGV0IHZhbCA9IHJvd1tjb2wuZmllbGRdO1xuXG4gICAgICAgIGlmIChfLmlzU3RyaW5nKHZhbCkpIHtcbiAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KHZhbCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YWx1ZXMucHVzaCh2YWwpO1xuICAgICAgfVxuXG4gICAgICB0YWJsZS5yb3dzLnB1c2godmFsdWVzKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBbdGFibGVdO1xuICB9XG5cbiAgYXN5bmMgbWV0cmljRmluZFF1ZXJ5KHF1ZXJ5OiBhbnkpIHtcbiAgICBpZiAocXVlcnkgPT09ICdtZXRyaWNzKCknKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZ2V0RXh0ZW5kZWREaW1lbnNpb25zTGlzdChtZXRyaWNMaXN0KTtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5ID09PSAndW5pdHMoKScpIHtcbiAgICAgIHJldHVybiB1bml0TGlzdDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5rZW50aWsuZ2V0RGV2aWNlcygpLnRoZW4oZGV2aWNlcyA9PiB7XG4gICAgICByZXR1cm4gZGV2aWNlcy5tYXAoZGV2aWNlID0+IHtcbiAgICAgICAgcmV0dXJuIHsgdGV4dDogZGV2aWNlLmRldmljZV9uYW1lLCB2YWx1ZTogZGV2aWNlLmRldmljZV9uYW1lIH07XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldFRhZ0tleXMoKSB7XG4gICAgbGV0IGluaXRpYWxMaXN0ID0gYXdhaXQgdGhpcy5fZ2V0RXh0ZW5kZWREaW1lbnNpb25zTGlzdChmaWx0ZXJGaWVsZExpc3QpO1xuICAgIGNvbnN0IHNhdmVkRmlsdGVycyA9IGF3YWl0IHRoaXMua2VudGlrLmdldFNhdmVkRmlsdGVycygpO1xuICAgIHJldHVybiBfLmNvbmNhdChpbml0aWFsTGlzdCwgc2F2ZWRGaWx0ZXJzKTtcbiAgfVxuXG4gIGFzeW5jIGdldFRhZ1ZhbHVlcyhvcHRpb25zOiBhbnkpIHtcbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgbGV0IGZpbHRlciA9IF8uZmluZChmaWx0ZXJGaWVsZExpc3QsIHsgdGV4dDogb3B0aW9ucy5rZXkgfSk7XG5cbiAgICAgIGlmIChmaWx0ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBzYXZlZEZpbHRlcnMgPSBhd2FpdCB0aGlzLmtlbnRpay5nZXRTYXZlZEZpbHRlcnMoKTtcbiAgICAgICAgZmlsdGVyID0gXy5maW5kKHNhdmVkRmlsdGVycywgeyB0ZXh0OiBvcHRpb25zLmtleSB9KTtcbiAgICAgICAgaWYgKGZpbHRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc3QgY3VzdG9tRGltZW5zaW9ucyA9IGF3YWl0IHRoaXMua2VudGlrLmdldEN1c3RvbURpbWVuc2lvbnMoKTtcbiAgICAgICAgICBjb25zdCBkaW1lbnNpb24gPSBfLmZpbmQoY3VzdG9tRGltZW5zaW9ucywgeyB0ZXh0OiBvcHRpb25zLmtleSB9KTtcbiAgICAgICAgICByZXR1cm4gZGltZW5zaW9uLnZhbHVlcy5tYXAodmFsdWUgPT4gKHsgdGV4dDogdmFsdWUgfSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBbeyB0ZXh0OiAnaW5jbHVkZScgfSwgeyB0ZXh0OiAnZXhjbHVkZScgfV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGZpZWxkID0gZmlsdGVyLmZpZWxkO1xuICAgICAgICByZXR1cm4gdGhpcy5rZW50aWsuZ2V0RmllbGRWYWx1ZXMoZmllbGQpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LnJvd3MubWFwKHJvdyA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyB0ZXh0OiByb3dbZmllbGRdLnRvU3RyaW5nKCkgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9nZXRFeHRlbmRlZERpbWVuc2lvbnNMaXN0KGxpc3Q6IEFycmF5PGFueT4pIHtcbiAgICBjb25zdCBjdXN0b21EaW1lbnNpb25zID0gYXdhaXQgdGhpcy5rZW50aWsuZ2V0Q3VzdG9tRGltZW5zaW9ucygpO1xuICAgIHJldHVybiBfLmNvbmNhdChsaXN0LCBjdXN0b21EaW1lbnNpb25zKTtcbiAgfVxufVxuXG5leHBvcnQgeyBLZW50aWtEYXRhc291cmNlIH07XG4iLCJleHBvcnQgY2xhc3MgQ29uZmlnQ3RybCB7XG4gIHN0YXRpYyB0ZW1wbGF0ZVVybCA9ICdkYXRhc291cmNlL2NvbmZpZy5odG1sJztcbn1cbiIsImltcG9ydCB7IFF1ZXJ5Q3RybCB9IGZyb20gJ2dyYWZhbmEvYXBwL3BsdWdpbnMvc2RrJztcblxuY2xhc3MgS2VudGlrUXVlcnlDdHJsIGV4dGVuZHMgUXVlcnlDdHJsIHtcbiAgc3RhdGljIHRlbXBsYXRlVXJsOiBzdHJpbmc7XG4gIHF1ZXJ5TW9kZXM6IGFueVtdO1xuXG4gIC8qKiBAbmdJbmplY3QgKi9cbiAgY29uc3RydWN0b3IoJHNjb3BlLCAkaW5qZWN0b3IpIHtcbiAgICBzdXBlcigkc2NvcGUsICRpbmplY3Rvcik7XG5cbiAgICB0aGlzLnRhcmdldC5tb2RlID0gdGhpcy50YXJnZXQubW9kZSB8fCAnZ3JhcGgnO1xuXG4gICAgdGhpcy5xdWVyeU1vZGVzID0gW3sgdmFsdWU6ICdncmFwaCcsIHRleHQ6ICdHcmFwaCcgfSwgeyB2YWx1ZTogJ3RhYmxlJywgdGV4dDogJ1RhYmxlJyB9XTtcbiAgfVxufVxuXG5LZW50aWtRdWVyeUN0cmwudGVtcGxhdGVVcmwgPSAnZGF0YXNvdXJjZS9xdWVyeV9lZGl0b3IuaHRtbCc7XG5cbmV4cG9ydCB7IEtlbnRpa1F1ZXJ5Q3RybCB9O1xuIiwiaW1wb3J0IHtLZW50aWtEYXRhc291cmNlfSBmcm9tICcuL2RhdGFzb3VyY2UnO1xuaW1wb3J0IHtDb25maWdDdHJsfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQge0tlbnRpa1F1ZXJ5Q3RybH0gZnJvbSAnLi9xdWVyeV9lZGl0b3InO1xuXG5leHBvcnQge1xuICBLZW50aWtEYXRhc291cmNlIGFzIERhdGFzb3VyY2UsXG4gIENvbmZpZ0N0cmwgYXMgQ29uZmlnQ3RybCxcbiAgS2VudGlrUXVlcnlDdHJsIGFzIFF1ZXJ5Q3RybFxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=