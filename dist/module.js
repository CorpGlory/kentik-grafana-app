define(["lodash","angular","app/core/core","app/plugins/sdk"],function(e,t,n,i){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function i(e){var t="default";for(var n in e)if("kentik-ds"===e[n].type)return t=e[n].jsonData.region;return t}n.d(t,"a",function(){return i})},function(e,n){e.exports=t},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var i=n(5),r=n(0);function a(e){var t="";t+=e.status?"("+e.status+") ":"",t+=e.statusText?e.statusText+": ":"",e.data&&e.data.error?t+=e.data.error:e.err?t+=e.err:r.isString(e)&&(t+=e),i.appEvents.emit("alert-error",["Can't connect to Kentik API",t])}function o(e,t,n){var a="";a+=t.status?"("+t.status+") ":"",a+=t.statusText?t.statusText+": ":"",t.data&&t.data.error?a+=t.data.error:t.err?a+=t.err:r.isString(t)&&(a+=t),i.appEvents.emit("alert-"+n,[e,a])}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(2),r=n.n(i),a=n(1),o=function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},s=function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},c=function(){function e(e){var t=this;this.backendSrv=e,this.apiReady=!1,this.baseUrl="/api/plugin-proxy/kentik-app",e.get("/api/datasources").then(function(e){t.region=Object(a.a)(e),t.setRegion(t.region),t.apiReady=!0})}return e.$inject=["backendSrv"],e.prototype.setRegion=function(e){this.region=e},e.prototype.getDevices=function(){return o(this,void 0,void 0,function(){var e,t=this;return s(this,function(n){switch(n.label){case 0:return this.backendSrv.get("/api/datasources").then(function(e){t.region=Object(a.a)(e),t.setRegion(t.region),t.apiReady=!0}),[4,this._get("/api/v5/devices")];case 1:return(e=n.sent()).data&&e.data.devices?[2,e.data.devices]:[2,[]]}})})},e.prototype.getUsers=function(){return this._get("/api/v5/users")},e.prototype.getFieldValues=function(e){var t="SELECT DISTINCT "+e+" FROM all_devices ORDER BY "+e+" ASC";return this.invokeSQLQuery(t)},e.prototype.getCustomDimensions=function(){return o(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this._get("/api/v5/customdimensions")];case 1:return[2,e.sent().data.customDimensions]}})})},e.prototype.getSavedFilters=function(){return o(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this._get("/api/v5/saved-filters")];case 1:return[2,e.sent().data]}})})},e.prototype.invokeTopXDataQuery=function(e){var t={queries:[{query:e,bucketIndex:0}]};return this._post("/api/v5/query/topXdata",t)},e.prototype.invokeSQLQuery=function(e){var t={query:e};return this._post("/api/v5/query/sql",t)},e.prototype._get=function(e){return o(this,void 0,void 0,function(){var t=this;return s(this,function(n){switch(n.label){case 0:return void 0!==this.region?[3,2]:[4,this.backendSrv.get("/api/datasources").then(function(e){t.setRegion(Object(a.a)(e))})];case 1:n.sent(),n.label=2;case 2:return[2,this.backendSrv.datasourceRequest({method:"GET",url:this.baseUrl+"/"+this.region+e}).catch(function(e){return console.error(e),e.err?Promise.reject(e.err):Promise.reject(e)})]}})})},e.prototype._post=function(e,t){return o(this,void 0,void 0,function(){var n=this;return s(this,function(i){switch(i.label){case 0:return void 0!==this.region?[3,2]:[4,this.backendSrv.get("/api/datasources").then(function(e){n.setRegion(Object(a.a)(e))})];case 1:i.sent(),i.label=2;case 2:return[2,this.backendSrv.datasourceRequest({method:"POST",url:this.baseUrl+"/"+this.region+e,data:t}).then(function(e){return e.data?e.data:[]}).catch(function(e){return console.error(e),e.err?Promise.reject(e.err):Promise.reject(e)})]}})})},e}();r.a.module("grafana.services").service("kentikAPISrv",c)},function(e,t){e.exports=n},function(e,t){e.exports=i},function(e,t){e.exports='<h3 class="page-heading">Enter your Kentik Credentials</h3>\n<div class="gf-form-group">\n  <div class="gf-form" ng-if="ctrl.apiError && ctrl.appModel.enabled">\n    <i class="fa fa-exclamation-circle" style="color: #ca4333;">\n      <span>Invalid API credentials. This app wont work until the credentials are updated.</span>\n    </i>\n  </div>\n  <div class="gf-form">\n    <label class="gf-form-label width-10">Email</label>\n    \x3c!-- Hidden input to stop chrome from autofilling --\x3e\n    <input style="display:none;" type="text" name="somefakename" />\n    <input type="text" class="gf-form-input max-width-20" ng-model=\'ctrl.appModel.jsonData.email\' placeholder="email" />\n  </div>\n\n  <div class="gf-form">\n    <label class="gf-form-label width-10">Region\n      <tip>US and EU regions are available. Default is US</tip>\n    </label>\n    <div class="gf-form-select-wrapper">\n      <select class="gf-form-input" ng-model="ctrl.appModel.jsonData.region" ng-options="f.value as f.text for f in ctrl.regionTypes"></select>\n    </div>\n  </div>\n\n  <div class="gf-form-inline">\n    <div class="gf-form kentik-inline-field-margin--right">\n      <label class="gf-form-label width-10">Api Token</label>\n      \x3c!-- Hidden input to stop chrome from autofilling --\x3e\n      <input style="display:none;" type="password" name="anotherfakename" />\n      <input type="password" class="gf-form-input max-width-20" ng-model="ctrl.appModel.secureJsonData.token" ng-if="!ctrl.appModel.jsonData.tokenSet"\n        placeholder="api token" />\n      <div ng-if="ctrl.appModel.jsonData.tokenSet" class="gf-form">\n        <input type="text" class="gf-form-input max-width-20" disabled="disabled" value="saved" />\n        <div ng-if="ctrl.appModel.enabled">\n          <i class="fa fa-exclamation-triangle" ng-if="!ctrl.apiValidated" alt="Could not validate api Token."></i>\n        </div>\n      </div>\n    </div>\n    <div class="gf-form">\n      <a class="btn btn-danger btn-small" href="#" ng-click="ctrl.reset()" ng-if="ctrl.appModel.jsonData.tokenSet">reset</a>\n    </div>\n  </div>\n</div>\n\n<div ng-if="ctrl.appModel.jsonData.tokenSet" class="kentik-enabled-box">\n  <i class="icon-gf icon-gf-check icon-gf-check kentik-icon-success"></i> Successfully enabled. <strong>Next up:\n  </strong><a href="dashboard/db/kentik-home" class="external-link">Go to Kentik Home Dashboard</a>\n</div>\n'},function(e,t,n){"use strict";n.r(t),n.d(t,"ConfigCtrl",function(){return p});var i=n(7),r=n.n(i),a=n(4),o=n(3),s=n(0),c=function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},d=function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},p=function(){function e(e,t,n){this.backendSrv=n,this.regionTypes=[{value:"default",text:"US (default)"},{value:"eu",text:"EU"}],this.appEditCtrl.setPreUpdateHook(this.preUpdate.bind(this)),this.appEditCtrl.setPostUpdateHook(this.postUpdate.bind(this)),this.appModel.jsonData||(this.appModel.jsonData={}),this.appModel.secureJsonData||(this.appModel.secureJsonData={}),void 0===this.appModel.jsonData.region&&(this.appModel.jsonData.region="default"),this.apiValidated=!1,this.apiError=!1,this.kentik=new a.a(this.backendSrv),this.kentik.setRegion(this.appModel.jsonData.region),this.appModel.enabled&&this.appModel.jsonData.tokenSet&&this.validateApiConnection()}return e.$inject=["$scope","$injector","backendSrv"],e.prototype.preUpdate=function(){return this.appModel.secureJsonData.token&&(this.appModel.jsonData.tokenSet=!0),this.initDatasource()},e.prototype.postUpdate=function(){return c(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return this.appModel.enabled?[4,this.validateApiConnection()]:[2,Promise.resolve()];case 1:return e.sent(),[4,this.appEditCtrl.importDashboards()];case 2:return e.sent(),[2,{url:"dashboard/db/kentik-home",message:"Kentik Connect Pro app installed!"}]}})})},e.prototype.validateApiConnection=function(){return c(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.kentik.getUsers()];case 1:return t.sent(),this.apiValidated=!0,[3,3];case 2:return e=t.sent(),Object(o.a)(e),this.apiValidated=!1,this.apiError=!0,[3,3];case 3:return[2]}})})},e.prototype.reset=function(){this.appModel.jsonData.email="",this.appModel.jsonData.tokenSet=!1,this.appModel.jsonData.region="default",this.appModel.secureJsonData={},this.apiValidated=!1},e.prototype.initDatasource=function(){var e=this,t=this;return t.backendSrv.get("/api/datasources").then(function(n){var i=!1,r=!1,a=NaN;s.forEach(n,function(t){if("kentik-ds"===t.type)return i=!0,a=t.id,void(t.jsonData.region!==e.appModel.jsonData.region&&(r=!0))});var o=[];if(!i||r){var c={name:"kentik",type:"kentik-ds",access:"proxy",jsonData:t.appModel.jsonData};r?o.push(t.backendSrv.put("/api/datasources/"+a,c)):o.push(t.backendSrv.post("/api/datasources",c))}return Promise.all(o)})},e}();p.template=r.a},function(e,t,n){"use strict";n.r(t),n.d(t,"DeviceListCtrl",function(){return a});var i=n(4),r=n(3),a=function(){function e(e,t,n,r){this.$scope=e,this.$location=n,this.backendSrv=r,this.devices=[],this.pageReady=!1,this.kentik=new i.a(this.backendSrv),this.getDevices()}return e.$inject=["$scope","$injector","$location","backendSrv"],e.prototype.getDevices=function(){var e=this;try{this.kentik.getDevices().then(function(t){e.devices=t,e.pageReady=!0,e.$scope.$apply()})}catch(e){Object(r.a)(e)}},e.prototype.refresh=function(){this.getDevices()},e.prototype.gotoDashboard=function(e){this.$location.path("/dashboard/db/kentik-top-talkers").search({"var-device":e.device_name})},e.prototype.gotoDeviceDetail=function(e){this.$location.url("/plugins/kentik-app/page/device-details?device="+e.id)},e}();a.templateUrl="components/device_list.html"},function(e,t,n){"use strict";n.r(t),n.d(t,"DeviceDetailsCtrl",function(){return o});var i=n(4),r=n(3),a=n(1),o=function(){function e(e,t,n,r,o){var s=this;this.$location=n,this.backendSrv=r,this.alertSrv=o,this.device={},this.deviceDTO={},this.pageReady=!1,this.region="default",r.get("/api/datasources").then(function(e){s.region=Object(a.a)(e),s.kentik=new i.a(s.backendSrv),s.kentik.setRegion(s.region),s.getDevice(n.search().device)})}return e.$inject=["$scope","$injector","$location","backendSrv","alertSrv"],e.prototype.addIP=function(){this.otherIps.push({ip:""})},e.prototype.removeIP=function(e){this.otherIps.splice(e,1)},e.prototype.getDevice=function(e){var t=this;this.backendSrv.get("/api/plugin-proxy/kentik-app/"+this.region+"/api/v5/device/"+e).then(function(e){t.device=e.device,t.updateDeviceDTO(),t.pageReady=!0})},e.prototype.gotoDashboard=function(e){this.$location.url("/dashboard/db/kentik-top-talkers?var-device="+e)},e.prototype.updateDeviceDTO=function(){this.deviceDTO={device_id:this.device.id,device_name:this.device.device_name,device_type:this.device.device_type,device_description:this.device.device_description,device_flow_type:this.device.device_flow_type,device_sample_rate:parseInt(this.device.device_sample_rate,10),minimize_snmp:this.device.minimize_snmp,device_snmp_ip:this.device.device_snmp_ip,device_snmp_community:this.device.device_snmp_community,device_bgp_type:this.device.device_bgp_type,device_bgp_password:this.device.device_bgp_password,device_bgp_neighbor_ip:this.device.device_bgp_neighbor_ip,device_bgp_neighbor_asn:parseInt(this.device.device_bgp_neighbor_asn,10)}},e.prototype.update=function(){var e=this;this.deviceDTO.device_snmp_ip||delete this.deviceDTO.device_snmp_ip,this.deviceDTO.device_snmp_community||delete this.deviceDTO.device_snmp_community;var t={device:this.deviceDTO};this.backendSrv.put("/api/plugin-proxy/kentik-app/"+this.region+"/api/v5/device/"+this.deviceDTO.device_id,t).then(function(t){if(!("err"in t))return Object(r.b)("Device Updated.",e.deviceDTO.device_name,"success"),e.getDevice(e.deviceDTO.device_id);Object(r.b)("Device Update failed.",t.err,"error")},function(e){return"error"in e.data?void Object(r.b)("Device Update failed.",e.data.error,"error"):void Object(r.b)("Device Update failed.",e,"error")})},e}();o.templateUrl="components/device_details.html"},function(e,t,n){"use strict";n.r(t),n.d(t,"AddDeviceCtrl",function(){return c});var i=n(0),r=n(2),a=n.n(r),o=n(1),s={device_name:"",device_type:"router",device_description:"",device_flow_type:"sflow",device_sample_rate:5,sending_ips:"",minimize_snmp:!1,device_bgp_type:"none",device_snmp_ip:"",device_snmp_community:""},c=function(){function e(e,t,n,i,r){var c=this;this.$location=n,this.backendSrv=i,this.alertSrv=r,this.device=a.a.copy(s),this.sendingIps=[{ip:""}],this.region="default",i.get("/api/datasources").then(function(e){c.region=Object(o.a)(e)})}return e.$inject=["$scope","$injector","$location","backendSrv","alertSrv"],e.prototype.addIP=function(){this.sendingIps.push({ip:""})},e.prototype.removeIP=function(e){this.sendingIps.splice(e,1)},e.prototype.addDevice=function(){var e=this,t=[];i.forEach(this.sendingIps,function(e){t.push(e.ip)}),this.device.sending_ips=t.join(),this.backendSrv.post("/api/plugin-proxy/kentik-app/"+this.region+"/api/v5/device",this.device).then(function(t){"err"in t?e.alertSrv.set("Device Add failed.",t.err,"error"):e.$location.url("/plugins/kentik-app/page/device-list")})},e}();c.templateUrl="components/add_device.html"},,,function(e,t,n){"use strict";n.r(t);n(18),n(23);var i=n(8);n.d(t,"ConfigCtrl",function(){return i.ConfigCtrl});var r=n(9);n.d(t,"DeviceListCtrl",function(){return r.DeviceListCtrl});var a=n(10);n.d(t,"DeviceDetailsCtrl",function(){return a.DeviceDetailsCtrl});var o=n(11);n.d(t,"AddDeviceCtrl",function(){return o.AddDeviceCtrl});var s=n(6);Object(s.loadPluginCss)({dark:"plugins/kentik-app/css/kentik.dark.css",light:"plugins/kentik-app/css/kentik.light.css"})},,,,function(e,t){e.exports={panelHorizontalPadding:"10",panelVerticalPadding:"5"}},,,,,function(e,t){e.exports={panelHorizontalPadding:"10",panelVerticalPadding:"5"}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibG9kYXNoXCIiLCJ3ZWJwYWNrOi8vLy4vZGF0YXNvdXJjZS9yZWdpb25IZWxwZXIudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYW5ndWxhclwiIiwid2VicGFjazovLy8uL2RhdGFzb3VyY2UvYWxlcnRIZWxwZXIudHMiLCJ3ZWJwYWNrOi8vLy4vZGF0YXNvdXJjZS9rZW50aWtBUEkudHMiLCJ3ZWJwYWNrOi8vLy4vY29uZmlnL2NvbmZpZy50cyIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL2RldmljZV9saXN0LnRzIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvZGV2aWNlX2RldGFpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9hZGRfZGV2aWNlLnRzIiwid2VicGFjazovLy8uL21vZHVsZS50cyIsIndlYnBhY2s6Ly8vLi9zYXNzL2tlbnRpay5kYXJrLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vc2Fzcy9rZW50aWsubGlnaHQuc2NzcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzBfXyIsImdldFJlZ2lvbiIsImRhdGFzb3VyY2VzIiwiYVJlZ2lvbiIsImluZGV4IiwidHlwZSIsImpzb25EYXRhIiwicmVnaW9uIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzJfXyIsInNob3dBbGVydCIsInNob3dDdXN0b21BbGVydCIsImdyYWZhbmFfYXBwX2NvcmVfY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwibG9kYXNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJlcnJvciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiZGF0YSIsImVyciIsImVtaXQiLCJleGNlcHRpb25EYXRhIiwiZXhjZXB0aW9uVHlwZSIsImVyck1lc3NhZ2UiLCJLZW50aWtBUEkiLCJiYWNrZW5kU3J2IiwiX3RoaXMiLCJ0aGlzIiwiYXBpUmVhZHkiLCJiYXNlVXJsIiwidGhlbiIsImFsbERTIiwiX3JlZ2lvbkhlbHBlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwic2V0UmVnaW9uIiwiJGluamVjdCIsInJlc3AiLCJfYSIsInNlbnQiLCJkZXZpY2VzIiwiZ2V0VXNlcnMiLCJfZ2V0IiwiZ2V0RmllbGRWYWx1ZXMiLCJmaWVsZCIsInF1ZXJ5IiwiaW52b2tlU1FMUXVlcnkiLCJpbnZva2VUb3BYRGF0YVF1ZXJ5Iiwia2VudGlrVjVRdWVyeSIsInF1ZXJpZXMiLCJidWNrZXRJbmRleCIsIl9wb3N0IiwiZGF0YXNvdXJjZVJlcXVlc3QiLCJtZXRob2QiLCJ1cmwiLCJjYXRjaCIsImNvbnNvbGUiLCJQcm9taXNlIiwicmVqZWN0IiwicmVzcG9uc2UiLCJLZW50aWtDb25maWdDdHJsIiwiJHNjb3BlIiwiJGluamVjdG9yIiwicmVnaW9uVHlwZXMiLCJ0ZXh0IiwiYXBwRWRpdEN0cmwiLCJzZXRQcmVVcGRhdGVIb29rIiwicHJlVXBkYXRlIiwic2V0UG9zdFVwZGF0ZUhvb2siLCJwb3N0VXBkYXRlIiwiYXBwTW9kZWwiLCJzZWN1cmVKc29uRGF0YSIsImFwaVZhbGlkYXRlZCIsImFwaUVycm9yIiwia2VudGlrIiwiX2RhdGFzb3VyY2Vfa2VudGlrQVBJX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJlbmFibGVkIiwidG9rZW5TZXQiLCJ2YWxpZGF0ZUFwaUNvbm5lY3Rpb24iLCJ0b2tlbiIsImluaXREYXRhc291cmNlIiwibGFiZWwiLCJyZXNvbHZlIiwiaW1wb3J0RGFzaGJvYXJkcyIsImVfMSIsIl9kYXRhc291cmNlX2FsZXJ0SGVscGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJyZXNldCIsImVtYWlsIiwic2VsZiIsInJlc3VsdHMiLCJmb3VuZEtlbnRpa0RTIiwidXBkYXRlS2VudGlrRFMiLCJkc0lEIiwiTmFOIiwiZHMiLCJpZCIsInByb21pc2VzIiwiYWNjZXNzIiwicHVzaCIsInB1dCIsInBvc3QiLCJhbGwiLCJEZXZpY2VMaXN0Q3RybCIsIl9kYXRhc291cmNlX2tlbnRpa0FQSV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiX2RhdGFzb3VyY2VfYWxlcnRIZWxwZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsIiRsb2NhdGlvbiIsInBhZ2VSZWFkeSIsImdldERldmljZXMiLCIkYXBwbHkiLCJlIiwicmVmcmVzaCIsImdvdG9EYXNoYm9hcmQiLCJkZXZpY2UiLCJwYXRoIiwic2VhcmNoIiwidmFyLWRldmljZSIsImRldmljZV9uYW1lIiwiZ290b0RldmljZURldGFpbCIsIkRldmljZURldGFpbHNDdHJsIiwiX2RhdGFzb3VyY2VfcmVnaW9uSGVscGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJhbGVydFNydiIsImRldmljZURUTyIsImdldERldmljZSIsImFkZElQIiwib3RoZXJJcHMiLCJpcCIsInJlbW92ZUlQIiwic3BsaWNlIiwiZGV2aWNlSWQiLCJ1cGRhdGVEZXZpY2VEVE8iLCJkZXZpY2VfaWQiLCJkZXZpY2VfdHlwZSIsImRldmljZV9kZXNjcmlwdGlvbiIsImRldmljZV9mbG93X3R5cGUiLCJkZXZpY2Vfc2FtcGxlX3JhdGUiLCJwYXJzZUludCIsIm1pbmltaXplX3NubXAiLCJkZXZpY2Vfc25tcF9pcCIsImRldmljZV9zbm1wX2NvbW11bml0eSIsImRldmljZV9iZ3BfdHlwZSIsImRldmljZV9iZ3BfcGFzc3dvcmQiLCJkZXZpY2VfYmdwX25laWdoYm9yX2lwIiwiZGV2aWNlX2JncF9uZWlnaGJvcl9hc24iLCJ1cGRhdGUiLCJBZGREZXZpY2VDdHJsIiwibG9kYXNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJhbmd1bGFyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJhbmd1bGFyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCIsImRlZmF1bHRzIiwic2VuZGluZ19pcHMiLCJhIiwiY29weSIsInNlbmRpbmdJcHMiLCJhZGREZXZpY2UiLCJpcHMiLCJqb2luIiwic2V0IiwiX2NvbmZpZ19jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyIsIl9jb21wb25lbnRzX2RldmljZV9saXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18iLCJfY29tcG9uZW50c19kZXZpY2VfZGV0YWlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fIiwiX2NvbXBvbmVudHNfYWRkX2RldmljZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fIiwiZ3JhZmFuYV9hcHBfcGx1Z2luc19zZGtfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXyJdLCJtYXBwaW5ncyI6Im1HQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUEw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LENBQUFxRCxjQVpvRkcsUUFBQSxVQUFhLGlEQWdCbEc0RyxFQUFDbEosVUFBQTZILE1BQUEsV0FFRDlGLEtBQUEySCxXQUFBdEQsS0FBQSxDQUFBMkIsR0FBQSxRQUNjL0gsVUFBR2dJLFNBQUEsU0FBQXhILEdBQ2Z1QixLQUFBMkgsV0FBQXpCLE9BQUF6SCxFQUFBLE1BRUdSLFVBQUEySixVQUFBLFdBQ0gsSUFBSTdILEVBQVFDLEtBQ1I2SCxFQUFDLEtBQ2dCLFFBQUE3SCxLQUFBMkgsV0FBQSxTQUFBM0IsS0FDakIzQixLQUFJMkIsRUFBQ0Esa0JBQ0F3QixZQUFBSyxFQUFBQyx1QkFDQXZELEtBQUEsZ0NBQWN2RSxLQUFBcEIsT0FBd0MsaUJBQUFvQixLQUFBbUYsUUFBQWhGLEtBQUEsU0FBQUssR0FDNUQsUUFBQUEsRUFDQVQsRUFBQTRGLFNBQUFvQyxJQUFBLHFCQUFBdkgsRUFBQWhCLElBQUEsU0FFTk8sRUFBQTZFLFVBQUFuRCxJQUFBLDZDQWhDZ0QsZ0RDeEJqRCxVQUFBckYsRUFBQXlDLEVBQUE1QyxHQUFBLGFBQUFBLEVBQUFrQixFQUFBMEIsR0FBQTVDLEVBQUEsSUFBQUEsRUFBQSxRQUFBK0wsRUFBQS9MLEVBQUEsR0FBQUEsRUFBQVUsRUFBQWtDLEVBQUEsK0JBQUFtSixFQUFBLGlCQUFBQyxFQUFBaE0sRUFBQSxHQUFBQSxFQUFBVSxFQUFBa0MsRUFBQSxtQ0FBQW9KLEVBQUEscUJBQUFDLEVBQUFqTSxFQUFBLElBQUFBLEVBQUFVLEVBQUFrQyxFQUFBLHNDQUFBcUosRUFBQSxvQkFBaUMsSUFBQUMsRUFBQWxNLEVBQUEsSUFDQ0EsRUFBQVUsRUFBQWtDLEVBQUEsa0NBQUFzSixFQUFBLGdCQUd3QixJQUFBQyxFQUFBbk0sRUFBQSw4SENKMUQsQ0FDQSxtRkNEQSxDQUNBIiwiZmlsZSI6Ii4vbW9kdWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDE0KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fOyIsIiAvKipcbiAgKiBSZXR1cm5zIHRoZSByZWdpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBrZW50aWsta3NcblxuICAqIEBwYXJhbSBkYXRhc291cmNlcyBcbiAgKi9cbmZ1bmN0aW9uIGdldFJlZ2lvbihkYXRhc291cmNlczogYW55KTogc3RyaW5nIHtcbiAgbGV0IGFSZWdpb24gPSBcImRlZmF1bHRcIjtcbiAgZm9yICh2YXIgaW5kZXggaW4gZGF0YXNvdXJjZXMpIHtcbiAgICBpZiAoZGF0YXNvdXJjZXNbaW5kZXhdLnR5cGUgPT09IFwia2VudGlrLWRzXCIpIHtcbiAgICAgIC8vY29uc29sZS5sb2coXCJnZXRSZWdpb246IGZvdW5kIHJlZ2lvbjogXCIgK2RhdGFzb3VyY2VzW2luZGV4XS5qc29uRGF0YS5yZWdpb24pO1xuICAgICAgLy9jb25zb2xlLmxvZyhhbGxEU1tpbmRleF0pO1xuICAgICAgYVJlZ2lvbiA9IGRhdGFzb3VyY2VzW2luZGV4XS5qc29uRGF0YS5yZWdpb247XG4gICAgICByZXR1cm4gYVJlZ2lvbjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFSZWdpb247XG59XG5cbmV4cG9ydCB7IGdldFJlZ2lvbiB9XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzJfXzsiLCJpbXBvcnQgeyBhcHBFdmVudHMgfSBmcm9tICdncmFmYW5hL2FwcC9jb3JlL2NvcmUnO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuXG5mdW5jdGlvbiBzaG93QWxlcnQoZXJyb3IpIHtcbiAgbGV0IG1lc3NhZ2UgPSAnJztcbiAgbWVzc2FnZSArPSBlcnJvci5zdGF0dXMgPyBgKCR7ZXJyb3Iuc3RhdHVzfSkgYCA6ICcnO1xuICBtZXNzYWdlICs9IGVycm9yLnN0YXR1c1RleHQgPyBlcnJvci5zdGF0dXNUZXh0ICsgJzogJyA6ICcnO1xuICBpZiAoZXJyb3IuZGF0YSAmJiBlcnJvci5kYXRhLmVycm9yKSB7XG4gICAgbWVzc2FnZSArPSBlcnJvci5kYXRhLmVycm9yO1xuICB9IGVsc2UgaWYgKGVycm9yLmVycikge1xuICAgIG1lc3NhZ2UgKz0gZXJyb3IuZXJyO1xuICB9IGVsc2UgaWYgKF8uaXNTdHJpbmcoZXJyb3IpKSB7XG4gICAgbWVzc2FnZSArPSBlcnJvcjtcbiAgfVxuXG4gIGFwcEV2ZW50cy5lbWl0KCdhbGVydC1lcnJvcicsIFtcIkNhbid0IGNvbm5lY3QgdG8gS2VudGlrIEFQSVwiLCBtZXNzYWdlXSk7XG59XG5cbmZ1bmN0aW9uIHNob3dDdXN0b21BbGVydChtZXNzYWdlLCBleGNlcHRpb25EYXRhLCBleGNlcHRpb25UeXBlKSB7XG4gIGxldCBlcnJNZXNzYWdlID0gJyc7XG4gIGVyck1lc3NhZ2UgKz0gZXhjZXB0aW9uRGF0YS5zdGF0dXMgPyBgKCR7ZXhjZXB0aW9uRGF0YS5zdGF0dXN9KSBgIDogJyc7XG4gIGVyck1lc3NhZ2UgKz0gZXhjZXB0aW9uRGF0YS5zdGF0dXNUZXh0ID8gZXhjZXB0aW9uRGF0YS5zdGF0dXNUZXh0ICsgJzogJyA6ICcnO1xuICBpZiAoZXhjZXB0aW9uRGF0YS5kYXRhICYmIGV4Y2VwdGlvbkRhdGEuZGF0YS5lcnJvcikge1xuICAgIGVyck1lc3NhZ2UgKz0gZXhjZXB0aW9uRGF0YS5kYXRhLmVycm9yO1xuICB9IGVsc2UgaWYgKGV4Y2VwdGlvbkRhdGEuZXJyKSB7XG4gICAgZXJyTWVzc2FnZSArPSBleGNlcHRpb25EYXRhLmVycjtcbiAgfSBlbHNlIGlmIChfLmlzU3RyaW5nKGV4Y2VwdGlvbkRhdGEpKSB7XG4gICAgZXJyTWVzc2FnZSArPSBleGNlcHRpb25EYXRhO1xuICB9XG4gIGFwcEV2ZW50cy5lbWl0KGBhbGVydC0ke2V4Y2VwdGlvblR5cGV9YCwgW21lc3NhZ2UsIGVyck1lc3NhZ2VdKTtcbn1cblxuZXhwb3J0IHsgc2hvd0FsZXJ0LCBzaG93Q3VzdG9tQWxlcnQgfTtcbiIsImltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgZ2V0UmVnaW9uIH0gZnJvbSBcIi4vcmVnaW9uSGVscGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBLZW50aWtBUEkge1xuICBiYXNlVXJsOiBzdHJpbmc7XG4gIHJlZ2lvbjogc3RyaW5nO1xuICBhcGlSZWFkeTogYm9vbGVhbjtcbiAgLyoqIEBuZ0luamVjdCAqL1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgYmFja2VuZFNydjogYW55KSB7XG4gICAgdGhpcy5hcGlSZWFkeSA9IGZhbHNlO1xuICAgIHRoaXMuYmFzZVVybCA9IFwiL2FwaS9wbHVnaW4tcHJveHkva2VudGlrLWFwcFwiO1xuICAgIC8vIGdldCByZWdpb24gZnJvbSBkYXRhc291cmNlXG4gICAgYmFja2VuZFNydi5nZXQoJy9hcGkvZGF0YXNvdXJjZXMnKS50aGVuKCAoYWxsRFM6IGFueSkgPT4ge1xuICAgICAgdGhpcy5yZWdpb24gPSBnZXRSZWdpb24oYWxsRFMpO1xuICAgICAgdGhpcy5zZXRSZWdpb24odGhpcy5yZWdpb24pO1xuICAgICAgdGhpcy5hcGlSZWFkeSA9IHRydWU7XG4gICAgfSk7XG4gIH1cblxuICBzZXRSZWdpb24ocmVnaW9uOiBzdHJpbmcpIHtcbiAgICB0aGlzLnJlZ2lvbiA9IHJlZ2lvbjtcbiAgfVxuXG4gIGFzeW5jIGdldERldmljZXMoKSB7XG4gICAgdGhpcy5iYWNrZW5kU3J2LmdldCgnL2FwaS9kYXRhc291cmNlcycpLnRoZW4oIChhbGxEUzogYW55KSA9PiB7XG4gICAgICB0aGlzLnJlZ2lvbiA9IGdldFJlZ2lvbihhbGxEUyk7XG4gICAgICB0aGlzLnNldFJlZ2lvbih0aGlzLnJlZ2lvbik7XG4gICAgICB0aGlzLmFwaVJlYWR5ID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB0aGlzLl9nZXQoJy9hcGkvdjUvZGV2aWNlcycpO1xuXG4gICAgaWYgKHJlc3AuZGF0YSAmJiByZXNwLmRhdGEuZGV2aWNlcykge1xuICAgICAgcmV0dXJuIHJlc3AuZGF0YS5kZXZpY2VzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgZ2V0VXNlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldCgnL2FwaS92NS91c2VycycpO1xuICB9XG5cbiAgZ2V0RmllbGRWYWx1ZXMoZmllbGQ6IHN0cmluZykge1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFNFTEVDVCBESVNUSU5DVCAke2ZpZWxkfSBGUk9NIGFsbF9kZXZpY2VzIE9SREVSIEJZICR7ZmllbGR9IEFTQ2A7XG4gICAgcmV0dXJuIHRoaXMuaW52b2tlU1FMUXVlcnkocXVlcnkpO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q3VzdG9tRGltZW5zaW9ucygpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5fZ2V0KCcvYXBpL3Y1L2N1c3RvbWRpbWVuc2lvbnMnKTtcbiAgICByZXR1cm4gZGF0YS5kYXRhLmN1c3RvbURpbWVuc2lvbnM7XG4gIH1cblxuICBhc3luYyBnZXRTYXZlZEZpbHRlcnMoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuX2dldCgnL2FwaS92NS9zYXZlZC1maWx0ZXJzJyk7XG4gICAgcmV0dXJuIGRhdGEuZGF0YTtcbiAgfVxuXG4gIGludm9rZVRvcFhEYXRhUXVlcnkocXVlcnk6IGFueSkge1xuICAgIGNvbnN0IGtlbnRpa1Y1UXVlcnkgPSB7XG4gICAgICBxdWVyaWVzOiBbeyBxdWVyeTogcXVlcnksIGJ1Y2tldEluZGV4OiAwIH1dLFxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpcy5fcG9zdCgnL2FwaS92NS9xdWVyeS90b3BYZGF0YScsIGtlbnRpa1Y1UXVlcnkpO1xuICB9XG5cbiAgaW52b2tlU1FMUXVlcnkocXVlcnk6IGFueSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBxdWVyeTogcXVlcnksXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLl9wb3N0KCcvYXBpL3Y1L3F1ZXJ5L3NxbCcsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgX2dldCh1cmw6IHN0cmluZykge1xuICAgIC8vIGlmIHRoZSByZWdpb24gaXMgbm90IHNldCwgZ2V0IGl0IGZyb20gdGhlIGRhdGFzb3VyY2VcbiAgICBpZiAodHlwZW9mIHRoaXMucmVnaW9uID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy9jb25zb2xlLmxvZyhcIl9nZXQ6IHRoaXMucmVnaW9uIFVOREVGSU5FRCwgZmV0Y2hpbmdcIik7XG4gICAgICBhd2FpdCB0aGlzLmJhY2tlbmRTcnYuZ2V0KCcvYXBpL2RhdGFzb3VyY2VzJykudGhlbiggKGFsbERTOiBhbnkpID0+IHtcbiAgICAgICAgdGhpcy5zZXRSZWdpb24oZ2V0UmVnaW9uKGFsbERTKSk7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJrZW50aWtBUEk6IF9nZXQ6IEZFVENIRUQgcmVnaW9uIFwiICsgdGhpcy5yZWdpb24pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmJhY2tlbmRTcnZcbiAgICAgIC5kYXRhc291cmNlUmVxdWVzdCh7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIHVybDogdGhpcy5iYXNlVXJsICsgXCIvXCIgKyB0aGlzLnJlZ2lvbiArIHVybCxcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgaWYgKGVycm9yLmVycikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvci5lcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgX3Bvc3QodXJsOiBzdHJpbmcsIGRhdGE6IGFueSkge1xuICAgIC8vIGlmIHRoZSByZWdpb24gaXMgbm90IHNldCwgZ2V0IGl0IGZyb20gdGhlIGRhdGFzb3VyY2VcbiAgICBpZiAodHlwZW9mIHRoaXMucmVnaW9uID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy9jb25zb2xlLmxvZyhcImtlbnRpa0FQSS5fcG9zdDogdGhpcy5yZWdpb24gVU5ERUZJTkVELCBmZXRjaGluZ1wiKTtcbiAgICAgIGF3YWl0IHRoaXMuYmFja2VuZFNydi5nZXQoJy9hcGkvZGF0YXNvdXJjZXMnKS50aGVuKCAoYWxsRFM6IGFueSkgPT4ge1xuICAgICAgICB0aGlzLnNldFJlZ2lvbihnZXRSZWdpb24oYWxsRFMpKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcImtlbnRpa0FQSS5fcG9zdDogRkVUQ0hFRCByZWdpb24gXCIgKyB0aGlzLnJlZ2lvbik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYmFja2VuZFNydlxuICAgICAgLmRhdGFzb3VyY2VSZXF1ZXN0KHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIHVybDogdGhpcy5iYXNlVXJsICsgXCIvXCIgKyB0aGlzLnJlZ2lvbiArIHVybCxcbiAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIGlmIChlcnJvci5lcnIpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IuZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxufVxuXG5hbmd1bGFyLm1vZHVsZSgnZ3JhZmFuYS5zZXJ2aWNlcycpLnNlcnZpY2UoJ2tlbnRpa0FQSVNydicsIEtlbnRpa0FQSSk7XG4iLCJpbXBvcnQgY29uZmlnVGVtcGxhdGUgZnJvbSAnLi9jb25maWcuaHRtbCc7XG5pbXBvcnQgeyBLZW50aWtBUEkgfSBmcm9tICcuLi9kYXRhc291cmNlL2tlbnRpa0FQSSc7XG5pbXBvcnQgeyBzaG93QWxlcnQgfSBmcm9tIFwiLi4vZGF0YXNvdXJjZS9hbGVydEhlbHBlclwiO1xuXG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5cbmNsYXNzIEtlbnRpa0NvbmZpZ0N0cmwge1xuICBhcHBFZGl0Q3RybDogYW55O1xuICBhcHBNb2RlbDogYW55O1xuICBhcGlWYWxpZGF0ZWQ6IGJvb2xlYW47XG4gIGFwaUVycm9yOiBib29sZWFuO1xuICBrZW50aWs6IEtlbnRpa0FQSTtcbiAgc3RhdGljIHRlbXBsYXRlOiBhbnk7XG4gIHJlZ2lvblR5cGVzID0gW1xuICAgIHsgdmFsdWU6IFwiZGVmYXVsdFwiLCB0ZXh0OiBcIlVTIChkZWZhdWx0KVwiIH0sXG4gICAgeyB2YWx1ZTogXCJldVwiLCB0ZXh0OiBcIkVVXCIgfVxuICBdO1xuXG4gIC8qKiBAbmdJbmplY3QgKi9cbiAgY29uc3RydWN0b3IoJHNjb3BlLCAkaW5qZWN0b3IsIHB1YmxpYyBiYWNrZW5kU3J2OiBhbnkpIHtcbiAgICB0aGlzLmFwcEVkaXRDdHJsLnNldFByZVVwZGF0ZUhvb2sodGhpcy5wcmVVcGRhdGUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5hcHBFZGl0Q3RybC5zZXRQb3N0VXBkYXRlSG9vayh0aGlzLnBvc3RVcGRhdGUuYmluZCh0aGlzKSk7XG5cbiAgICBpZiAoIXRoaXMuYXBwTW9kZWwuanNvbkRhdGEpIHtcbiAgICAgIHRoaXMuYXBwTW9kZWwuanNvbkRhdGEgPSB7fTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmFwcE1vZGVsLnNlY3VyZUpzb25EYXRhKSB7XG4gICAgICB0aGlzLmFwcE1vZGVsLnNlY3VyZUpzb25EYXRhID0ge307XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdGhpcy5hcHBNb2RlbC5qc29uRGF0YS5yZWdpb24gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmFwcE1vZGVsLmpzb25EYXRhLnJlZ2lvbiA9IFwiZGVmYXVsdFwiO1xuICAgIH1cbiAgICB0aGlzLmFwaVZhbGlkYXRlZCA9IGZhbHNlO1xuICAgIHRoaXMuYXBpRXJyb3IgPSBmYWxzZTtcbiAgICB0aGlzLmtlbnRpayA9IG5ldyBLZW50aWtBUEkodGhpcy5iYWNrZW5kU3J2KTtcbiAgICB0aGlzLmtlbnRpay5zZXRSZWdpb24odGhpcy5hcHBNb2RlbC5qc29uRGF0YS5yZWdpb24pO1xuICAgIGlmICh0aGlzLmFwcE1vZGVsLmVuYWJsZWQgJiYgdGhpcy5hcHBNb2RlbC5qc29uRGF0YS50b2tlblNldCkge1xuICAgICAgdGhpcy52YWxpZGF0ZUFwaUNvbm5lY3Rpb24oKTtcbiAgICB9XG4gIH1cblxuICBwcmVVcGRhdGUoKSB7XG4gICAgaWYgKHRoaXMuYXBwTW9kZWwuc2VjdXJlSnNvbkRhdGEudG9rZW4pIHtcbiAgICAgIHRoaXMuYXBwTW9kZWwuanNvbkRhdGEudG9rZW5TZXQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmluaXREYXRhc291cmNlKCk7XG4gIH1cblxuICBhc3luYyBwb3N0VXBkYXRlKCkge1xuICAgIGlmICghdGhpcy5hcHBNb2RlbC5lbmFibGVkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy52YWxpZGF0ZUFwaUNvbm5lY3Rpb24oKTsgICAgXG4gICAgYXdhaXQgdGhpcy5hcHBFZGl0Q3RybC5pbXBvcnREYXNoYm9hcmRzKCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdXJsOiAnZGFzaGJvYXJkL2RiL2tlbnRpay1ob21lJyxcbiAgICAgIG1lc3NhZ2U6ICdLZW50aWsgQ29ubmVjdCBQcm8gYXBwIGluc3RhbGxlZCEnLFxuICAgIH07XG4gIH1cblxuICAvLyBtYWtlIHN1cmUgdGhhdCB3ZSBjYW4gaGl0IHRoZSBLZW50aWsgQVBJLlxuICBhc3luYyB2YWxpZGF0ZUFwaUNvbm5lY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMua2VudGlrLmdldFVzZXJzKCk7XG4gICAgICB0aGlzLmFwaVZhbGlkYXRlZCA9IHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgc2hvd0FsZXJ0KGUpO1xuICAgICAgdGhpcy5hcGlWYWxpZGF0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuYXBpRXJyb3IgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuYXBwTW9kZWwuanNvbkRhdGEuZW1haWwgPSAnJztcbiAgICB0aGlzLmFwcE1vZGVsLmpzb25EYXRhLnRva2VuU2V0ID0gZmFsc2U7XG4gICAgdGhpcy5hcHBNb2RlbC5qc29uRGF0YS5yZWdpb24gPSBcImRlZmF1bHRcIjtcbiAgICB0aGlzLmFwcE1vZGVsLnNlY3VyZUpzb25EYXRhID0ge307XG4gICAgdGhpcy5hcGlWYWxpZGF0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGluaXREYXRhc291cmNlKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIC8vY2hlY2sgZm9yIGV4aXN0aW5nIGRhdGFzb3VyY2UuXG4gICAgcmV0dXJuIHNlbGYuYmFja2VuZFNydi5nZXQoJy9hcGkvZGF0YXNvdXJjZXMnKS50aGVuKHJlc3VsdHMgPT4ge1xuICAgICAgbGV0IGZvdW5kS2VudGlrRFMgPSBmYWxzZTtcbiAgICAgIGxldCB1cGRhdGVLZW50aWtEUyA9IGZhbHNlO1xuICAgICAgbGV0IGRzSUQgPSBOYU47XG4gICAgICBfLmZvckVhY2gocmVzdWx0cywgZHMgPT4ge1xuICAgICAgICAvLyB1c2UgdGhlIHR5cGVcbiAgICAgICAgaWYgKGRzLnR5cGUgPT09ICdrZW50aWstZHMnKSB7XG4gICAgICAgICAgZm91bmRLZW50aWtEUyA9IHRydWU7XG4gICAgICAgICAgZHNJRCA9IGRzLmlkO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiY29uZmlnLmluaXREYXRhc291cmNlOiBmb3VuZCBleGlzdGluZyBkYXRhc291cmNlIHdpdGggcmVnaW9uOiBcIiArIGRzLmpzb25EYXRhLnJlZ2lvbik7XG4gICAgICAgICAgaWYgKGRzLmpzb25EYXRhLnJlZ2lvbiAhPT0gdGhpcy5hcHBNb2RlbC5qc29uRGF0YS5yZWdpb24pIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJjb25maWcuaW5pdERhdGFzb3VyY2U6IG5lZWQgdG8gdXBkYXRlIGV4aXN0aW5nIGRhdGFzb3VyY2Ugd2l0aCByZWdpb246IFwiICsgdGhpcy5hcHBNb2RlbC5qc29uRGF0YS5yZWdpb24pO1xuICAgICAgICAgICAgdXBkYXRlS2VudGlrRFMgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcbiAgICAgIGlmICghZm91bmRLZW50aWtEUyB8fCB1cGRhdGVLZW50aWtEUykge1xuICAgICAgICAvLyBjcmVhdGUgZGF0YXNvdXJjZS5cbiAgICAgICAgY29uc3Qga2VudGlrID0ge1xuICAgICAgICAgIG5hbWU6ICdrZW50aWsnLFxuICAgICAgICAgIHR5cGU6ICdrZW50aWstZHMnLFxuICAgICAgICAgIGFjY2VzczogJ3Byb3h5JyxcbiAgICAgICAgICBqc29uRGF0YTogc2VsZi5hcHBNb2RlbC5qc29uRGF0YSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHVwZGF0ZUtlbnRpa0RTKSB7XG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhcIm9uZmlnLmluaXREYXRhc291cmNlOiB1cGRhdGluZyBkYXRhc291cmNlXCIpO1xuICAgICAgICAgIHByb21pc2VzLnB1c2goc2VsZi5iYWNrZW5kU3J2LnB1dChgL2FwaS9kYXRhc291cmNlcy8ke2RzSUR9YCwga2VudGlrKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhcImNvbmZpZy5pbml0RGF0YXNvdXJjZTogcmVhdGluZyBkYXRhc291cmNlXCIpO1xuICAgICAgICAgIHByb21pc2VzLnB1c2goc2VsZi5iYWNrZW5kU3J2LnBvc3QoJy9hcGkvZGF0YXNvdXJjZXMnLCBrZW50aWspKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gdXBkYXRlIHJlcXVpcmVzIGEgUFVUIHdpdGggdGhlIGlkXG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIH0pO1xuICB9XG59XG5cbktlbnRpa0NvbmZpZ0N0cmwudGVtcGxhdGUgPSBjb25maWdUZW1wbGF0ZTtcblxuZXhwb3J0IHsgS2VudGlrQ29uZmlnQ3RybCBhcyBDb25maWdDdHJsIH07XG4iLCJpbXBvcnQgeyBLZW50aWtBUEkgfSBmcm9tICcuLi9kYXRhc291cmNlL2tlbnRpa0FQSSc7XG5pbXBvcnQgeyBzaG93QWxlcnQgfSBmcm9tIFwiLi4vZGF0YXNvdXJjZS9hbGVydEhlbHBlclwiO1xuXG5pbXBvcnQgeyBnZXRSZWdpb24gfSBmcm9tIFwiLi4vZGF0YXNvdXJjZS9yZWdpb25IZWxwZXJcIjtcbmNsYXNzIERldmljZUxpc3RDdHJsIHtcbiAgc3RhdGljIHRlbXBsYXRlVXJsOiBzdHJpbmc7XG4gIGRldmljZXM6IGFueVtdO1xuICBwYWdlUmVhZHk6IGJvb2xlYW47XG4gIGtlbnRpazogS2VudGlrQVBJO1xuXG4gIC8qKiBAbmdJbmplY3QgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSAkc2NvcGUsICRpbmplY3RvciwgcHVibGljICRsb2NhdGlvbjogYW55LCBwdWJsaWMgYmFja2VuZFNydjogYW55KSB7XG4gICAgdGhpcy5kZXZpY2VzID0gW107XG4gICAgdGhpcy5wYWdlUmVhZHkgPSBmYWxzZTtcbiAgICB0aGlzLmtlbnRpayA9IG5ldyBLZW50aWtBUEkodGhpcy5iYWNrZW5kU3J2KTtcbiAgICB0aGlzLmdldERldmljZXMoKTtcbiAgfVxuXG4gIGdldERldmljZXMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMua2VudGlrLmdldERldmljZXMoKS50aGVuKChkZXZpY2VzKSA9PiB7XG4gICAgICAgIHRoaXMuZGV2aWNlcyA9IGRldmljZXM7XG4gICAgICAgIHRoaXMucGFnZVJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kc2NvcGUuJGFwcGx5KCk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBzaG93QWxlcnQoZSk7XG4gICAgfVxuICB9XG5cbiAgcmVmcmVzaCgpIHtcbiAgICB0aGlzLmdldERldmljZXMoKTtcbiAgfVxuXG4gIGdvdG9EYXNoYm9hcmQoZGV2aWNlKSB7XG4gICAgdGhpcy4kbG9jYXRpb24ucGF0aCgnL2Rhc2hib2FyZC9kYi9rZW50aWstdG9wLXRhbGtlcnMnKS5zZWFyY2goeyAndmFyLWRldmljZSc6IGRldmljZS5kZXZpY2VfbmFtZSB9KTtcbiAgfVxuXG4gIGdvdG9EZXZpY2VEZXRhaWwoZGV2aWNlKSB7XG4gICAgdGhpcy4kbG9jYXRpb24udXJsKCcvcGx1Z2lucy9rZW50aWstYXBwL3BhZ2UvZGV2aWNlLWRldGFpbHM/ZGV2aWNlPScgKyBkZXZpY2UuaWQpO1xuICB9XG59XG5cbkRldmljZUxpc3RDdHJsLnRlbXBsYXRlVXJsID0gJ2NvbXBvbmVudHMvZGV2aWNlX2xpc3QuaHRtbCc7XG5cbmV4cG9ydCB7IERldmljZUxpc3RDdHJsIH07XG4iLCJpbXBvcnQgeyBLZW50aWtBUEkgfSBmcm9tICcuLi9kYXRhc291cmNlL2tlbnRpa0FQSSc7XG5pbXBvcnQgeyBzaG93Q3VzdG9tQWxlcnQgfSBmcm9tIFwiLi4vZGF0YXNvdXJjZS9hbGVydEhlbHBlclwiO1xuaW1wb3J0IHsgZ2V0UmVnaW9uIH0gZnJvbSBcIi4uL2RhdGFzb3VyY2UvcmVnaW9uSGVscGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBEZXZpY2VEZXRhaWxzQ3RybCB7XG4gIHN0YXRpYyB0ZW1wbGF0ZVVybDogc3RyaW5nO1xuICBkZXZpY2U6IGFueTtcbiAgZGV2aWNlRFRPOiBhbnk7XG4gIHBhZ2VSZWFkeTogYm9vbGVhbjtcbiAgb3RoZXJJcHM6IGFueTtcbiAga2VudGlrOiBLZW50aWtBUEk7XG4gIHJlZ2lvbjogc3RyaW5nO1xuXG4gIC8qKiBAbmdJbmplY3QgKi9cbiAgY29uc3RydWN0b3IoJHNjb3BlLCAkaW5qZWN0b3IsIHB1YmxpYyAkbG9jYXRpb246IGFueSwgcHVibGljIGJhY2tlbmRTcnY6IGFueSwgcHVibGljIGFsZXJ0U3J2OiBhbnkpIHtcbiAgICB0aGlzLmRldmljZSA9IHt9O1xuICAgIHRoaXMuZGV2aWNlRFRPID0ge307XG4gICAgdGhpcy5wYWdlUmVhZHkgPSBmYWxzZTtcbiAgICAvLyBnZXQgcmVnaW9uIGZyb20gZGF0YXNvdXJjZVxuICAgIHRoaXMucmVnaW9uID0gXCJkZWZhdWx0XCI7XG4gICAgYmFja2VuZFNydi5nZXQoJy9hcGkvZGF0YXNvdXJjZXMnKS50aGVuKCAoYWxsRFM6IGFueSkgPT4ge1xuICAgICAgdGhpcy5yZWdpb24gPSBnZXRSZWdpb24oYWxsRFMpO1xuICAgICAgdGhpcy5rZW50aWsgPSBuZXcgS2VudGlrQVBJKHRoaXMuYmFja2VuZFNydik7XG4gICAgICB0aGlzLmtlbnRpay5zZXRSZWdpb24odGhpcy5yZWdpb24pO1xuICAgICAgdGhpcy5nZXREZXZpY2UoJGxvY2F0aW9uLnNlYXJjaCgpLmRldmljZSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJUCgpIHtcbiAgICB0aGlzLm90aGVySXBzLnB1c2goeyBpcDogJycgfSk7XG4gIH1cblxuICByZW1vdmVJUChpbmRleCkge1xuICAgIHRoaXMub3RoZXJJcHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIGdldERldmljZShkZXZpY2VJZCkge1xuICAgIHRoaXMuYmFja2VuZFNydi5nZXQoYC9hcGkvcGx1Z2luLXByb3h5L2tlbnRpay1hcHAvJHt0aGlzLnJlZ2lvbn0vYXBpL3Y1L2RldmljZS9gICsgZGV2aWNlSWQpLnRoZW4ocmVzcCA9PiB7XG4gICAgICB0aGlzLmRldmljZSA9IHJlc3AuZGV2aWNlO1xuICAgICAgdGhpcy51cGRhdGVEZXZpY2VEVE8oKTtcbiAgICAgIHRoaXMucGFnZVJlYWR5ID0gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIGdvdG9EYXNoYm9hcmQoZGV2aWNlX25hbWUpIHtcbiAgICB0aGlzLiRsb2NhdGlvbi51cmwoJy9kYXNoYm9hcmQvZGIva2VudGlrLXRvcC10YWxrZXJzP3Zhci1kZXZpY2U9JyArIGRldmljZV9uYW1lKTtcbiAgfVxuXG4gIHVwZGF0ZURldmljZURUTygpIHtcbiAgICB0aGlzLmRldmljZURUTyA9IHtcbiAgICAgIGRldmljZV9pZDogdGhpcy5kZXZpY2UuaWQsXG4gICAgICBkZXZpY2VfbmFtZTogdGhpcy5kZXZpY2UuZGV2aWNlX25hbWUsXG4gICAgICBkZXZpY2VfdHlwZTogdGhpcy5kZXZpY2UuZGV2aWNlX3R5cGUsXG4gICAgICBkZXZpY2VfZGVzY3JpcHRpb246IHRoaXMuZGV2aWNlLmRldmljZV9kZXNjcmlwdGlvbixcbiAgICAgIGRldmljZV9mbG93X3R5cGU6IHRoaXMuZGV2aWNlLmRldmljZV9mbG93X3R5cGUsXG4gICAgICBkZXZpY2Vfc2FtcGxlX3JhdGU6IHBhcnNlSW50KHRoaXMuZGV2aWNlLmRldmljZV9zYW1wbGVfcmF0ZSwgMTApLFxuICAgICAgbWluaW1pemVfc25tcDogdGhpcy5kZXZpY2UubWluaW1pemVfc25tcCxcbiAgICAgIGRldmljZV9zbm1wX2lwOiB0aGlzLmRldmljZS5kZXZpY2Vfc25tcF9pcCxcbiAgICAgIGRldmljZV9zbm1wX2NvbW11bml0eTogdGhpcy5kZXZpY2UuZGV2aWNlX3NubXBfY29tbXVuaXR5LFxuICAgICAgZGV2aWNlX2JncF90eXBlOiB0aGlzLmRldmljZS5kZXZpY2VfYmdwX3R5cGUsXG4gICAgICBkZXZpY2VfYmdwX3Bhc3N3b3JkOiB0aGlzLmRldmljZS5kZXZpY2VfYmdwX3Bhc3N3b3JkLFxuICAgICAgZGV2aWNlX2JncF9uZWlnaGJvcl9pcDogdGhpcy5kZXZpY2UuZGV2aWNlX2JncF9uZWlnaGJvcl9pcCxcbiAgICAgIGRldmljZV9iZ3BfbmVpZ2hib3JfYXNuOiBwYXJzZUludCh0aGlzLmRldmljZS5kZXZpY2VfYmdwX25laWdoYm9yX2FzbiwgMTApLFxuICAgIH07XG4gIH1cblxuICB1cGRhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmRldmljZURUTy5kZXZpY2Vfc25tcF9pcCkge1xuICAgICAgZGVsZXRlIHRoaXMuZGV2aWNlRFRPLmRldmljZV9zbm1wX2lwO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuZGV2aWNlRFRPLmRldmljZV9zbm1wX2NvbW11bml0eSkge1xuICAgICAgZGVsZXRlIHRoaXMuZGV2aWNlRFRPLmRldmljZV9zbm1wX2NvbW11bml0eTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHsgZGV2aWNlOiB0aGlzLmRldmljZURUTyB9O1xuXG4gICAgdGhpcy5iYWNrZW5kU3J2LnB1dChgL2FwaS9wbHVnaW4tcHJveHkva2VudGlrLWFwcC8ke3RoaXMucmVnaW9ufS9hcGkvdjUvZGV2aWNlL2AgKyB0aGlzLmRldmljZURUTy5kZXZpY2VfaWQsIGRhdGEpLnRoZW4oXG4gICAgICByZXNwID0+IHtcbiAgICAgICAgaWYgKCdlcnInIGluIHJlc3ApIHtcbiAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoJ0RldmljZSBVcGRhdGUgZmFpbGVkLicsIHJlc3AuZXJyLCAnZXJyb3InKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoJ0RldmljZSBVcGRhdGVkLicsIHRoaXMuZGV2aWNlRFRPLmRldmljZV9uYW1lLCAnc3VjY2VzcycpO1xuICAgICAgICAgIHJldHVybiB0aGlzLmdldERldmljZSh0aGlzLmRldmljZURUTy5kZXZpY2VfaWQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZXJyb3IgPT4ge1xuICAgICAgICBpZiAoJ2Vycm9yJyBpbiBlcnJvci5kYXRhKSB7XG4gICAgICAgICAgc2hvd0N1c3RvbUFsZXJ0KCdEZXZpY2UgVXBkYXRlIGZhaWxlZC4nLCBlcnJvci5kYXRhLmVycm9yLCAnZXJyb3InKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hvd0N1c3RvbUFsZXJ0KCdEZXZpY2UgVXBkYXRlIGZhaWxlZC4nLCBlcnJvciwgJ2Vycm9yJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuXG5EZXZpY2VEZXRhaWxzQ3RybC50ZW1wbGF0ZVVybCA9ICdjb21wb25lbnRzL2RldmljZV9kZXRhaWxzLmh0bWwnO1xuIiwiaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBnZXRSZWdpb24gfSBmcm9tIFwiLi4vZGF0YXNvdXJjZS9yZWdpb25IZWxwZXJcIjtcblxuY29uc3QgZGVmYXVsdHMgPSB7XG4gIGRldmljZV9uYW1lOiAnJyxcbiAgZGV2aWNlX3R5cGU6ICdyb3V0ZXInLFxuICBkZXZpY2VfZGVzY3JpcHRpb246ICcnLFxuICBkZXZpY2VfZmxvd190eXBlOiAnc2Zsb3cnLFxuICBkZXZpY2Vfc2FtcGxlX3JhdGU6IDUsXG4gIHNlbmRpbmdfaXBzOiAnJyxcbiAgbWluaW1pemVfc25tcDogZmFsc2UsXG4gIGRldmljZV9iZ3BfdHlwZTogJ25vbmUnLFxuICBkZXZpY2Vfc25tcF9pcDogJycsXG4gIGRldmljZV9zbm1wX2NvbW11bml0eTogJycsXG59O1xuXG5leHBvcnQgY2xhc3MgQWRkRGV2aWNlQ3RybCB7XG4gIHN0YXRpYyB0ZW1wbGF0ZVVybDogc3RyaW5nO1xuICBkZXZpY2U6IGFueTtcbiAgc2VuZGluZ0lwczogYW55W107XG4gIHJlZ2lvbjogc3RyaW5nO1xuXG4gIC8qKiBAbmdJbmplY3QgKi9cbiAgY29uc3RydWN0b3IoJHNjb3BlLCAkaW5qZWN0b3IsIHB1YmxpYyAkbG9jYXRpb246IGFueSwgcHVibGljIGJhY2tlbmRTcnY6IGFueSwgcHVibGljIGFsZXJ0U3J2OiBhbnkpIHtcbiAgICB0aGlzLmRldmljZSA9IGFuZ3VsYXIuY29weShkZWZhdWx0cyk7XG4gICAgdGhpcy5zZW5kaW5nSXBzID0gW3sgaXA6ICcnIH1dO1xuICAgIC8vIGdldCByZWdpb24gZnJvbSBkYXRhc291cmNlXG4gICAgdGhpcy5yZWdpb24gPSBcImRlZmF1bHRcIjtcbiAgICBiYWNrZW5kU3J2LmdldCgnL2FwaS9kYXRhc291cmNlcycpLnRoZW4oIChhbGxEUzogYW55KSA9PiB7XG4gICAgICB0aGlzLnJlZ2lvbiA9IGdldFJlZ2lvbihhbGxEUyk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJUCgpIHtcbiAgICB0aGlzLnNlbmRpbmdJcHMucHVzaCh7IGlwOiAnJyB9KTtcbiAgfVxuXG4gIHJlbW92ZUlQKGluZGV4KSB7XG4gICAgdGhpcy5zZW5kaW5nSXBzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cblxuICBhZGREZXZpY2UoKSB7XG4gICAgY29uc3QgaXBzID0gW107XG4gICAgXy5mb3JFYWNoKHRoaXMuc2VuZGluZ0lwcywgaXAgPT4ge1xuICAgICAgaXBzLnB1c2goaXAuaXApO1xuICAgIH0pO1xuICAgIHRoaXMuZGV2aWNlLnNlbmRpbmdfaXBzID0gaXBzLmpvaW4oKTtcbiAgICB0aGlzLmJhY2tlbmRTcnYucG9zdChgL2FwaS9wbHVnaW4tcHJveHkva2VudGlrLWFwcC8ke3RoaXMucmVnaW9ufS9hcGkvdjUvZGV2aWNlYCwgdGhpcy5kZXZpY2UpLnRoZW4ocmVzcCA9PiB7XG4gICAgICBpZiAoJ2VycicgaW4gcmVzcCkge1xuICAgICAgICB0aGlzLmFsZXJ0U3J2LnNldCgnRGV2aWNlIEFkZCBmYWlsZWQuJywgcmVzcC5lcnIsICdlcnJvcicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4kbG9jYXRpb24udXJsKCcvcGx1Z2lucy9rZW50aWstYXBwL3BhZ2UvZGV2aWNlLWxpc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5BZGREZXZpY2VDdHJsLnRlbXBsYXRlVXJsID0gJ2NvbXBvbmVudHMvYWRkX2RldmljZS5odG1sJztcbiIsImltcG9ydCAnLi9zYXNzL2tlbnRpay5kYXJrLnNjc3MnO1xuaW1wb3J0ICcuL3Nhc3Mva2VudGlrLmxpZ2h0LnNjc3MnO1xuXG5pbXBvcnQgeyBDb25maWdDdHJsIH0gZnJvbSAnLi9jb25maWcvY29uZmlnJztcbmltcG9ydCB7IERldmljZUxpc3RDdHJsIH0gZnJvbSAnLi9jb21wb25lbnRzL2RldmljZV9saXN0JztcbmltcG9ydCB7IERldmljZURldGFpbHNDdHJsIH0gZnJvbSAnLi9jb21wb25lbnRzL2RldmljZV9kZXRhaWxzJztcbmltcG9ydCB7IEFkZERldmljZUN0cmwgfSBmcm9tICcuL2NvbXBvbmVudHMvYWRkX2RldmljZSc7XG5pbXBvcnQgeyBsb2FkUGx1Z2luQ3NzIH0gZnJvbSAnZ3JhZmFuYS9hcHAvcGx1Z2lucy9zZGsnO1xuXG5sb2FkUGx1Z2luQ3NzKHtcbiAgZGFyazogJ3BsdWdpbnMva2VudGlrLWFwcC9jc3Mva2VudGlrLmRhcmsuY3NzJyxcbiAgbGlnaHQ6ICdwbHVnaW5zL2tlbnRpay1hcHAvY3NzL2tlbnRpay5saWdodC5jc3MnLFxufSk7XG5cbmV4cG9ydCB7IERldmljZUxpc3RDdHJsLCBEZXZpY2VEZXRhaWxzQ3RybCwgQWRkRGV2aWNlQ3RybCwgQ29uZmlnQ3RybCB9O1xuIiwiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cbm1vZHVsZS5leHBvcnRzID0ge1wicGFuZWxIb3Jpem9udGFsUGFkZGluZ1wiOlwiMTBcIixcInBhbmVsVmVydGljYWxQYWRkaW5nXCI6XCI1XCJ9OyIsIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5tb2R1bGUuZXhwb3J0cyA9IHtcInBhbmVsSG9yaXpvbnRhbFBhZGRpbmdcIjpcIjEwXCIsXCJwYW5lbFZlcnRpY2FsUGFkZGluZ1wiOlwiNVwifTsiXSwic291cmNlUm9vdCI6IiJ9