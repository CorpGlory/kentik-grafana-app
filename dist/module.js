define(["lodash","angular","app/core/core","app/plugins/sdk"],function(e,t,n,i){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function i(e){var t="default";for(var n in e)if("kentik-ds"===e[n].type)return"custom"===(t=e[n].jsonData.region)&&console.log("getRegion(): Custom Dynamic URL: "+e[n].jsonData.dynamicUrl),t;return t}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var i=n(5),r=n(0);function a(e){var t="";t+=e.status?"("+e.status+") ":"",t+=e.statusText?e.statusText+": ":"",e.data&&e.data.error?t+=e.data.error:e.err?t+=e.err:r.isString(e)&&(t+=e),i.appEvents.emit("alert-error",["Can't connect to Kentik API",t])}function o(e,t,n){var a="";a+=t.status?"("+t.status+") ":"",a+=t.statusText?t.statusText+": ":"",t.data&&t.data.error?a+=t.data.error:t.err?a+=t.err:r.isString(t)&&(a+=t),i.appEvents.emit("alert-"+n,[e,a])}},function(e,n){e.exports=t},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(3),r=n.n(i),a=n(1),o=function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},s=function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},c=function(){function e(e){var t=this;this.backendSrv=e,this.apiReady=!1,this.baseUrl="/api/plugin-proxy/kentik-app",e.get("/api/datasources").then(function(e){t.region=Object(a.a)(e),t.setRegion(t.region),t.apiReady=!0})}return e.$inject=["backendSrv"],e.prototype.setRegion=function(e){this.region=e},e.prototype.getDevices=function(){return o(this,void 0,void 0,function(){var e,t=this;return s(this,function(n){switch(n.label){case 0:return this.backendSrv.get("/api/datasources").then(function(e){t.region=Object(a.a)(e),t.setRegion(t.region),t.apiReady=!0}),[4,this._get("/api/v5/devices")];case 1:return(e=n.sent()).data&&e.data.devices?[2,e.data.devices]:[2,[]]}})})},e.prototype.getUsers=function(){return o(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this._get("/api/v5/users")];case 1:return[2,e.sent()]}})})},e.prototype.getFieldValues=function(e){var t="SELECT DISTINCT "+e+" FROM all_devices ORDER BY "+e+" ASC";return this.invokeSQLQuery(t)},e.prototype.getCustomDimensions=function(){return o(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this._get("/api/v5/customdimensions")];case 1:return[2,e.sent().data.customDimensions]}})})},e.prototype.getSavedFilters=function(){return o(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this._get("/api/v5/saved-filters")];case 1:return[2,e.sent().data]}})})},e.prototype.invokeTopXDataQuery=function(e){var t={queries:[{query:e,bucketIndex:0}]};return this._post("/api/v5/query/topXdata",t)},e.prototype.invokeSQLQuery=function(e){var t={query:e};return this._post("/api/v5/query/sql",t)},e.prototype._get=function(e){return o(this,void 0,void 0,function(){var t=this;return s(this,function(n){switch(n.label){case 0:return void 0!==this.region?[3,2]:[4,this.backendSrv.get("/api/datasources").then(function(e){t.setRegion(Object(a.a)(e))})];case 1:n.sent(),n.label=2;case 2:return[2,this.backendSrv.datasourceRequest({method:"GET",url:this.baseUrl+"/"+this.region+e}).catch(function(e){return console.error(e),e.err?Promise.reject(e.err):Promise.reject(e)})]}})})},e.prototype._post=function(e,t){return o(this,void 0,void 0,function(){var n=this;return s(this,function(i){switch(i.label){case 0:return void 0!==this.region?[3,2]:[4,this.backendSrv.get("/api/datasources").then(function(e){n.setRegion(Object(a.a)(e))})];case 1:i.sent(),i.label=2;case 2:return[2,this.backendSrv.datasourceRequest({method:"POST",url:this.baseUrl+"/"+this.region+e,data:t}).then(function(e){return e.data?e.data:[]}).catch(function(e){return console.error(e),e.err?Promise.reject(e.err):Promise.reject(e)})]}})})},e}();r.a.module("grafana.services").service("kentikAPISrv",c)},function(e,t){e.exports=n},function(e,t){e.exports=i},function(e,t){e.exports='<h3 class="page-heading">Enter your Kentik Credentials</h3>\n<div class="gf-form-group">\n  <div class="gf-form" ng-if="ctrl.apiError && ctrl.appModel.enabled">\n    <i class="fa fa-exclamation-circle" style="color: #ca4333;">\n      <span>Invalid API credentials. This app wont work until the credentials are updated.</span>\n    </i>\n  </div>\n  <div class="gf-form">\n    <label class="gf-form-label width-10">Email</label>\n    \x3c!-- Hidden input to stop chrome from autofilling --\x3e\n    <input style="display:none;" type="text" name="somefakename" />\n    <input type="text" class="gf-form-input width-30 max-width-30" ng-model=\'ctrl.appModel.jsonData.email\' placeholder="email" />\n  </div>\n\n  <div class="gf-form">\n    <label class="gf-form-label width-10">Region\n      <tip>US and EU regions are available. Default is US. A custom url can also be specified.</tip>\n    </label>\n    <div class="gf-form-select-wrapper">\n      <select class="gf-form-input" ng-model="ctrl.appModel.jsonData.region" ng-options="f.value as f.text for f in ctrl.regionTypes"></select>\n    </div>\n  </div>\n\n    \x3c!-- custom endpoint should display the url --\x3e\n  <div ng-if="ctrl.appModel.jsonData.region === \'custom\'" class="gf-form">\n    <label class="gf-form-label width-10">Custom URL\n      <tip>Specify custom url</tip>\n    </label>\n    <div ng-if="ctrl.appModel.jsonData.region === \'custom\'">\n      <input type="text" class="gf-form-input width-30 max-width-30" ng-model=\'ctrl.appModel.jsonData.dynamicUrl\' placeholder="https://grafana-api.kentik.com/api/v5" />\n    </div>\n  </div>\n\n  <div class="gf-form-inline">\n    <div class="gf-form kentik-inline-field-margin--right">\n      <label class="gf-form-label width-10">Api Token</label>\n      \x3c!-- Hidden input to stop chrome from autofilling --\x3e\n      <input style="display:none;" type="password" name="anotherfakename" />\n      <input type="password" class="gf-form-input width-30 max-width-30" ng-model="ctrl.appModel.secureJsonData.token" ng-if="!ctrl.appModel.jsonData.tokenSet"\n        placeholder="api token" />\n      <div ng-if="ctrl.appModel.jsonData.tokenSet" class="gf-form">\n        <input type="text" class="gf-form-input max-width-20" disabled="disabled" value="saved" />\n        <div ng-if="ctrl.appModel.enabled">\n          <i class="fa fa-exclamation-triangle" ng-if="!ctrl.apiValidated" alt="Could not validate api Token."></i>\n        </div>\n      </div>\n    </div>\n    <div class="gf-form">\n      <a class="btn btn-danger btn-small" href="#" ng-click="ctrl.reset()" ng-if="ctrl.appModel.jsonData.tokenSet">reset</a>\n    </div>\n  </div>\n</div>\n\n<div ng-if="ctrl.appModel.jsonData.tokenSet" class="kentik-enabled-box">\n  <i class="icon-gf icon-gf-check icon-gf-check kentik-icon-success"></i> Successfully enabled. <strong>Next up:\n  </strong><a href="dashboard/db/kentik-home" class="external-link">Go to Kentik Home Dashboard</a>\n</div>\n'},function(e,t,n){"use strict";n.r(t),n.d(t,"ConfigCtrl",function(){return p});var i=n(7),r=n.n(i),a=n(4),o=n(2),s=n(0),c=function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},d=function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},p=function(){function e(e,t,n){this.backendSrv=n,this.regionTypes=[{value:"default",text:"US (default)"},{value:"eu",text:"EU"},{value:"custom",text:"Custom"}],this.appEditCtrl.setPreUpdateHook(this.preUpdate.bind(this)),this.appEditCtrl.setPostUpdateHook(this.postUpdate.bind(this)),this.appModel.jsonData||(this.appModel.jsonData={}),this.appModel.secureJsonData||(this.appModel.secureJsonData={}),void 0===this.appModel.jsonData.region&&(this.appModel.jsonData.region="default"),this.apiValidated=!1,this.apiError=!1,this.kentik=new a.a(this.backendSrv),this.kentik.setRegion(this.appModel.jsonData.region),this.appModel.enabled&&this.appModel.jsonData.tokenSet&&this.validateApiConnection()}return e.$inject=["$scope","$injector","backendSrv"],e.prototype.preUpdate=function(){return this.appModel.secureJsonData.token&&(this.appModel.jsonData.tokenSet=!0),this.initDatasource()},e.prototype.postUpdate=function(){return c(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return this.appModel.enabled?[4,this.validateApiConnection()]:[2,Promise.resolve()];case 1:return e.sent(),[4,this.appEditCtrl.importDashboards()];case 2:return e.sent(),[2,{url:"dashboard/db/kentik-home",message:"Kentik Connect Pro app installed!"}]}})})},e.prototype.validateApiConnection=function(){return c(this,void 0,void 0,function(){var e,t;return d(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.kentik.getUsers()];case 1:e=n.sent();try{e.hasOwnProperty("data")&&(this.apiValidated=!0,Object(o.b)("API working!","","success"))}catch(e){Object(o.a)("Unexpected result from API: "+e),this.apiValidated=!1,this.apiError=!0}return[3,3];case 2:return t=n.sent(),Object(o.a)(t),this.apiValidated=!1,this.apiError=!0,[3,3];case 3:return[2]}})})},e.prototype.reset=function(){this.appModel.jsonData.email="",this.appModel.jsonData.tokenSet=!1,this.appModel.jsonData.region="default",this.appModel.jsonData.dynamicUrl="",this.appModel.secureJsonData={},this.apiValidated=!1},e.prototype.initDatasource=function(){var e=this,t=this;return t.backendSrv.get("/api/datasources").then(function(n){var i=!1,r=!1,a=NaN;s.forEach(n,function(t){if("kentik-ds"===t.type)return i=!0,a=t.id,r=!0,t.jsonData.region!==e.appModel.jsonData.region&&(r=!0),void(t.jsonData!==e.appModel.jsonData&&(r=!0))});var o=[];if(!i||r){var c={name:"kentik",type:"kentik-ds",access:"proxy",jsonData:t.appModel.jsonData};r?o.push(t.backendSrv.put("/api/datasources/"+a,c)):o.push(t.backendSrv.post("/api/datasources",c))}return Promise.all(o)})},e}();p.template=r.a},function(e,t,n){"use strict";n.r(t),n.d(t,"DeviceListCtrl",function(){return a});var i=n(4),r=n(2),a=function(){function e(e,t,n,r){this.$scope=e,this.$location=n,this.backendSrv=r,this.devices=[],this.pageReady=!1,this.kentik=new i.a(this.backendSrv),this.getDevices()}return e.$inject=["$scope","$injector","$location","backendSrv"],e.prototype.getDevices=function(){var e=this;try{this.kentik.getDevices().then(function(t){e.devices=t,e.pageReady=!0,e.$scope.$apply()})}catch(e){Object(r.a)(e)}},e.prototype.refresh=function(){this.getDevices()},e.prototype.gotoDashboard=function(e){this.$location.path("/dashboard/db/kentik-top-talkers").search({"var-device":e.device_name})},e.prototype.gotoDeviceDetail=function(e){this.$location.url("/plugins/kentik-app/page/device-details?device="+e.id)},e}();a.templateUrl="components/device_list.html"},function(e,t,n){"use strict";n.r(t),n.d(t,"DeviceDetailsCtrl",function(){return o});var i=n(4),r=n(2),a=n(1),o=function(){function e(e,t,n,r,o){var s=this;this.$location=n,this.backendSrv=r,this.alertSrv=o,this.device={},this.deviceDTO={},this.pageReady=!1,r.get("/api/datasources").then(function(e){s.region=Object(a.a)(e),s.kentik=new i.a(s.backendSrv),s.kentik.setRegion(s.region),s.getDevice(n.search().device)})}return e.$inject=["$scope","$injector","$location","backendSrv","alertSrv"],e.prototype.addIP=function(){this.otherIps.push({ip:""})},e.prototype.removeIP=function(e){this.otherIps.splice(e,1)},e.prototype.getDevice=function(e){var t=this;this.backendSrv.get("/api/plugin-proxy/kentik-app/"+this.region+"/api/v5/device/"+e).then(function(e){t.device=e.device,t.updateDeviceDTO(),t.pageReady=!0})},e.prototype.gotoDashboard=function(e){this.$location.url("/dashboard/db/kentik-top-talkers?var-device="+e)},e.prototype.updateDeviceDTO=function(){this.deviceDTO={device_id:this.device.id,device_name:this.device.device_name,device_type:this.device.device_type,device_description:this.device.device_description,device_flow_type:this.device.device_flow_type,device_sample_rate:parseInt(this.device.device_sample_rate,10),minimize_snmp:this.device.minimize_snmp,device_snmp_ip:this.device.device_snmp_ip,device_snmp_community:this.device.device_snmp_community,device_bgp_type:this.device.device_bgp_type,device_bgp_password:this.device.device_bgp_password,device_bgp_neighbor_ip:this.device.device_bgp_neighbor_ip,device_bgp_neighbor_asn:parseInt(this.device.device_bgp_neighbor_asn,10)}},e.prototype.update=function(){var e=this;this.deviceDTO.device_snmp_ip||delete this.deviceDTO.device_snmp_ip,this.deviceDTO.device_snmp_community||delete this.deviceDTO.device_snmp_community;var t={device:this.deviceDTO};this.backendSrv.put("/api/plugin-proxy/kentik-app/"+this.region+"/api/v5/device/"+this.deviceDTO.device_id,t).then(function(t){if(!("err"in t))return Object(r.b)("Device Updated.",e.deviceDTO.device_name,"success"),e.getDevice(e.deviceDTO.device_id);Object(r.b)("Device Update failed.",t.err,"error")},function(e){return"error"in e.data?void Object(r.b)("Device Update failed.",e.data.error,"error"):void Object(r.b)("Device Update failed.",e,"error")})},e}();o.templateUrl="components/device_details.html"},function(e,t,n){"use strict";n.r(t),n.d(t,"AddDeviceCtrl",function(){return c});var i=n(0),r=n(3),a=n.n(r),o=n(1),s={device_name:"",device_type:"router",device_description:"",device_flow_type:"sflow",device_sample_rate:5,sending_ips:"",minimize_snmp:!1,device_bgp_type:"none",device_snmp_ip:"",device_snmp_community:""},c=function(){function e(e,t,n,i,r){var c=this;this.$location=n,this.backendSrv=i,this.alertSrv=r,this.device=a.a.copy(s),this.sendingIps=[{ip:""}],i.get("/api/datasources").then(function(e){c.region=Object(o.a)(e)})}return e.$inject=["$scope","$injector","$location","backendSrv","alertSrv"],e.prototype.addIP=function(){this.sendingIps.push({ip:""})},e.prototype.removeIP=function(e){this.sendingIps.splice(e,1)},e.prototype.addDevice=function(){var e=this,t=[];i.forEach(this.sendingIps,function(e){t.push(e.ip)}),this.device.sending_ips=t.join(),this.backendSrv.post("/api/plugin-proxy/kentik-app/"+this.region+"/api/v5/device",this.device).then(function(t){"err"in t?e.alertSrv.set("Device Add failed.",t.err,"error"):e.$location.url("/plugins/kentik-app/page/device-list")})},e}();c.templateUrl="components/add_device.html"},,,function(e,t,n){"use strict";n.r(t);n(18),n(23);var i=n(8);n.d(t,"ConfigCtrl",function(){return i.ConfigCtrl});var r=n(9);n.d(t,"DeviceListCtrl",function(){return r.DeviceListCtrl});var a=n(10);n.d(t,"DeviceDetailsCtrl",function(){return a.DeviceDetailsCtrl});var o=n(11);n.d(t,"AddDeviceCtrl",function(){return o.AddDeviceCtrl});var s=n(6);Object(s.loadPluginCss)({dark:"plugins/kentik-app/css/kentik.dark.css",light:"plugins/kentik-app/css/kentik.light.css"})},,,,function(e,t){},,,,,function(e,t){}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibG9kYXNoXCIiLCJ3ZWJwYWNrOi8vLy4vZGF0YXNvdXJjZS9yZWdpb25IZWxwZXIudHMiLCJ3ZWJwYWNrOi8vLy4vZGF0YXNvdXJjZS9hbGVydEhlbHBlci50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJhbmd1bGFyXCIiLCJ3ZWJwYWNrOi8vLy4vZGF0YXNvdXJjZS9rZW50aWtBUEkudHMiLCJ3ZWJwYWNrOi8vLy4vY29uZmlnL2NvbmZpZy50cyIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL2RldmljZV9saXN0LnRzIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvZGV2aWNlX2RldGFpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9hZGRfZGV2aWNlLnRzIiwid2VicGFjazovLy8uL21vZHVsZS50cyIsIndlYnBhY2s6Ly8vLi9zYXNzL2tlbnRpay5kYXJrLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vc2Fzcy9rZW50aWsubGlnaHQuc2NzcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzBfXyIsImdldFJlZ2lvbiIsImRhdGFzb3VyY2VzIiwiYVJlZ2lvbiIsImluZGV4IiwidHlwZSIsImpzb25EYXRhIiwicmVnaW9uIiwiY29uc29sZSIsImxvZyIsImR5bmFtaWNVcmwiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwic2hvd0FsZXJ0Iiwic2hvd0N1c3RvbUFsZXJ0IiwiZ3JhZmFuYV9hcHBfY29yZV9jb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJsb2Rhc2hfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsImVycm9yIiwibWVzc2FnZSIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJkYXRhIiwiZXJyIiwiZW1pdCIsImV4Y2VwdGlvbkRhdGEiLCJleGNlcHRpb25UeXBlIiwiZXJyTWVzc2FnZSIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzNfXyIsIktlbnRpa0FQSSIsImJhY2tlbmRTcnYiLCJfdGhpcyIsInRoaXMiLCJhcGlSZWFkeSIsImJhc2VVcmwiLCJ0aGVuIiwiYWxsRFMiLCJfcmVnaW9uSGVscGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJzZXRSZWdpb24iLCIkaW5qZWN0IiwicmVzcCIsIl9hIiwic2VudCIsImRldmljZXMiLCJnZXRGaWVsZFZhbHVlcyIsImZpZWxkIiwicXVlcnkiLCJpbnZva2VTUUxRdWVyeSIsImludm9rZVRvcFhEYXRhUXVlcnkiLCJrZW50aWtWNVF1ZXJ5IiwicXVlcmllcyIsImJ1Y2tldEluZGV4IiwiX3Bvc3QiLCJkYXRhc291cmNlUmVxdWVzdCIsIm1ldGhvZCIsInVybCIsImNhdGNoIiwiUHJvbWlzZSIsInJlamVjdCIsInJlc3BvbnNlIiwiS2VudGlrQ29uZmlnQ3RybCIsIiRzY29wZSIsIiRpbmplY3RvciIsInJlZ2lvblR5cGVzIiwidGV4dCIsImFwcEVkaXRDdHJsIiwic2V0UHJlVXBkYXRlSG9vayIsInByZVVwZGF0ZSIsInNldFBvc3RVcGRhdGVIb29rIiwicG9zdFVwZGF0ZSIsImFwcE1vZGVsIiwic2VjdXJlSnNvbkRhdGEiLCJhcGlWYWxpZGF0ZWQiLCJhcGlFcnJvciIsImtlbnRpayIsIl9kYXRhc291cmNlX2tlbnRpa0FQSV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiZW5hYmxlZCIsInRva2VuU2V0IiwidmFsaWRhdGVBcGlDb25uZWN0aW9uIiwidG9rZW4iLCJpbml0RGF0YXNvdXJjZSIsImxhYmVsIiwicmVzb2x2ZSIsImltcG9ydERhc2hib2FyZHMiLCJnZXRVc2VycyIsInJlc3VsdCIsIl9kYXRhc291cmNlX2FsZXJ0SGVscGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJlIiwiZV8xIiwicmVzZXQiLCJlbWFpbCIsInNlbGYiLCJyZXN1bHRzIiwiZm91bmRLZW50aWtEUyIsInVwZGF0ZUtlbnRpa0RTIiwiZHNJRCIsIk5hTiIsImRzIiwiaWQiLCJwcm9taXNlcyIsImFjY2VzcyIsInB1c2giLCJwdXQiLCJwb3N0IiwiYWxsIiwiRGV2aWNlTGlzdEN0cmwiLCJfZGF0YXNvdXJjZV9rZW50aWtBUElfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsIl9kYXRhc291cmNlX2FsZXJ0SGVscGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCIkbG9jYXRpb24iLCJwYWdlUmVhZHkiLCJnZXREZXZpY2VzIiwiJGFwcGx5IiwicmVmcmVzaCIsImdvdG9EYXNoYm9hcmQiLCJkZXZpY2UiLCJwYXRoIiwic2VhcmNoIiwidmFyLWRldmljZSIsImRldmljZV9uYW1lIiwiZ290b0RldmljZURldGFpbCIsIkRldmljZURldGFpbHNDdHJsIiwiX2RhdGFzb3VyY2VfcmVnaW9uSGVscGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJhbGVydFNydiIsImRldmljZURUTyIsImdldERldmljZSIsImFkZElQIiwib3RoZXJJcHMiLCJpcCIsInJlbW92ZUlQIiwic3BsaWNlIiwiZGV2aWNlSWQiLCJ1cGRhdGVEZXZpY2VEVE8iLCJkZXZpY2VfaWQiLCJkZXZpY2VfdHlwZSIsImRldmljZV9kZXNjcmlwdGlvbiIsImRldmljZV9mbG93X3R5cGUiLCJkZXZpY2Vfc2FtcGxlX3JhdGUiLCJwYXJzZUludCIsIm1pbmltaXplX3NubXAiLCJkZXZpY2Vfc25tcF9pcCIsImRldmljZV9zbm1wX2NvbW11bml0eSIsImRldmljZV9iZ3BfdHlwZSIsImRldmljZV9iZ3BfcGFzc3dvcmQiLCJkZXZpY2VfYmdwX25laWdoYm9yX2lwIiwiZGV2aWNlX2JncF9uZWlnaGJvcl9hc24iLCJ1cGRhdGUiLCJBZGREZXZpY2VDdHJsIiwibG9kYXNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJhbmd1bGFyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJhbmd1bGFyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCIsImRlZmF1bHRzIiwic2VuZGluZ19pcHMiLCJhIiwiY29weSIsInNlbmRpbmdJcHMiLCJhZGREZXZpY2UiLCJpcHMiLCJqb2luIiwic2V0IiwiX2NvbmZpZ19jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyIsIl9jb21wb25lbnRzX2RldmljZV9saXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18iLCJfY29tcG9uZW50c19kZXZpY2VfZGV0YWlsc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fIiwiX2NvbXBvbmVudHNfYWRkX2RldmljZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fIiwiZ3JhZmFuYV9hcHBfcGx1Z2luc19zZGtfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXyJdLCJtYXBwaW5ncyI6Im1HQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUEwREEsT0FyREFGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdBLEdBRkExQixFQUFBa0IsRUFBQU8sR0FDQVgsT0FBQUMsZUFBQVUsRUFBQSxXQUF5Q1QsWUFBQSxFQUFBSyxVQUN6QyxFQUFBRSxHQUFBLGlCQUFBRixFQUFBLFFBQUFNLEtBQUFOLEVBQUFyQixFQUFBVSxFQUFBZSxFQUFBRSxFQUFBLFNBQUFBLEdBQWdILE9BQUFOLEVBQUFNLElBQXFCQyxLQUFBLEtBQUFELElBQ3JJLE9BQUFGLEdBSUF6QixFQUFBNkIsRUFBQSxTQUFBMUIsR0FDQSxJQUFBUyxFQUFBVCxLQUFBcUIsV0FDQSxXQUEyQixPQUFBckIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURBSCxFQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQWlCLEVBQUFDLEdBQXNELE9BQUFqQixPQUFBa0IsVUFBQUMsZUFBQTFCLEtBQUF1QixFQUFBQyxJQUd0RC9CLEVBQUFrQyxFQUFBLEdBSUFsQyxJQUFBbUMsRUFBQSxvQkNsRkFoQyxFQUFBRCxRQUFBa0MsZ0NDS0EsU0FBU0MsRUFBVUMsR0FDakIsSUFBSUMsRUFBVSxVQUNkLElBQUssSUFBSUMsS0FBU0YsRUFDaEIsR0FBZ0MsY0FBNUJBLEVBQVlFLEdBQU9DLEtBTXJCLE1BSmdCLFlBRGhCRixFQUFVRCxFQUFZRSxHQUFPRSxTQUFTQyxTQUVwQ0MsUUFBUUMsSUFBSSxvQ0FBc0NQLEVBQVlFLEdBQU9FLFNBQVNJLFlBR3pFUCxFQUdYLE9BQU9BLEVBakJSdkMsRUFBQVUsRUFBQXFDLEVBQUEsc0JBQUFWLGtDQ0FEckMsRUFBQVUsRUFBQXFDLEVBQUEsc0JBQUFDLElBQUFoRCxFQUFBVSxFQUFBcUMsRUFBQSxzQkFBQUUsSUFBQSxJQUFBQyxFQUFBbEQsRUFBQSxHQUFBbUQsRUFBQW5ELEVBQUEsR0FHQSxTQUFTZ0QsRUFBVUksR0FDakIsSUFBSUMsRUFBVSxHQUNkQSxHQUFXRCxFQUFNRSxPQUFTLElBQUlGLEVBQU1FLE9BQU0sS0FBTyxHQUNqREQsR0FBV0QsRUFBTUcsV0FBYUgsRUFBTUcsV0FBYSxLQUFPLEdBQ3BESCxFQUFNSSxNQUFRSixFQUFNSSxLQUFLSixNQUMzQkMsR0FBV0QsRUFBTUksS0FBS0osTUFDYkEsRUFBTUssSUFDZkosR0FBV0QsRUFBTUssSUFDUk4sRUFBQSxTQUFXQyxLQUNwQkMsR0FBV0QsR0FHYkYsRUFBQSxVQUFVUSxLQUFLLGNBQWUsQ0FBQyw4QkFBK0JMLElBR2hFLFNBQVNKLEVBQWdCSSxFQUFTTSxFQUFlQyxHQUMvQyxJQUFJQyxFQUFhLEdBQ2pCQSxHQUFjRixFQUFjTCxPQUFTLElBQUlLLEVBQWNMLE9BQU0sS0FBTyxHQUNwRU8sR0FBY0YsRUFBY0osV0FBYUksRUFBY0osV0FBYSxLQUFPLEdBQ3ZFSSxFQUFjSCxNQUFRRyxFQUFjSCxLQUFLSixNQUMzQ1MsR0FBY0YsRUFBY0gsS0FBS0osTUFDeEJPLEVBQWNGLElBQ3ZCSSxHQUFjRixFQUFjRixJQUNuQk4sRUFBQSxTQUFXUSxLQUNwQkUsR0FBY0YsR0FFaEJULEVBQUEsVUFBVVEsS0FBSyxTQUFTRSxFQUFpQixDQUFDUCxFQUFTUSxvQkM3QnJEMUQsRUFBQUQsUUFBQTRELHU0Q0NJQUMsRUFBQSxvQkFLRUEsRUFBQUMsR0FBbUIsSUFBQUMsRUFBQUMsS0FDakJBLEtBQUtGLFdBQVdBLEVBQ2hCRSxLQUFLQyxVQUFVLEVBQ2ZELEtBQUFFLFFBQUEsaUNBRU9uRCxJQUFBLG9CQUFTb0QsS0FBQSxTQUFBQyxHQUNkTCxFQUFLdEIsT0FBUzdCLE9BQU15RCxFQUFRLEVBQWR6RCxDQUFjd0QsR0FDNUJMLEVBQUtPLFVBQVFQLEVBQVF0QixRQUNwQnNCLEVBQUFFLFVBQUEsSUFtSE4sT0EzSENKLEVBQUFVLFFBQW1CLGlCQVlaekMsVUFBU3dDLFVBQU8sU0FBQTdCLEdBQ3RCdUIsS0FBQXZCLCtJQUdDLGNBQ0VxQixXQUFXL0MsSUFBRyxvQkFBQW9ELEtBQUEsU0FBQUMsR0FDZEwsRUFBS3RCLE9BQVM3QixPQUFNeUQsRUFBUSxFQUFkekQsQ0FBY3dELEdBQzVCTCxFQUFLTyxVQUFRUCxFQUFRdEIsUUFDcEJzQixFQUFBRSxVQUFBLDBDQUVHLFNBRU5PLEVBQUlDLEVBQUtDLFFBQ1BwQixNQUFBa0IsRUFBQWxCLEtBQU9xQixRQUNSLEdBQUFILEVBQUFsQixLQUFBcUIsU0FFQSwrS0FJSyxXQUNORixFQUFBQyxnQkFJTTVDLFVBQVE4QyxlQUFtQixTQUFLQyxHQUN0QyxJQUFBQyxFQUFZLG1CQUFxQkQsRUFBQyw4QkFBQUEsRUFBQSxPQUNuQyxPQUFBYixLQUFBZSxlQUFBRCw0TEFHTyxXQUNOTCxFQUFBQyxxTkFJTSxXQUNORCxFQUFBQyxxQkFJTTVDLFVBQUFrRCxvQkFBZ0IsU0FBQUYsT0FDcEJHLEVBQVksQ0FDWkMsUUFBQSxFQUFBSixRQUFBSyxZQUFBLEtBR0gsT0FBQW5CLEtBQUFvQixNQUFBLHlCQUFBSCxNQUdPbkQsVUFBT2lELGVBQUEsU0FBQUQsT0FDWHhCLEVBQU8sQ0FDUHdCLFNBR0gsT0FBQWQsS0FBQW9CLE1BQUEsb0JBQUE5QixvSUFLRyxnQkFBQVUsS0FBQXZCLE9BQUEsR0FBdUQsSUFFckQsRUFBS3VCLEtBQVVGLFdBQUEvQyxJQUFBLG9CQUFBb0QsS0FBQSxTQUFBQyxHQUNmTCxFQUFBTyxVQUFBMUQsT0FBQXlELEVBQWdFLEVBQWhFekQsQ0FBZ0V3RCxZQUhsRSxtQkFPRixlQUNHLEdBQWtCSixLQUFBRixXQUNqQnVCLGtCQUFhLENBQ2JDLE9BQUssTUFDTEMsSUFBQXZCLEtBQUFFLFFBQUEsSUFBQUYsS0FBQXZCLE9BQUE4QyxJQUVBQyxNQUFPLFNBQU90QyxVQUNkUixRQUFJUSxNQUFTQSxHQUNYQSxFQUFBSyxJQUNEa0MsUUFBQUMsT0FBQXhDLEVBQUFLLEtBRUFrQyxRQUFBQyxPQUFBeEMsK0lBT0gsZ0JBQUFjLEtBQUF2QixPQUFBLE9BRUUsRUFBS3VCLEtBQVVGLFdBQUEvQyxJQUFBLG9CQUFBb0QsS0FBQSxTQUFBQyxHQUNmTCxFQUFBTyxVQUFBMUQsT0FBQXlELEVBQWdFLEVBQWhFekQsQ0FBZ0V3RCxZQUhsRSxtQkFNRixlQUNHLEdBQWtCSixLQUFBRixXQUNqQnVCLGtCQUFjLENBQ2RDLE9BQUssT0FDTEMsSUFBSXZCLEtBQU1FLFFBQUEsSUFBQUYsS0FBQXZCLE9BQUE4QyxFQUNWakMsU0FFQWEsS0FBSSxTQUFTd0IsVUFDWEEsRUFBT3JDLEtBQ1JxQyxFQUFBckMsS0FFQSxLQUdEa0MsTUFBTyxTQUFPdEMsVUFDZFIsUUFBSVEsTUFBU0EsR0FDWEEsRUFBQUssSUFDRGtDLFFBQUFDLE9BQUF4QyxFQUFBSyxLQUVBa0MsUUFBQUMsT0FBQXhDLFlBR1JXLEVBaElELHM4SUNlRStCLEVBQWdCLG9CQU5oQkEsRUFBY0MsRUFBQUMsRUFBQWhDLFFBQ1pBLFdBQVNBLE9BQ1RpQyxZQUFlLENBQ2YsQ0FBRTVFLE1BQU8sVUFBVTZFLEtBQU0sZ0JBQ3pCLENBQUE3RSxNQUFBLEtBQUE2RSxLQUFBLE1BSUksQ0FBQzdFLE1BQUEsU0FBWTZFLEtBQUEsV0FHakJoQyxLQUFLaUMsWUFBS0MsaUJBQW1CbEMsS0FBQW1DLFVBQUF6RSxLQUFBc0MsWUFDM0JpQyxZQUFhRyxrQkFBZXBDLEtBQUFxQyxXQUFBM0UsS0FBQXNDLE9BQzdCQSxLQUFBc0MsU0FBQTlELFdBQ0d3QixLQUFLc0MsU0FBUzlELFNBQUMsSUFFbEJ3QixLQUFBc0MsU0FBQUMsaUJBQ0d2QyxLQUFBc0MsU0FBWUMsZUFBa0IsU0FFakMsSUFBQXZDLEtBQUFzQyxTQUFBOUQsU0FBQUMsU0FDR3VCLEtBQUNzQyxTQUFZOUQsU0FBU0MsT0FBQSxXQUUxQnVCLEtBQUt3QyxjQUFhLEVBQ2xCeEMsS0FBS3lDLFVBQU8sRUFDWnpDLEtBQUkwQyxPQUFLLElBQVNDLEVBQTRDLEVBQUEzQyxLQUFBRixpQkFDNUQ0QyxPQUFLcEMsVUFBQU4sS0FBQXNDLFNBQXdCOUQsU0FBQUMsUUFDOUJ1QixLQUFBc0MsU0FBQU0sU0FBQTVDLEtBQUFzQyxTQUFBOUQsU0FBQXFFLFVBQ0Y3QyxLQUFBOEMsd0JBb0dILFNBeEh3Q3ZDLFFBQUEsVUFBZSw0QkF3QjVDekMsVUFBU3FFLFVBQWlCLFdBTTdCLE9BTEhuQyxLQUFBc0MsU0FBQUMsZUFBQVEsUUFFRC9DLEtBQU9zQyxTQUFLOUQsU0FBY3FFLFVBQUcsR0FHekI3QyxLQUFBZ0QsNEhBQ0p2QyxFQUFBd0MscUJBRUNqRCxLQUFBc0MsU0FBQU0sUUFFRCxHQUFtQzVDLEtBQUE4Qyx5QkFBbkMsR0FBV3JCLFFBQUF5QixnQkFDWCxxQkFBMENsRCxLQUFBaUMsWUFBQWtCLHlCQUUxQyxtQkFFRSxFQUFTLENBQ1Q1QixJQUFBLDBOQU1hLEVBQVQsNkJBQU0sR0FBK0J2QixLQUFBMEMsT0FBQVUsaUJBQ3pDLElBQ08zQyxFQUFBQyxXQUVIMkMsRUFBQXRGLGVBQUEsVUFDRGlDLEtBQUF3QyxjQUFBLEVBQ0Y1RixPQUFBMEcsRUFBQSxFQUFBMUcsQ0FBQSxvQ0FFQzJHLEdBQ0EzRyxPQUFLMEcsRUFBZ0IsRUFBckIxRyxDQUFxQiwrQkFBQTJHLEdBQ3RCdkQsS0FBQXdDLGNBQUEsb0NBRUQsU0FDQWdCLEVBQUsvQyxFQUFBQyxPQUNMOUQsT0FBSzBHLEVBQWdCLEVBQXJCMUcsQ0FBcUI0Ryx3RUFNVjFGLFVBQVUyRixNQUFRLFdBQy9CekQsS0FBS3NDLFNBQVM5RCxTQUFTa0YsTUFBTSxHQUM3QjFELEtBQUtzQyxTQUFTOUQsU0FBU3FFLFVBQVUsRUFDakM3QyxLQUFLc0MsU0FBUzlELFNBQUFDLE9BQWlCLFVBQy9CdUIsS0FBS3NDLFNBQUE5RCxTQUFlSSxXQUFNLEdBQzNCb0IsS0FBQXNDLFNBQUFDLGVBQUEsR0FFRHZDLEtBQUF3QyxjQUFBLEtBQ2UxRSxVQUFLa0YsZUFBQSxXQUNsQixJQUFBakQsRUFBQUMsS0FDQTJELEVBQVczRCxZQUVUMkQsRUFBSTdELFdBQWMvQyxJQUFHLG9CQUFNb0QsS0FBQSxTQUFBeUQsR0FDM0IsSUFBSUMsR0FBVyxFQUNmQyxHQUFBLEVBQ0VDLEVBQUFDLE1BQ2UsUUFBQUosRUFBQSxTQUFBSyxNQUdELGNBQVpBLEVBQUExRixLQVlELE9BWENzRixHQUFBLEVBQ0FFLEVBQUFFLEVBQUFDLE1BR0UsRUFDREQsRUFBQXpGLFNBQUFDLFNBQUFzQixFQUFBdUMsU0FBQTlELFNBQUFDLFNBQ0dxRixHQUFnQixRQUVuQkcsRUFBQXpGLFdBQUF1QixFQUFBdUMsU0FBQTlELFdBQ0RzRixHQUFPLFVBS1RLLEVBQUEsT0FDQU4sR0FBZUMsRUFBQSxLQUVicEIsRUFBTSxDQUNOakcsS0FBTSxTQUNOOEIsS0FBQSxZQUNBNkYsT0FBQSxRQUNFNUYsU0FBQW1GLEVBQWNyQixTQUFFOUQsVUFFbkJzRixJQUFNTyxLQUFBVixFQUFBN0QsV0FBQXdFLElBQUEsb0JBQUFQLEVBQUFyQixJQUdSeUIsRUFBQUUsS0FBQVYsRUFBQTdELFdBQUF5RSxLQUFBLG1CQUFBN0IsSUFJSixPQUFBakIsUUFBQStDLElBQUFMLE1BR0h2QyxFQXpIa0IsbUNDbkJsQixhQUFBOUYsRUFBQWtCLEVBQUE2QixHQUFBL0MsRUFBQVUsRUFBQXFDLEVBQUEsbUNBQUE0RixJQUFvRCxJQUFBQyxFQUFBNUksRUFBQSxHQUNFNkksRUFBQTdJLEVBQUEsR0FVcEQySSxFQUE0QixvQkFBeUNBLEVBQUE1QyxFQUFVQyxFQUFLOEMsRUFBQTlFLEdBQ2xGRSxLQUFLNkIsT0FBT0EsRUFDWjdCLEtBQUs0RSxVQUFZQSxFQUNqQjVFLEtBQUtGLFdBQWFBLEVBQ2xCRSxLQUFLVyxRQUFVLEdBQ2hCWCxLQUFBNkUsV0FBQSxFQUVEN0UsS0FBQTBDLE9BQUEsSUFBQWdDLEVBQUEsRUFBQTFFLEtBQUFGLFlBQUFFLEtBQUE4RSxhQTJCd0IsU0FsQ3NCdkUsUUFBQSxVQUFjLHdDQVNuRHpDLFVBQU9nSCxXQUFrQixpQkFDNUI5RSxjQUVBMEMsT0FBS29DLGFBQWUzRSxLQUFDLFNBQUFRLEdBQ3BCWixFQUFBWSxVQUNKWixFQUFBOEUsV0FBQSxFQUFTOUUsRUFBRThCLE9BQUFrRCxXQUdiLE1BQUF4QixHQUVEM0csT0FBQStILEVBQUEsRUFBQS9ILENBQUEyRyxLQUlBa0IsRUFBQTNHLFVBQUFrSCxRQUFBLFdBQ0VoRixLQUFLOEUsY0FHUEwsRUFBQTNHLFVBQUFtSCxjQUFnQixTQUFoQkMsR0FDRWxGLEtBQUs0RSxVQUFVTyxLQUFJLG9DQUFBQyxPQUFBLENBQUFDLGFBQTJESCxFQUFJSSxlQUV0RmIsRUFBQTNHLFVBQUN5SCxpQkFBQSxTQUFBTCxHQUFBbEYsS0FBQTRFLFVBQUFyRCxJQUFBLGtEQUFBMkQsRUFBQWhCLEtBSXlCTyxFQWxDRSxnRENYNUIsU0FBQXhJLEVBQUE0QyxFQUFBL0MsR0FBQSxhQUFBQSxFQUFBa0IsRUFBQTZCLEdBQUEvQyxFQUFBVSxFQUFBcUMsRUFBQSxzQ0FBQTJHLElBQW9ELElBQUFkLEVBQUE1SSxFQUFBLEdBQ1E2SSxFQUFBN0ksRUFBQSxHQUNMMkosRUFBQTNKLEVBQUEsS0F3QnBELG9CQVpvRjBKLEVBQUEzRCxFQUFhQyxFQUFBOEMsRUFBQTlFLEVBQUE0RixHQUNoRyxJQUFJM0YsRUFBT0MsS0FDWEEsS0FBSzRFLFVBQVlBLEVBQ2pCNUUsS0FBS0YsV0FBWUEsRUFDakJFLEtBQUEwRixXQUNBMUYsS0FBQWtGLE9BQUEsR0FDQWxGLEtBQUEyRixVQUFlLFFBQ2JkLFdBQVcsSUFHTjlILElBQUEsb0JBQW9Cb0QsS0FBUyxTQUFRQyxHQUN6Q0wsRUFBQXRCLE9BQUE3QixPQUFBNkksRUFBQSxFQUFBN0ksQ0FBQXdELEdBQ0pMLEVBQUEyQyxPQUFBLElBQUFnQyxFQUFBLEVBQUEzRSxFQUFBRCxZQUVEQyxFQUFBMkMsT0FBQXBDLFVBQUFQLEVBQUF0QixRQUNNc0IsRUFBQzZGLFVBQWNoQixFQUFXUSxTQUFDRixtQkFmNEIzRSxRQUFBLFVBQWUsbURBbUI1RHpDLFVBQU8rSCxNQUFVLFdBQ2hDN0YsS0FBQThGLFNBQUF6QixLQUFBLENBQUEwQixHQUFBLFFBRURqSSxVQU1Da0ksU0FBQSxTQUFBMUgsR0FMQzBCLEtBQUs4RixTQUFBRyxPQUFlM0gsRUFBQSxNQUViUixVQUFBOEgsVUFBa0IsU0FBQU0sT0FDdkJuRyxFQUFLQyxLQUNQQSxLQUFHRixXQUFBL0MsSUFBQSxnQ0FBQWlELEtBQUF2QixPQUFBLGtCQUFBeUgsR0FBQS9GLEtBQUEsU0FBQUssR0FDSlQsRUFBQW1GLE9BQUExRSxFQUFBMEUsT0FFRG5GLEVBQUFvRyxrQkFDTXBHLEVBQUM4RSxXQUFjLE9BSUwvRyxVQUFHbUgsY0FBQSxTQUFBSyxRQUNmVixVQUFXckQsSUFBSSwrQ0FBVStELE1BRXpCeEgsVUFBa0JxSSxnQkFBa0IsZ0JBQ3BDUixVQUFBLENBQ0FTLFVBQUFwRyxLQUFnQmtGLE9BQU9oQixHQUN2Qm9CLFlBQUF0RixLQUFrQmtGLE9BQUVJLFlBQ3BCZSxZQUFhckcsS0FBRWtGLE9BQUttQixZQUNwQkMsbUJBQW9CdEcsS0FBQ2tGLE9BQU9vQixtQkFDNUJDLGlCQUFBdkcsS0FBdUJrRixPQUFLcUIsaUJBQzVCQyxtQkFBaUJDLFNBQVl6RyxLQUFBa0YsT0FBQXNCLG1CQUFlLElBQzVDRSxjQUFBMUcsS0FBbUJrRixPQUFPd0IsY0FDMUJDLGVBQUEzRyxLQUFBa0YsT0FBNEJ5QixlQUM1QkMsc0JBQXVCNUcsS0FBRWtGLE9BQVMwQixzQkFDbENDLGdCQUFBN0csS0FBQWtGLE9BQUEyQixnQkFDSEMsb0JBQUE5RyxLQUFBa0YsT0FBQTRCLG9CQUVEQyx1QkFBQS9HLEtBQUFrRixPQUFBNkIsdUJBQUFDLHdCQTRCQ1AsU0FBQXpHLEtBQUFrRixPQUFBOEIsd0JBQUEsUUF6QkVsSixVQUFBbUosT0FBQSxXQUNELElBQUlsSCxFQUFNQyxLQUNSQSxLQUFBMkYsVUFBWWdCLHVCQUNiM0csS0FBQTJGLFVBQUFnQixlQUdJM0csS0FBQTJGLFVBQWVpQiw4QkFFWjVHLEtBQUsyRixVQUFVaUIsNEJBRWxCLENBQUExQixPQUFBbEYsS0FBQTJGLDJCQUFNckIsSUFBQSxnQ0FBQXRFLEtBQUF2QixPQUFBLGtCQUFBdUIsS0FBQTJGLFVBQUFTLFVBQUE5RyxHQUFBYSxLQUFBLFNBQUFLLFFBQ0wsUUFBQUEsR0FNQSxPQURFNUQsT0FBTytILEVBQWdCLEVBQXZCL0gsQ0FBdUIsa0JBQUFtRCxFQUFBNEYsVUFBQUwsWUFBQSxXQUN6QnZGLEVBQUE2RixVQUFBN0YsRUFBQTRGLFVBQUFTLFdBTEF4SixPQUFPK0gsRUFBeUMsRUFBaEQvSCxDQUFnRCx3QkFBQTRELEVBQUFqQixJQUFBLG1CQU9qREwsbUJBQU1BLEVBQUFJLFVBQ0wxQyxPQUFBK0gsRUFBQSxFQUFBL0gsQ0FBZ0Isd0JBQXlCc0MsRUFBS0ksS0FBRUosTUFBUyxjQUtoRXRDLE9BQUErSCxFQUFBLEVBQUEvSCxDQUFBLHdCQUFBc0MsRUFBQSxjQXBFQSxtREMxQkgsU0FBQWpELEVBQUE0QyxFQUFBL0MsR0FBQSxhQUFBQSxFQUFBa0IsRUFBQTZCLEdBQUEvQyxFQUFBVSxFQUFBcUMsRUFBQSxrQ0FBQXFJLElBQUEsSUFBQUMsRUFBQXJMLEVBQUEsR0FDOEJzTCxFQUFBdEwsRUFBQSxHQUN5QnVMLEVBQUF2TCxFQUFBNkIsRUFBQXlKLEdBRXRDM0IsRUFBQTNKLEVBQUEsR0FJZndMLEVBQUEsQ0FDQWhDLFlBQUEsR0FDQWUsWUFBYSxTQUNiQyxtQkFBb0IsR0FDcEJDLGlCQUFpQixRQUNqQkMsbUJBQWtCLEVBQ2xCZSxZQUFBLEdBQ0FiLGVBQUEsRUFFRkcsZ0JBQUEsT0FNRUYsZUFBZ0IsR0FDaEJDLHNCQUFZLE1BQXdDLG9CQUM3Q00sRUFBU3JGLEVBQUFDLEVBQUE4QyxFQUFBOUUsRUFBUTRGLEdBQ3RCLElBQUkzRixFQUFDQyxLQUNMQSxLQUFBNEUsWUFDQTVFLEtBQUFGLGFBQ0FFLEtBQUEwRixTQUFlQSxPQUNiUixPQUFLbUMsRUFBU0csRUFBQUMsS0FBQUgsR0FDaEJ0SCxLQUFHMEgsV0FBQSxFQUFBM0IsR0FBQSxLQUlIakcsRUFBSy9DLElBQVUsb0JBQWtCb0QsS0FBQSxTQUFBQyxHQUNsQ0wsRUFBQXRCLE9BQUE3QixPQUFBNkksRUFBQSxFQUFBN0ksQ0FBQXdELGNBWm9GRyxRQUFBLFVBQWEsaURBZ0JsRzJHLEVBQUNwSixVQUFBK0gsTUFBQSxXQUVEN0YsS0FBQTBILFdBQUFyRCxLQUFBLENBQUEwQixHQUFBLFFBQ2NqSSxVQUFHa0ksU0FBQSxTQUFBMUgsR0FDZjBCLEtBQUEwSCxXQUFBekIsT0FBQTNILEVBQUEsTUFFR1IsVUFBQTZKLFVBQUEsV0FDSCxJQUFJNUgsRUFBUUMsS0FDUjRILEVBQUMsS0FDZ0IsUUFBQTVILEtBQUEwSCxXQUFBLFNBQUEzQixLQUNqQjFCLEtBQUkwQixFQUFDQSxrQkFDQXdCLFlBQUFLLEVBQUFDLHVCQUNBdEQsS0FBQSxnQ0FBY3ZFLEtBQUF2QixPQUF3QyxpQkFBQXVCLEtBQUFrRixRQUFBL0UsS0FBQSxTQUFBSyxHQUM1RCxRQUFBQSxFQUNBVCxFQUFBMkYsU0FBQW9DLElBQUEscUJBQUF0SCxFQUFBakIsSUFBQSxTQUVOUSxFQUFBNkUsVUFBQXJELElBQUEsNkNBaENnRCxnREN4QmpELFVBQUF0RixFQUFBNEMsRUFBQS9DLEdBQUEsYUFBQUEsRUFBQWtCLEVBQUE2QixHQUFBL0MsRUFBQSxJQUFBQSxFQUFBLFFBQUFpTSxFQUFBak0sRUFBQSxHQUFBQSxFQUFBVSxFQUFBcUMsRUFBQSwrQkFBQWtKLEVBQUEsaUJBQUFDLEVBQUFsTSxFQUFBLEdBQUFBLEVBQUFVLEVBQUFxQyxFQUFBLG1DQUFBbUosRUFBQSxxQkFBQUMsRUFBQW5NLEVBQUEsSUFBQUEsRUFBQVUsRUFBQXFDLEVBQUEsc0NBQUFvSixFQUFBLG9CQUFpQyxJQUFBQyxFQUFBcE0sRUFBQSxJQUNDQSxFQUFBVSxFQUFBcUMsRUFBQSxrQ0FBQXFKLEVBQUEsZ0JBR3dCLElBQUFDLEVBQUFyTSxFQUFBLDhIQ0oxRCxvQkNBQSIsImZpbGUiOiIuL21vZHVsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxNCk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzBfXzsiLCIgLyoqXG4gICogUmV0dXJucyB0aGUgcmVnaW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUga2VudGlrLWtzXG5cbiAgKiBAcGFyYW0gZGF0YXNvdXJjZXMgXG4gICovXG5mdW5jdGlvbiBnZXRSZWdpb24oZGF0YXNvdXJjZXM6IGFueSk6IHN0cmluZyB7XG4gIGxldCBhUmVnaW9uID0gXCJkZWZhdWx0XCI7XG4gIGZvciAodmFyIGluZGV4IGluIGRhdGFzb3VyY2VzKSB7XG4gICAgaWYgKGRhdGFzb3VyY2VzW2luZGV4XS50eXBlID09PSBcImtlbnRpay1kc1wiKSB7XG4gICAgICBhUmVnaW9uID0gZGF0YXNvdXJjZXNbaW5kZXhdLmpzb25EYXRhLnJlZ2lvbjtcbiAgICAgIGlmIChhUmVnaW9uID09PSAnY3VzdG9tJykge1xuICAgICAgICBjb25zb2xlLmxvZyhcImdldFJlZ2lvbigpOiBDdXN0b20gRHluYW1pYyBVUkw6IFwiICsgZGF0YXNvdXJjZXNbaW5kZXhdLmpzb25EYXRhLmR5bmFtaWNVcmwpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiZ2V0UmVnaW9uKCk6IEN1c3RvbSBEUyBJbmZvOiBcIiArIEpTT04uc3RyaW5naWZ5KGRhdGFzb3VyY2VzW2luZGV4XSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFSZWdpb247XG4gICAgfVxuICB9XG4gIHJldHVybiBhUmVnaW9uO1xufVxuXG5leHBvcnQgeyBnZXRSZWdpb24gfVxuIiwiaW1wb3J0IHsgYXBwRXZlbnRzIH0gZnJvbSAnZ3JhZmFuYS9hcHAvY29yZS9jb3JlJztcbmltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcblxuZnVuY3Rpb24gc2hvd0FsZXJ0KGVycm9yKSB7XG4gIGxldCBtZXNzYWdlID0gJyc7XG4gIG1lc3NhZ2UgKz0gZXJyb3Iuc3RhdHVzID8gYCgke2Vycm9yLnN0YXR1c30pIGAgOiAnJztcbiAgbWVzc2FnZSArPSBlcnJvci5zdGF0dXNUZXh0ID8gZXJyb3Iuc3RhdHVzVGV4dCArICc6ICcgOiAnJztcbiAgaWYgKGVycm9yLmRhdGEgJiYgZXJyb3IuZGF0YS5lcnJvcikge1xuICAgIG1lc3NhZ2UgKz0gZXJyb3IuZGF0YS5lcnJvcjtcbiAgfSBlbHNlIGlmIChlcnJvci5lcnIpIHtcbiAgICBtZXNzYWdlICs9IGVycm9yLmVycjtcbiAgfSBlbHNlIGlmIChfLmlzU3RyaW5nKGVycm9yKSkge1xuICAgIG1lc3NhZ2UgKz0gZXJyb3I7XG4gIH1cblxuICBhcHBFdmVudHMuZW1pdCgnYWxlcnQtZXJyb3InLCBbXCJDYW4ndCBjb25uZWN0IHRvIEtlbnRpayBBUElcIiwgbWVzc2FnZV0pO1xufVxuXG5mdW5jdGlvbiBzaG93Q3VzdG9tQWxlcnQobWVzc2FnZSwgZXhjZXB0aW9uRGF0YSwgZXhjZXB0aW9uVHlwZSkge1xuICBsZXQgZXJyTWVzc2FnZSA9ICcnO1xuICBlcnJNZXNzYWdlICs9IGV4Y2VwdGlvbkRhdGEuc3RhdHVzID8gYCgke2V4Y2VwdGlvbkRhdGEuc3RhdHVzfSkgYCA6ICcnO1xuICBlcnJNZXNzYWdlICs9IGV4Y2VwdGlvbkRhdGEuc3RhdHVzVGV4dCA/IGV4Y2VwdGlvbkRhdGEuc3RhdHVzVGV4dCArICc6ICcgOiAnJztcbiAgaWYgKGV4Y2VwdGlvbkRhdGEuZGF0YSAmJiBleGNlcHRpb25EYXRhLmRhdGEuZXJyb3IpIHtcbiAgICBlcnJNZXNzYWdlICs9IGV4Y2VwdGlvbkRhdGEuZGF0YS5lcnJvcjtcbiAgfSBlbHNlIGlmIChleGNlcHRpb25EYXRhLmVycikge1xuICAgIGVyck1lc3NhZ2UgKz0gZXhjZXB0aW9uRGF0YS5lcnI7XG4gIH0gZWxzZSBpZiAoXy5pc1N0cmluZyhleGNlcHRpb25EYXRhKSkge1xuICAgIGVyck1lc3NhZ2UgKz0gZXhjZXB0aW9uRGF0YTtcbiAgfVxuICBhcHBFdmVudHMuZW1pdChgYWxlcnQtJHtleGNlcHRpb25UeXBlfWAsIFttZXNzYWdlLCBlcnJNZXNzYWdlXSk7XG59XG5cbmV4cG9ydCB7IHNob3dBbGVydCwgc2hvd0N1c3RvbUFsZXJ0IH07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzNfXzsiLCJpbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCB7IGdldFJlZ2lvbiB9IGZyb20gXCIuL3JlZ2lvbkhlbHBlclwiO1xuXG5leHBvcnQgY2xhc3MgS2VudGlrQVBJIHtcbiAgYmFzZVVybDogc3RyaW5nO1xuICByZWdpb246IHN0cmluZztcbiAgYXBpUmVhZHk6IGJvb2xlYW47XG4gIC8qKiBAbmdJbmplY3QgKi9cbiAgY29uc3RydWN0b3IocHVibGljIGJhY2tlbmRTcnY6IGFueSkge1xuICAgIHRoaXMuYXBpUmVhZHkgPSBmYWxzZTtcbiAgICB0aGlzLmJhc2VVcmwgPSBcIi9hcGkvcGx1Z2luLXByb3h5L2tlbnRpay1hcHBcIjtcbiAgICAvLyBnZXQgcmVnaW9uIGZyb20gZGF0YXNvdXJjZVxuICAgIGJhY2tlbmRTcnYuZ2V0KCcvYXBpL2RhdGFzb3VyY2VzJykudGhlbiggKGFsbERTOiBhbnkpID0+IHtcbiAgICAgIHRoaXMucmVnaW9uID0gZ2V0UmVnaW9uKGFsbERTKTtcbiAgICAgIHRoaXMuc2V0UmVnaW9uKHRoaXMucmVnaW9uKTtcbiAgICAgIHRoaXMuYXBpUmVhZHkgPSB0cnVlO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0UmVnaW9uKHJlZ2lvbjogc3RyaW5nKSB7XG4gICAgdGhpcy5yZWdpb24gPSByZWdpb247XG4gIH1cblxuICBhc3luYyBnZXREZXZpY2VzKCkge1xuICAgIHRoaXMuYmFja2VuZFNydi5nZXQoJy9hcGkvZGF0YXNvdXJjZXMnKS50aGVuKCAoYWxsRFM6IGFueSkgPT4ge1xuICAgICAgdGhpcy5yZWdpb24gPSBnZXRSZWdpb24oYWxsRFMpO1xuICAgICAgdGhpcy5zZXRSZWdpb24odGhpcy5yZWdpb24pO1xuICAgICAgdGhpcy5hcGlSZWFkeSA9IHRydWU7XG4gICAgfSk7XG5cbiAgICBjb25zdCByZXNwID0gYXdhaXQgdGhpcy5fZ2V0KCcvYXBpL3Y1L2RldmljZXMnKTtcblxuICAgIGlmIChyZXNwLmRhdGEgJiYgcmVzcC5kYXRhLmRldmljZXMpIHtcbiAgICAgIHJldHVybiByZXNwLmRhdGEuZGV2aWNlcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJzKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLl9nZXQoJy9hcGkvdjUvdXNlcnMnKVxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZ2V0RmllbGRWYWx1ZXMoZmllbGQ6IHN0cmluZykge1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFNFTEVDVCBESVNUSU5DVCAke2ZpZWxkfSBGUk9NIGFsbF9kZXZpY2VzIE9SREVSIEJZICR7ZmllbGR9IEFTQ2A7XG4gICAgcmV0dXJuIHRoaXMuaW52b2tlU1FMUXVlcnkocXVlcnkpO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q3VzdG9tRGltZW5zaW9ucygpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5fZ2V0KCcvYXBpL3Y1L2N1c3RvbWRpbWVuc2lvbnMnKTtcbiAgICByZXR1cm4gZGF0YS5kYXRhLmN1c3RvbURpbWVuc2lvbnM7XG4gIH1cblxuICBhc3luYyBnZXRTYXZlZEZpbHRlcnMoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuX2dldCgnL2FwaS92NS9zYXZlZC1maWx0ZXJzJyk7XG4gICAgcmV0dXJuIGRhdGEuZGF0YTtcbiAgfVxuXG4gIGludm9rZVRvcFhEYXRhUXVlcnkocXVlcnk6IGFueSkge1xuICAgIGNvbnN0IGtlbnRpa1Y1UXVlcnkgPSB7XG4gICAgICBxdWVyaWVzOiBbeyBxdWVyeTogcXVlcnksIGJ1Y2tldEluZGV4OiAwIH1dLFxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpcy5fcG9zdCgnL2FwaS92NS9xdWVyeS90b3BYZGF0YScsIGtlbnRpa1Y1UXVlcnkpO1xuICB9XG5cbiAgaW52b2tlU1FMUXVlcnkocXVlcnk6IGFueSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBxdWVyeTogcXVlcnksXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLl9wb3N0KCcvYXBpL3Y1L3F1ZXJ5L3NxbCcsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgX2dldCh1cmw6IHN0cmluZykge1xuICAgIC8vIGlmIHRoZSByZWdpb24gaXMgbm90IHNldCwgZ2V0IGl0IGZyb20gdGhlIGRhdGFzb3VyY2VcbiAgICBpZiAodHlwZW9mIHRoaXMucmVnaW9uID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy9jb25zb2xlLmxvZyhcIl9nZXQ6IHRoaXMucmVnaW9uIFVOREVGSU5FRCwgZmV0Y2hpbmdcIik7XG4gICAgICBhd2FpdCB0aGlzLmJhY2tlbmRTcnYuZ2V0KCcvYXBpL2RhdGFzb3VyY2VzJykudGhlbiggKGFsbERTOiBhbnkpID0+IHtcbiAgICAgICAgdGhpcy5zZXRSZWdpb24oZ2V0UmVnaW9uKGFsbERTKSk7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJrZW50aWtBUEk6IF9nZXQ6IEZFVENIRUQgcmVnaW9uIFwiICsgdGhpcy5yZWdpb24pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuYmFja2VuZFNydlxuICAgICAgLmRhdGFzb3VyY2VSZXF1ZXN0KHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgdXJsOiB0aGlzLmJhc2VVcmwgKyBcIi9cIiArIHRoaXMucmVnaW9uICsgdXJsLFxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICBpZiAoZXJyb3IuZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yLmVycik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBhc3luYyBfcG9zdCh1cmw6IHN0cmluZywgZGF0YTogYW55KSB7XG4gICAgLy8gaWYgdGhlIHJlZ2lvbiBpcyBub3Qgc2V0LCBnZXQgaXQgZnJvbSB0aGUgZGF0YXNvdXJjZVxuICAgIGlmICh0eXBlb2YgdGhpcy5yZWdpb24gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvL2NvbnNvbGUubG9nKFwia2VudGlrQVBJLl9wb3N0OiB0aGlzLnJlZ2lvbiBVTkRFRklORUQsIGZldGNoaW5nXCIpO1xuICAgICAgYXdhaXQgdGhpcy5iYWNrZW5kU3J2LmdldCgnL2FwaS9kYXRhc291cmNlcycpLnRoZW4oIChhbGxEUzogYW55KSA9PiB7XG4gICAgICAgIHRoaXMuc2V0UmVnaW9uKGdldFJlZ2lvbihhbGxEUykpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwia2VudGlrQVBJLl9wb3N0OiBGRVRDSEVEIHJlZ2lvbiBcIiArIHRoaXMucmVnaW9uKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5iYWNrZW5kU3J2XG4gICAgICAuZGF0YXNvdXJjZVJlcXVlc3Qoe1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgdXJsOiB0aGlzLmJhc2VVcmwgKyBcIi9cIiArIHRoaXMucmVnaW9uICsgdXJsLFxuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgfSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgaWYgKGVycm9yLmVycikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvci5lcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG59XG5cbmFuZ3VsYXIubW9kdWxlKCdncmFmYW5hLnNlcnZpY2VzJykuc2VydmljZSgna2VudGlrQVBJU3J2JywgS2VudGlrQVBJKTtcbiIsImltcG9ydCBjb25maWdUZW1wbGF0ZSBmcm9tICcuL2NvbmZpZy5odG1sJztcbmltcG9ydCB7IEtlbnRpa0FQSSB9IGZyb20gJy4uL2RhdGFzb3VyY2Uva2VudGlrQVBJJztcbmltcG9ydCB7IHNob3dBbGVydCwgc2hvd0N1c3RvbUFsZXJ0IH0gZnJvbSBcIi4uL2RhdGFzb3VyY2UvYWxlcnRIZWxwZXJcIjtcblxuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuXG5jbGFzcyBLZW50aWtDb25maWdDdHJsIHtcbiAgYXBwRWRpdEN0cmw6IGFueTtcbiAgYXBwTW9kZWw6IGFueTtcbiAgYXBpVmFsaWRhdGVkOiBib29sZWFuO1xuICBhcGlFcnJvcjogYm9vbGVhbjtcbiAga2VudGlrOiBLZW50aWtBUEk7XG4gIHN0YXRpYyB0ZW1wbGF0ZTogYW55O1xuICByZWdpb25UeXBlcyA9IFtcbiAgICB7IHZhbHVlOiBcImRlZmF1bHRcIiwgdGV4dDogXCJVUyAoZGVmYXVsdClcIiB9LFxuICAgIHsgdmFsdWU6IFwiZXVcIiwgdGV4dDogXCJFVVwiIH0sXG4gICAgeyB2YWx1ZTogXCJjdXN0b21cIiwgdGV4dDogXCJDdXN0b21cIiB9XG4gIF07XG5cbiAgLyoqIEBuZ0luamVjdCAqL1xuICBjb25zdHJ1Y3Rvcigkc2NvcGUsICRpbmplY3RvciwgcHVibGljIGJhY2tlbmRTcnY6IGFueSkge1xuICAgIHRoaXMuYXBwRWRpdEN0cmwuc2V0UHJlVXBkYXRlSG9vayh0aGlzLnByZVVwZGF0ZS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmFwcEVkaXRDdHJsLnNldFBvc3RVcGRhdGVIb29rKHRoaXMucG9zdFVwZGF0ZS5iaW5kKHRoaXMpKTtcblxuICAgIGlmICghdGhpcy5hcHBNb2RlbC5qc29uRGF0YSkge1xuICAgICAgdGhpcy5hcHBNb2RlbC5qc29uRGF0YSA9IHt9O1xuICAgIH1cbiAgICBpZiAoIXRoaXMuYXBwTW9kZWwuc2VjdXJlSnNvbkRhdGEpIHtcbiAgICAgIHRoaXMuYXBwTW9kZWwuc2VjdXJlSnNvbkRhdGEgPSB7fTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0aGlzLmFwcE1vZGVsLmpzb25EYXRhLnJlZ2lvbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuYXBwTW9kZWwuanNvbkRhdGEucmVnaW9uID0gXCJkZWZhdWx0XCI7XG4gICAgfVxuICAgIHRoaXMuYXBpVmFsaWRhdGVkID0gZmFsc2U7XG4gICAgdGhpcy5hcGlFcnJvciA9IGZhbHNlO1xuICAgIHRoaXMua2VudGlrID0gbmV3IEtlbnRpa0FQSSh0aGlzLmJhY2tlbmRTcnYpO1xuICAgIHRoaXMua2VudGlrLnNldFJlZ2lvbih0aGlzLmFwcE1vZGVsLmpzb25EYXRhLnJlZ2lvbik7XG4gICAgaWYgKHRoaXMuYXBwTW9kZWwuZW5hYmxlZCAmJiB0aGlzLmFwcE1vZGVsLmpzb25EYXRhLnRva2VuU2V0KSB7XG4gICAgICB0aGlzLnZhbGlkYXRlQXBpQ29ubmVjdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIHByZVVwZGF0ZSgpIHtcbiAgICBpZiAodGhpcy5hcHBNb2RlbC5zZWN1cmVKc29uRGF0YS50b2tlbikge1xuICAgICAgdGhpcy5hcHBNb2RlbC5qc29uRGF0YS50b2tlblNldCA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaW5pdERhdGFzb3VyY2UoKTtcbiAgfVxuXG4gIGFzeW5jIHBvc3RVcGRhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmFwcE1vZGVsLmVuYWJsZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnZhbGlkYXRlQXBpQ29ubmVjdGlvbigpOyAgICBcbiAgICBhd2FpdCB0aGlzLmFwcEVkaXRDdHJsLmltcG9ydERhc2hib2FyZHMoKTtcblxuICAgIHJldHVybiB7XG4gICAgICB1cmw6ICdkYXNoYm9hcmQvZGIva2VudGlrLWhvbWUnLFxuICAgICAgbWVzc2FnZTogJ0tlbnRpayBDb25uZWN0IFBybyBhcHAgaW5zdGFsbGVkIScsXG4gICAgfTtcbiAgfVxuXG4gIC8vIG1ha2Ugc3VyZSB0aGF0IHdlIGNhbiBoaXQgdGhlIEtlbnRpayBBUEkuXG4gIGFzeW5jIHZhbGlkYXRlQXBpQ29ubmVjdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMua2VudGlrLmdldFVzZXJzKCk7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIHJlc3VsdC5oYXNPd25Qcm9wZXJ0eSgnZGF0YScpICkge1xuICAgICAgICAgIHRoaXMuYXBpVmFsaWRhdGVkID0gdHJ1ZTtcbiAgICAgICAgICBzaG93Q3VzdG9tQWxlcnQoJ0FQSSB3b3JraW5nIScsICcnLCAnc3VjY2VzcycpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHNob3dBbGVydChcIlVuZXhwZWN0ZWQgcmVzdWx0IGZyb20gQVBJOiBcIiArIGUpO1xuICAgICAgICB0aGlzLmFwaVZhbGlkYXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFwaUVycm9yID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBzaG93QWxlcnQoZSk7XG4gICAgICB0aGlzLmFwaVZhbGlkYXRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5hcGlFcnJvciA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5hcHBNb2RlbC5qc29uRGF0YS5lbWFpbCA9ICcnO1xuICAgIHRoaXMuYXBwTW9kZWwuanNvbkRhdGEudG9rZW5TZXQgPSBmYWxzZTtcbiAgICB0aGlzLmFwcE1vZGVsLmpzb25EYXRhLnJlZ2lvbiA9IFwiZGVmYXVsdFwiO1xuICAgIHRoaXMuYXBwTW9kZWwuanNvbkRhdGEuZHluYW1pY1VybCA9IFwiXCI7XG4gICAgdGhpcy5hcHBNb2RlbC5zZWN1cmVKc29uRGF0YSA9IHt9O1xuICAgIHRoaXMuYXBpVmFsaWRhdGVkID0gZmFsc2U7XG4gIH1cblxuICBpbml0RGF0YXNvdXJjZSgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAvL2NoZWNrIGZvciBleGlzdGluZyBkYXRhc291cmNlLlxuICAgIHJldHVybiBzZWxmLmJhY2tlbmRTcnYuZ2V0KCcvYXBpL2RhdGFzb3VyY2VzJykudGhlbihyZXN1bHRzID0+IHtcbiAgICAgIGxldCBmb3VuZEtlbnRpa0RTID0gZmFsc2U7XG4gICAgICBsZXQgdXBkYXRlS2VudGlrRFMgPSBmYWxzZTtcbiAgICAgIGxldCBkc0lEID0gTmFOO1xuICAgICAgXy5mb3JFYWNoKHJlc3VsdHMsIGRzID0+IHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIkZvdW5kIGEgZGF0YXNvdXJjZSwgdHlwZSBpczogXCIgKyBkcy50eXBlKTtcbiAgICAgICAgLy8gdXNlIHRoZSB0eXBlXG4gICAgICAgIGlmIChkcy50eXBlID09PSAna2VudGlrLWRzJykge1xuICAgICAgICAgIGZvdW5kS2VudGlrRFMgPSB0cnVlO1xuICAgICAgICAgIGRzSUQgPSBkcy5pZDtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiY29uZmlnLmluaXREYXRhc291cmNlOiBmb3VuZCBleGlzdGluZyBkYXRhc291cmNlIHdpdGggcmVnaW9uOiBcIiArIGRzLmpzb25EYXRhLnJlZ2lvbik7XG4gICAgICAgICAgdXBkYXRlS2VudGlrRFMgPSB0cnVlO1xuXG4gICAgICAgICAgaWYgKGRzLmpzb25EYXRhLnJlZ2lvbiAhPT0gdGhpcy5hcHBNb2RlbC5qc29uRGF0YS5yZWdpb24pIHtcbiAgICAgICAgICAgIHVwZGF0ZUtlbnRpa0RTID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRzLmpzb25EYXRhICE9PSB0aGlzLmFwcE1vZGVsLmpzb25EYXRhKSB7XG4gICAgICAgICAgICB1cGRhdGVLZW50aWtEUyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgICAgaWYgKCFmb3VuZEtlbnRpa0RTIHx8IHVwZGF0ZUtlbnRpa0RTKSB7XG4gICAgICAgIC8vIGNyZWF0ZSBkYXRhc291cmNlXG4gICAgICAgIGNvbnN0IGtlbnRpayA9IHtcbiAgICAgICAgICBuYW1lOiAna2VudGlrJyxcbiAgICAgICAgICB0eXBlOiAna2VudGlrLWRzJyxcbiAgICAgICAgICBhY2Nlc3M6ICdwcm94eScsXG4gICAgICAgICAganNvbkRhdGE6IHNlbGYuYXBwTW9kZWwuanNvbkRhdGEsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh1cGRhdGVLZW50aWtEUykge1xuICAgICAgICAgIHByb21pc2VzLnB1c2goc2VsZi5iYWNrZW5kU3J2LnB1dChgL2FwaS9kYXRhc291cmNlcy8ke2RzSUR9YCwga2VudGlrKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvbWlzZXMucHVzaChzZWxmLmJhY2tlbmRTcnYucG9zdCgnL2FwaS9kYXRhc291cmNlcycsIGtlbnRpaykpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyB1cGRhdGUgcmVxdWlyZXMgYSBQVVQgd2l0aCB0aGUgaWRcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgfSk7XG4gIH1cbn1cblxuS2VudGlrQ29uZmlnQ3RybC50ZW1wbGF0ZSA9IGNvbmZpZ1RlbXBsYXRlO1xuXG5leHBvcnQgeyBLZW50aWtDb25maWdDdHJsIGFzIENvbmZpZ0N0cmwgfTtcbiIsImltcG9ydCB7IEtlbnRpa0FQSSB9IGZyb20gJy4uL2RhdGFzb3VyY2Uva2VudGlrQVBJJztcbmltcG9ydCB7IHNob3dBbGVydCB9IGZyb20gXCIuLi9kYXRhc291cmNlL2FsZXJ0SGVscGVyXCI7XG5cbmltcG9ydCB7IGdldFJlZ2lvbiB9IGZyb20gXCIuLi9kYXRhc291cmNlL3JlZ2lvbkhlbHBlclwiO1xuY2xhc3MgRGV2aWNlTGlzdEN0cmwge1xuICBzdGF0aWMgdGVtcGxhdGVVcmw6IHN0cmluZztcbiAgZGV2aWNlczogYW55W107XG4gIHBhZ2VSZWFkeTogYm9vbGVhbjtcbiAga2VudGlrOiBLZW50aWtBUEk7XG5cbiAgLyoqIEBuZ0luamVjdCAqL1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlICRzY29wZSwgJGluamVjdG9yLCBwdWJsaWMgJGxvY2F0aW9uOiBhbnksIHB1YmxpYyBiYWNrZW5kU3J2OiBhbnkpIHtcbiAgICB0aGlzLmRldmljZXMgPSBbXTtcbiAgICB0aGlzLnBhZ2VSZWFkeSA9IGZhbHNlO1xuICAgIHRoaXMua2VudGlrID0gbmV3IEtlbnRpa0FQSSh0aGlzLmJhY2tlbmRTcnYpO1xuICAgIHRoaXMuZ2V0RGV2aWNlcygpO1xuICB9XG5cbiAgZ2V0RGV2aWNlcygpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5rZW50aWsuZ2V0RGV2aWNlcygpLnRoZW4oKGRldmljZXMpID0+IHtcbiAgICAgICAgdGhpcy5kZXZpY2VzID0gZGV2aWNlcztcbiAgICAgICAgdGhpcy5wYWdlUmVhZHkgPSB0cnVlO1xuICAgICAgICB0aGlzLiRzY29wZS4kYXBwbHkoKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHNob3dBbGVydChlKTtcbiAgICB9XG4gIH1cblxuICByZWZyZXNoKCkge1xuICAgIHRoaXMuZ2V0RGV2aWNlcygpO1xuICB9XG5cbiAgZ290b0Rhc2hib2FyZChkZXZpY2UpIHtcbiAgICB0aGlzLiRsb2NhdGlvbi5wYXRoKCcvZGFzaGJvYXJkL2RiL2tlbnRpay10b3AtdGFsa2VycycpLnNlYXJjaCh7ICd2YXItZGV2aWNlJzogZGV2aWNlLmRldmljZV9uYW1lIH0pO1xuICB9XG5cbiAgZ290b0RldmljZURldGFpbChkZXZpY2UpIHtcbiAgICB0aGlzLiRsb2NhdGlvbi51cmwoJy9wbHVnaW5zL2tlbnRpay1hcHAvcGFnZS9kZXZpY2UtZGV0YWlscz9kZXZpY2U9JyArIGRldmljZS5pZCk7XG4gIH1cbn1cblxuRGV2aWNlTGlzdEN0cmwudGVtcGxhdGVVcmwgPSAnY29tcG9uZW50cy9kZXZpY2VfbGlzdC5odG1sJztcblxuZXhwb3J0IHsgRGV2aWNlTGlzdEN0cmwgfTtcbiIsImltcG9ydCB7IEtlbnRpa0FQSSB9IGZyb20gJy4uL2RhdGFzb3VyY2Uva2VudGlrQVBJJztcbmltcG9ydCB7IHNob3dDdXN0b21BbGVydCB9IGZyb20gXCIuLi9kYXRhc291cmNlL2FsZXJ0SGVscGVyXCI7XG5pbXBvcnQgeyBnZXRSZWdpb24gfSBmcm9tIFwiLi4vZGF0YXNvdXJjZS9yZWdpb25IZWxwZXJcIjtcblxuZXhwb3J0IGNsYXNzIERldmljZURldGFpbHNDdHJsIHtcbiAgc3RhdGljIHRlbXBsYXRlVXJsOiBzdHJpbmc7XG4gIGRldmljZTogYW55O1xuICBkZXZpY2VEVE86IGFueTtcbiAgcGFnZVJlYWR5OiBib29sZWFuO1xuICBvdGhlcklwczogYW55O1xuICBrZW50aWs6IEtlbnRpa0FQSTtcbiAgcmVnaW9uOiBzdHJpbmc7XG5cbiAgLyoqIEBuZ0luamVjdCAqL1xuICBjb25zdHJ1Y3Rvcigkc2NvcGUsICRpbmplY3RvciwgcHVibGljICRsb2NhdGlvbjogYW55LCBwdWJsaWMgYmFja2VuZFNydjogYW55LCBwdWJsaWMgYWxlcnRTcnY6IGFueSkge1xuICAgIHRoaXMuZGV2aWNlID0ge307XG4gICAgdGhpcy5kZXZpY2VEVE8gPSB7fTtcbiAgICB0aGlzLnBhZ2VSZWFkeSA9IGZhbHNlO1xuICAgIC8vIGdldCByZWdpb24gZnJvbSBkYXRhc291cmNlXG4gICAgLy90aGlzLnJlZ2lvbiA9IFwiZGVmYXVsdFwiO1xuICAgIGJhY2tlbmRTcnYuZ2V0KCcvYXBpL2RhdGFzb3VyY2VzJykudGhlbiggKGFsbERTOiBhbnkpID0+IHtcbiAgICAgIHRoaXMucmVnaW9uID0gZ2V0UmVnaW9uKGFsbERTKTtcbiAgICAgIHRoaXMua2VudGlrID0gbmV3IEtlbnRpa0FQSSh0aGlzLmJhY2tlbmRTcnYpO1xuICAgICAgdGhpcy5rZW50aWsuc2V0UmVnaW9uKHRoaXMucmVnaW9uKTtcbiAgICAgIHRoaXMuZ2V0RGV2aWNlKCRsb2NhdGlvbi5zZWFyY2goKS5kZXZpY2UpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSVAoKSB7XG4gICAgdGhpcy5vdGhlcklwcy5wdXNoKHsgaXA6ICcnIH0pO1xuICB9XG5cbiAgcmVtb3ZlSVAoaW5kZXgpIHtcbiAgICB0aGlzLm90aGVySXBzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cblxuICBnZXREZXZpY2UoZGV2aWNlSWQpIHtcbiAgICB0aGlzLmJhY2tlbmRTcnYuZ2V0KGAvYXBpL3BsdWdpbi1wcm94eS9rZW50aWstYXBwLyR7dGhpcy5yZWdpb259L2FwaS92NS9kZXZpY2UvYCArIGRldmljZUlkKS50aGVuKHJlc3AgPT4ge1xuICAgICAgdGhpcy5kZXZpY2UgPSByZXNwLmRldmljZTtcbiAgICAgIHRoaXMudXBkYXRlRGV2aWNlRFRPKCk7XG4gICAgICB0aGlzLnBhZ2VSZWFkeSA9IHRydWU7XG4gICAgfSk7XG4gIH1cblxuICBnb3RvRGFzaGJvYXJkKGRldmljZV9uYW1lKSB7XG4gICAgdGhpcy4kbG9jYXRpb24udXJsKCcvZGFzaGJvYXJkL2RiL2tlbnRpay10b3AtdGFsa2Vycz92YXItZGV2aWNlPScgKyBkZXZpY2VfbmFtZSk7XG4gIH1cblxuICB1cGRhdGVEZXZpY2VEVE8oKSB7XG4gICAgdGhpcy5kZXZpY2VEVE8gPSB7XG4gICAgICBkZXZpY2VfaWQ6IHRoaXMuZGV2aWNlLmlkLFxuICAgICAgZGV2aWNlX25hbWU6IHRoaXMuZGV2aWNlLmRldmljZV9uYW1lLFxuICAgICAgZGV2aWNlX3R5cGU6IHRoaXMuZGV2aWNlLmRldmljZV90eXBlLFxuICAgICAgZGV2aWNlX2Rlc2NyaXB0aW9uOiB0aGlzLmRldmljZS5kZXZpY2VfZGVzY3JpcHRpb24sXG4gICAgICBkZXZpY2VfZmxvd190eXBlOiB0aGlzLmRldmljZS5kZXZpY2VfZmxvd190eXBlLFxuICAgICAgZGV2aWNlX3NhbXBsZV9yYXRlOiBwYXJzZUludCh0aGlzLmRldmljZS5kZXZpY2Vfc2FtcGxlX3JhdGUsIDEwKSxcbiAgICAgIG1pbmltaXplX3NubXA6IHRoaXMuZGV2aWNlLm1pbmltaXplX3NubXAsXG4gICAgICBkZXZpY2Vfc25tcF9pcDogdGhpcy5kZXZpY2UuZGV2aWNlX3NubXBfaXAsXG4gICAgICBkZXZpY2Vfc25tcF9jb21tdW5pdHk6IHRoaXMuZGV2aWNlLmRldmljZV9zbm1wX2NvbW11bml0eSxcbiAgICAgIGRldmljZV9iZ3BfdHlwZTogdGhpcy5kZXZpY2UuZGV2aWNlX2JncF90eXBlLFxuICAgICAgZGV2aWNlX2JncF9wYXNzd29yZDogdGhpcy5kZXZpY2UuZGV2aWNlX2JncF9wYXNzd29yZCxcbiAgICAgIGRldmljZV9iZ3BfbmVpZ2hib3JfaXA6IHRoaXMuZGV2aWNlLmRldmljZV9iZ3BfbmVpZ2hib3JfaXAsXG4gICAgICBkZXZpY2VfYmdwX25laWdoYm9yX2FzbjogcGFyc2VJbnQodGhpcy5kZXZpY2UuZGV2aWNlX2JncF9uZWlnaGJvcl9hc24sIDEwKSxcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGlmICghdGhpcy5kZXZpY2VEVE8uZGV2aWNlX3NubXBfaXApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmRldmljZURUTy5kZXZpY2Vfc25tcF9pcDtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmRldmljZURUTy5kZXZpY2Vfc25tcF9jb21tdW5pdHkpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmRldmljZURUTy5kZXZpY2Vfc25tcF9jb21tdW5pdHk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSB7IGRldmljZTogdGhpcy5kZXZpY2VEVE8gfTtcblxuICAgIHRoaXMuYmFja2VuZFNydi5wdXQoYC9hcGkvcGx1Z2luLXByb3h5L2tlbnRpay1hcHAvJHt0aGlzLnJlZ2lvbn0vYXBpL3Y1L2RldmljZS9gICsgdGhpcy5kZXZpY2VEVE8uZGV2aWNlX2lkLCBkYXRhKS50aGVuKFxuICAgICAgcmVzcCA9PiB7XG4gICAgICAgIGlmICgnZXJyJyBpbiByZXNwKSB7XG4gICAgICAgICAgc2hvd0N1c3RvbUFsZXJ0KCdEZXZpY2UgVXBkYXRlIGZhaWxlZC4nLCByZXNwLmVyciwgJ2Vycm9yJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hvd0N1c3RvbUFsZXJ0KCdEZXZpY2UgVXBkYXRlZC4nLCB0aGlzLmRldmljZURUTy5kZXZpY2VfbmFtZSwgJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXREZXZpY2UodGhpcy5kZXZpY2VEVE8uZGV2aWNlX2lkKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGVycm9yID0+IHtcbiAgICAgICAgaWYgKCdlcnJvcicgaW4gZXJyb3IuZGF0YSkge1xuICAgICAgICAgIHNob3dDdXN0b21BbGVydCgnRGV2aWNlIFVwZGF0ZSBmYWlsZWQuJywgZXJyb3IuZGF0YS5lcnJvciwgJ2Vycm9yJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNob3dDdXN0b21BbGVydCgnRGV2aWNlIFVwZGF0ZSBmYWlsZWQuJywgZXJyb3IsICdlcnJvcicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH1cbn1cblxuRGV2aWNlRGV0YWlsc0N0cmwudGVtcGxhdGVVcmwgPSAnY29tcG9uZW50cy9kZXZpY2VfZGV0YWlscy5odG1sJztcbiIsImltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgZ2V0UmVnaW9uIH0gZnJvbSBcIi4uL2RhdGFzb3VyY2UvcmVnaW9uSGVscGVyXCI7XG5cbmNvbnN0IGRlZmF1bHRzID0ge1xuICBkZXZpY2VfbmFtZTogJycsXG4gIGRldmljZV90eXBlOiAncm91dGVyJyxcbiAgZGV2aWNlX2Rlc2NyaXB0aW9uOiAnJyxcbiAgZGV2aWNlX2Zsb3dfdHlwZTogJ3NmbG93JyxcbiAgZGV2aWNlX3NhbXBsZV9yYXRlOiA1LFxuICBzZW5kaW5nX2lwczogJycsXG4gIG1pbmltaXplX3NubXA6IGZhbHNlLFxuICBkZXZpY2VfYmdwX3R5cGU6ICdub25lJyxcbiAgZGV2aWNlX3NubXBfaXA6ICcnLFxuICBkZXZpY2Vfc25tcF9jb21tdW5pdHk6ICcnLFxufTtcblxuZXhwb3J0IGNsYXNzIEFkZERldmljZUN0cmwge1xuICBzdGF0aWMgdGVtcGxhdGVVcmw6IHN0cmluZztcbiAgZGV2aWNlOiBhbnk7XG4gIHNlbmRpbmdJcHM6IGFueVtdO1xuICByZWdpb246IHN0cmluZztcblxuICAvKiogQG5nSW5qZWN0ICovXG4gIGNvbnN0cnVjdG9yKCRzY29wZSwgJGluamVjdG9yLCBwdWJsaWMgJGxvY2F0aW9uOiBhbnksIHB1YmxpYyBiYWNrZW5kU3J2OiBhbnksIHB1YmxpYyBhbGVydFNydjogYW55KSB7XG4gICAgdGhpcy5kZXZpY2UgPSBhbmd1bGFyLmNvcHkoZGVmYXVsdHMpO1xuICAgIHRoaXMuc2VuZGluZ0lwcyA9IFt7IGlwOiAnJyB9XTtcbiAgICAvLyBnZXQgcmVnaW9uIGZyb20gZGF0YXNvdXJjZVxuICAgIC8vdGhpcy5yZWdpb24gPSBcImRlZmF1bHRcIjtcbiAgICBiYWNrZW5kU3J2LmdldCgnL2FwaS9kYXRhc291cmNlcycpLnRoZW4oIChhbGxEUzogYW55KSA9PiB7XG4gICAgICB0aGlzLnJlZ2lvbiA9IGdldFJlZ2lvbihhbGxEUyk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJUCgpIHtcbiAgICB0aGlzLnNlbmRpbmdJcHMucHVzaCh7IGlwOiAnJyB9KTtcbiAgfVxuXG4gIHJlbW92ZUlQKGluZGV4KSB7XG4gICAgdGhpcy5zZW5kaW5nSXBzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cblxuICBhZGREZXZpY2UoKSB7XG4gICAgY29uc3QgaXBzID0gW107XG4gICAgXy5mb3JFYWNoKHRoaXMuc2VuZGluZ0lwcywgaXAgPT4ge1xuICAgICAgaXBzLnB1c2goaXAuaXApO1xuICAgIH0pO1xuICAgIHRoaXMuZGV2aWNlLnNlbmRpbmdfaXBzID0gaXBzLmpvaW4oKTtcbiAgICB0aGlzLmJhY2tlbmRTcnYucG9zdChgL2FwaS9wbHVnaW4tcHJveHkva2VudGlrLWFwcC8ke3RoaXMucmVnaW9ufS9hcGkvdjUvZGV2aWNlYCwgdGhpcy5kZXZpY2UpLnRoZW4ocmVzcCA9PiB7XG4gICAgICBpZiAoJ2VycicgaW4gcmVzcCkge1xuICAgICAgICB0aGlzLmFsZXJ0U3J2LnNldCgnRGV2aWNlIEFkZCBmYWlsZWQuJywgcmVzcC5lcnIsICdlcnJvcicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4kbG9jYXRpb24udXJsKCcvcGx1Z2lucy9rZW50aWstYXBwL3BhZ2UvZGV2aWNlLWxpc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5BZGREZXZpY2VDdHJsLnRlbXBsYXRlVXJsID0gJ2NvbXBvbmVudHMvYWRkX2RldmljZS5odG1sJztcbiIsImltcG9ydCAnLi9zYXNzL2tlbnRpay5kYXJrLnNjc3MnO1xuaW1wb3J0ICcuL3Nhc3Mva2VudGlrLmxpZ2h0LnNjc3MnO1xuXG5pbXBvcnQgeyBDb25maWdDdHJsIH0gZnJvbSAnLi9jb25maWcvY29uZmlnJztcbmltcG9ydCB7IERldmljZUxpc3RDdHJsIH0gZnJvbSAnLi9jb21wb25lbnRzL2RldmljZV9saXN0JztcbmltcG9ydCB7IERldmljZURldGFpbHNDdHJsIH0gZnJvbSAnLi9jb21wb25lbnRzL2RldmljZV9kZXRhaWxzJztcbmltcG9ydCB7IEFkZERldmljZUN0cmwgfSBmcm9tICcuL2NvbXBvbmVudHMvYWRkX2RldmljZSc7XG5pbXBvcnQgeyBsb2FkUGx1Z2luQ3NzIH0gZnJvbSAnZ3JhZmFuYS9hcHAvcGx1Z2lucy9zZGsnO1xuXG5sb2FkUGx1Z2luQ3NzKHtcbiAgZGFyazogJ3BsdWdpbnMva2VudGlrLWFwcC9jc3Mva2VudGlrLmRhcmsuY3NzJyxcbiAgbGlnaHQ6ICdwbHVnaW5zL2tlbnRpay1hcHAvY3NzL2tlbnRpay5saWdodC5jc3MnLFxufSk7XG5cbmV4cG9ydCB7IERldmljZUxpc3RDdHJsLCBEZXZpY2VEZXRhaWxzQ3RybCwgQWRkRGV2aWNlQ3RybCwgQ29uZmlnQ3RybCB9O1xuIiwiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW4iLCIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpbiJdLCJzb3VyY2VSb290IjoiIn0=