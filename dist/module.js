define(["lodash","angular","app/core/core","app/plugins/sdk"],(function(e,t,n,i){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(t,n){t.exports=e},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var i=n(4),r=n(0);function o(e){var t="";t+=e.status?"("+e.status+") ":"",t+=e.statusText?e.statusText+": ":"",e.data&&e.data.error?t+=e.data.error:e.err?t+=e.err:r.isString(e)&&(t+=e),i.appEvents.emit("alert-error",["Can't connect to Kentik API",t])}function a(e,t,n){var o="";o+=t.status?"("+t.status+") ":"",o+=t.statusText?t.statusText+": ":"",t.data&&t.data.error?o+=t.data.error:t.err?o+=t.err:r.isString(t)&&(o+=t),i.appEvents.emit("alert-"+n,[e,o])}},function(e,t,n){"use strict";function i(e){var t="default";for(var n in e)if("kentik-ds"===e[n].type)return"custom"===(t=e[n].jsonData.region)&&console.log("getRegion(): Custom Dynamic URL: "+e[n].jsonData.dynamicUrl),t;return t}n.d(t,"a",(function(){return i}))},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(2),r=n(1),o=n(3),a=n.n(o),s=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,s)}c((i=i.apply(e,t||[])).next())}))},c=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},u=function(){function e(e,t){this.backendSrv=e,this.$http=t,this.apiReady=!1,this.baseUrl="/api/plugin-proxy/kentik-app"}return e.$inject=["backendSrv","$http"],e.prototype._getRegionFromDatasource=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return[4,this.backendSrv.get("/api/datasources")];case 1:return e=t.sent(),this.region=Object(i.a)(e),this.apiReady=!0,[2]}}))}))},e.prototype.setRegion=function(e){this.region=e},e.prototype.getDevices=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return[4,this._get("/api/v5/devices")];case 1:return(e=t.sent()).data&&e.data.devices?[2,e.data.devices]:[2,[]]}}))}))},e.prototype.getUsers=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2,this._get("/api/v5/users")]}))}))},e.prototype.getFieldValues=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){return t="SELECT DISTINCT "+e+" FROM all_devices ORDER BY "+e+" ASC",[2,this.invokeSQLQuery(t)]}))}))},e.prototype.getCustomDimensions=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this._get("/api/v5/customdimensions")];case 1:return[2,e.sent().data.customDimensions]}}))}))},e.prototype.getSavedFilters=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this._get("/api/v5/saved-filters")];case 1:return[2,e.sent().data]}}))}))},e.prototype.invokeTopXDataQuery=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){return t={queries:[{query:e,bucketIndex:0}]},[2,this._post("/api/v5/query/topXdata",t)]}))}))},e.prototype.invokeSQLQuery=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){return t={query:e},[2,this._post("/api/v5/query/sql",t)]}))}))},e.prototype._get=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return void 0!==this.region?[3,2]:[4,this._getRegionFromDatasource()];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.$http({method:"GET",url:this.baseUrl+"/"+this.region+e})];case 3:return[2,n.sent()];case 4:throw t=n.sent(),Object(r.a)(t),t.err?t.err:t;case 5:return[2]}}))}))},e.prototype._post=function(e,t){return s(this,void 0,void 0,(function(){var n,i;return c(this,(function(o){switch(o.label){case 0:return void 0!==this.region?[3,2]:[4,this._getRegionFromDatasource()];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.$http({method:"POST",url:this.baseUrl+"/"+this.region+e,data:t})];case 3:return(n=o.sent()).data?[2,n.data]:[2,[]];case 4:throw i=o.sent(),Object(r.a)(i),i.err?i.err:i;case 5:return[2]}}))}))},e}();a.a.module("grafana.services").service("kentikAPISrv",u)},function(e,t){e.exports=i},,function(e,t){e.exports='<h3 class="page-heading">Enter your Kentik Credentials</h3>\n<div class="gf-form-group">\n  <div class="gf-form" ng-if="ctrl.apiError && ctrl.appModel.enabled">\n    <i class="fa fa-exclamation-circle" style="color: #ca4333;">\n      <span>Invalid API credentials. This app wont work until the credentials are updated.</span>\n    </i>\n  </div>\n  <div class="gf-form">\n    <label class="gf-form-label width-10">Email</label>\n    \x3c!-- Hidden input to stop chrome from autofilling --\x3e\n    <input style="display:none;" type="text" name="somefakename" />\n    <input type="text" class="gf-form-input width-30 max-width-30" ng-model=\'ctrl.appModel.jsonData.email\' placeholder="email" />\n  </div>\n\n  <div class="gf-form">\n    <label class="gf-form-label width-10">Region\n      <tip>US and EU regions are available. Default is US. A custom url can also be specified.</tip>\n    </label>\n    <div class="gf-form-select-wrapper">\n      <select class="gf-form-input" ng-model="ctrl.appModel.jsonData.region" ng-options="f.value as f.text for f in ctrl.regionTypes"></select>\n    </div>\n  </div>\n\n    \x3c!-- custom endpoint should display the url --\x3e\n  <div ng-if="ctrl.appModel.jsonData.region === \'custom\'" class="gf-form">\n    <label class="gf-form-label width-10">Custom URL\n      <tip>Specify custom url</tip>\n    </label>\n    <div ng-if="ctrl.appModel.jsonData.region === \'custom\'">\n      <input type="text" class="gf-form-input width-30 max-width-30" ng-model=\'ctrl.appModel.jsonData.dynamicUrl\' placeholder="https://grafana-api.kentik.com/api/v5" />\n    </div>\n  </div>\n\n  <div class="gf-form-inline">\n    <div class="gf-form kentik-inline-field-margin--right">\n      <label class="gf-form-label width-10">Api Token</label>\n      \x3c!-- Hidden input to stop chrome from autofilling --\x3e\n      <input style="display:none;" type="password" name="anotherfakename" />\n      <input type="password" class="gf-form-input width-30 max-width-30" ng-model="ctrl.appModel.secureJsonData.token" ng-if="!ctrl.appModel.jsonData.tokenSet"\n        placeholder="api token" />\n      <div ng-if="ctrl.appModel.jsonData.tokenSet" class="gf-form">\n        <input type="text" class="gf-form-input max-width-20" disabled="disabled" value="saved" />\n        <div ng-if="ctrl.appModel.enabled">\n          <i class="fa fa-exclamation-triangle" ng-if="ctrl.apiError" bs-tooltip="\'Could not validate api Token.\'"></i>\n        </div>\n      </div>\n    </div>\n    <div class="gf-form">\n      <a class="btn btn-danger btn-small" href="#" ng-click="ctrl.reset()" ng-if="ctrl.appModel.jsonData.tokenSet">reset</a>\n    </div>\n  </div>\n</div>\n\n<div ng-if="ctrl.appModel.jsonData.tokenSet && ctrl.apiValidated" class="kentik-enabled-box">\n  <i class="icon-gf icon-gf-check icon-gf-check kentik-icon-success"></i> Successfully enabled. <strong>Next up:\n  </strong><a href="dashboard/db/kentik-home" class="external-link">Go to Kentik Home Dashboard</a>\n</div>\n'},,,,,function(e,t,n){"use strict";n.r(t);n(14),n(19);var i=n(8),r=n.n(i),o=n(5),a=n(1),s=n(0),c=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,s)}c((i=i.apply(e,t||[])).next())}))},u=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=function(){function e(e,t,n){this.$scope=e,this.backendSrv=n,this.apiValidated=!1,this.apiError=!1,this.regionTypes=[{value:"default",text:"US (default)"},{value:"eu",text:"EU"},{value:"custom",text:"Custom"}],this.appEditCtrl.setPreUpdateHook(this.preUpdate.bind(this)),this.appEditCtrl.setPostUpdateHook(this.postUpdate.bind(this)),this.appModel.jsonData||(this.appModel.jsonData={}),this.appModel.secureJsonData||(this.appModel.secureJsonData={}),void 0===this.appModel.jsonData.region&&(this.appModel.jsonData.region="default"),this.kentik=new o.a(this.backendSrv,t),this.kentik.setRegion(this.appModel.jsonData.region),this.appModel.enabled&&this.appModel.jsonData.tokenSet&&this.validateApiConnection()}return e.$inject=["$scope","$http","backendSrv"],e.prototype.preUpdate=function(){return this.appModel.secureJsonData.token&&(this.appModel.jsonData.tokenSet=!0),this.initDatasource()},e.prototype.postUpdate=function(){return c(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.appModel.enabled?[4,this.validateApiConnection()]:[2,Promise.resolve()];case 1:return e.sent(),[2,{url:"dashboard/db/kentik-home",message:"Kentik Connect Pro app installed!"}]}}))}))},e.prototype.validateApiConnection=function(){return c(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.kentik.getUsers()];case 1:e=t.sent();try{e.hasOwnProperty("data")&&(this.apiValidated=!0,Object(a.b)("API working!","","success"))}catch(e){Object(a.a)("Unexpected result from API: "+e),this.apiValidated=!1,this.apiError=!0}return[3,3];case 2:return t.sent(),this.apiValidated=!1,this.apiError=!0,[3,3];case 3:return this.$scope.$digest(),[2]}}))}))},e.prototype.reset=function(){this.appModel.jsonData.email="",this.appModel.jsonData.tokenSet=!1,this.appModel.jsonData.region="default",this.appModel.jsonData.dynamicUrl="",this.appModel.secureJsonData={},this.apiValidated=!1},e.prototype.initDatasource=function(){return c(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,c,l,p,d=this;return u(this,(function(u){switch(u.label){case 0:return[4,this.backendSrv.get("/api/datasources")];case 1:return e=u.sent(),t=!1,n=!1,i=NaN,s.forEach(e,(function(e){if("kentik-ds"===e.type)return t=!0,i=e.id,n=!0,e.jsonData.region!==d.appModel.jsonData.region&&(n=!0),void(e.jsonData!==d.appModel.jsonData&&(n=!0))})),r=[],t&&!n?[3,5]:(o={name:"kentik",type:"kentik-ds",access:"proxy",jsonData:this.appModel.jsonData},n?(c=(a=r).push,[4,this.backendSrv.put("/api/datasources/"+i,o)]):[3,3]);case 2:return c.apply(a,[u.sent()]),[3,5];case 3:return p=(l=r).push,[4,this.backendSrv.post("/api/datasources",o)];case 4:p.apply(l,[u.sent()]),u.label=5;case 5:return[2,r]}}))}))},e}();l.template=r.a;var p=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,s)}c((i=i.apply(e,t||[])).next())}))},d=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h=function(){function e(e,t,n,i){this.$scope=e,this.$location=t,this.devices=[],this.pageReady=!1,this.kentik=new o.a(i,n),this.fetchDevices()}return e.$inject=["$scope","$location","$http","backendSrv"],e.prototype.fetchDevices=function(){return p(this,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:return e=this,[4,this.kentik.getDevices()];case 1:return e.devices=t.sent(),this.pageReady=!0,this.$scope.$apply(),[2]}}))}))},e.prototype.refresh=function(){this.fetchDevices()},e.prototype.gotoDashboard=function(e){this.$location.path("/dashboard/db/kentik-top-talkers").search({"var-device":e.device_name})},e.prototype.gotoDeviceDetail=function(e){this.$location.url("/plugins/kentik-app/page/device-details?device="+e.id)},e}();h.templateUrl="components/device_list.html";var f=n(2),v=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,s)}c((i=i.apply(e,t||[])).next())}))},b=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},y=function(){function e(e,t,n,i,r){this.$scope=e,this.$http=t,this.$location=n,this.backendSrv=i,this.alertSrv=r,this.kentik={},this.region="",this.device={},this.deviceDTO={},this.pageReady=!1,this.initRegion()}return e.$inject=["$scope","$http","$location","backendSrv","alertSrv"],e.prototype.initRegion=function(){return v(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return[4,this.backendSrv.get("/api/datasources")];case 1:return e=t.sent(),this.region=Object(f.a)(e),this.kentik=new o.a(this.backendSrv,this.$http),this.kentik.setRegion(this.region),[4,this.fetchDevice(this.$location.search().device)];case 2:return t.sent(),[2]}}))}))},e.prototype.addIP=function(){this.otherIps.push({ip:""})},e.prototype.removeIP=function(e){this.otherIps.splice(e,1)},e.prototype.fetchDevice=function(e){return v(this,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return[4,this.backendSrv.get("/api/plugin-proxy/kentik-app/"+this.region+"/api/v5/device/"+e)];case 1:return t=n.sent(),this.device=t.device,this.updateDeviceDTO(),this.pageReady=!0,this.$scope.$apply(),[2]}}))}))},e.prototype.gotoDashboard=function(e){this.$location.url("/dashboard/db/kentik-top-talkers?var-device="+e)},e.prototype.updateDeviceDTO=function(){this.deviceDTO={device_id:this.device.id,device_name:this.device.device_name,device_type:this.device.device_type,device_description:this.device.device_description,device_flow_type:this.device.device_flow_type,device_sample_rate:parseInt(this.device.device_sample_rate,10),minimize_snmp:this.device.minimize_snmp,device_snmp_ip:this.device.device_snmp_ip,device_snmp_community:this.device.device_snmp_community,device_bgp_type:this.device.device_bgp_type,device_bgp_password:this.device.device_bgp_password,device_bgp_neighbor_ip:this.device.device_bgp_neighbor_ip,device_bgp_neighbor_asn:parseInt(this.device.device_bgp_neighbor_asn,10)}},e.prototype.update=function(){return v(this,void 0,void 0,(function(){var e,t,n;return b(this,(function(i){switch(i.label){case 0:this.deviceDTO.device_snmp_ip||delete this.deviceDTO.device_snmp_ip,this.deviceDTO.device_snmp_community||delete this.deviceDTO.device_snmp_community,e={device:this.deviceDTO},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.backendSrv.put("/api/plugin-proxy/kentik-app/"+this.region+"/api/v5/device/"+this.deviceDTO.device_id,e)];case 2:return"err"in(t=i.sent())?(Object(a.b)("Device Update failed.",t.err,"error"),[3,4]):(Object(a.b)("Device Updated.",this.deviceDTO.device_name,"success"),[2,this.fetchDevice(this.deviceDTO.device_id)]);case 3:return"error"in(n=i.sent()).data?(Object(a.b)("Device Update failed.",n.data.error,"error"),[2]):(Object(a.b)("Device Update failed.",n,"error"),[2]);case 4:return[2]}}))}))},e}();y.templateUrl="components/device_details.html";var g=n(3),m=n.n(g),k=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,s)}c((i=i.apply(e,t||[])).next())}))},w=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},_={device_name:"",device_type:"router",device_description:"",device_flow_type:"sflow",device_sample_rate:5,sending_ips:"",minimize_snmp:!1,device_bgp_type:"none",device_snmp_ip:"",device_snmp_community:""},D=function(){function e(e,t,n){this.$location=e,this.backendSrv=t,this.alertSrv=n,this.region="",this.device=m.a.copy(_),this.sendingIps=[{ip:""}],this.initRegion()}return e.$inject=["$location","backendSrv","alertSrv"],e.prototype.initRegion=function(){return k(this,void 0,void 0,(function(){var e;return w(this,(function(t){switch(t.label){case 0:return[4,this.backendSrv.get("/api/datasources")];case 1:return e=t.sent(),this.region=Object(f.a)(e),[2]}}))}))},e.prototype.addIP=function(){this.sendingIps.push({ip:""})},e.prototype.removeIP=function(e){this.sendingIps.splice(e,1)},e.prototype.addDevice=function(){return k(this,void 0,void 0,(function(){var e,t;return w(this,(function(n){switch(n.label){case 0:return e=[],s.forEach(this.sendingIps,(function(t){e.push(t.ip)})),this.device.sending_ips=e.join(),[4,this.backendSrv.post("/api/plugin-proxy/kentik-app/"+this.region+"/api/v5/device",this.device)];case 1:if("err"in(t=n.sent()))throw this.alertSrv.set("Device Add failed.",t.err,"error"),new Error("Device Add failed: "+t.err);return this.$location.url("/plugins/kentik-app/page/device-list"),[2]}}))}))},e}();D.templateUrl="components/add_device.html";var x=n(6);n.d(t,"DeviceListCtrl",(function(){return h})),n.d(t,"DeviceDetailsCtrl",(function(){return y})),n.d(t,"AddDeviceCtrl",(function(){return D})),n.d(t,"ConfigCtrl",(function(){return l})),Object(x.loadPluginCss)({dark:"plugins/kentik-app/styles/dark.css",light:"plugins/kentik-app/styles/light.css"})},function(e,t){},,,,,function(e,t){}])}));