{"version":3,"sources":["../../../src/components/add_device.js"],"names":["defaults","device_name","device_type","device_description","device_flow_type","device_sample_rate","sending_ips","minimize_snmp","device_bgp_type","device_snmp_ip","device_snmp_community","AddDeviceCtrl","$scope","$injector","$location","backendSrv","alertSrv","device","copy","ip","push","index","splice","ips","forEach","join","post","then","resp","set","err","url","templateUrl"],"mappings":";;;;;;;;;AAAA;;;;AACA;;;;;;;;AAEA,IAAIA,WAAW;AACbC,eAAa,EADA;AAEbC,eAAa,QAFA;AAGbC,sBAAoB,EAHP;AAIbC,oBAAkB,OAJL;AAKbC,sBAAoB,CALP;AAMbC,eAAa,EANA;AAObC,iBAAe,KAPF;AAQbC,mBAAiB,MARJ;AASbC,kBAAgB,EATH;AAUbC,yBAAuB;AAVV,CAAf;;IAaaC,a,WAAAA,a;AACX;AACA,yBAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,SAA/B,EAA0CC,UAA1C,EAAsDC,QAAtD,EAAgE;AAAA;;AAC9D,SAAKD,UAAL,GAAkBA,UAAlB;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKF,SAAL,GAAiBA,SAAjB;AACA,SAAKG,MAAL,GAAc,kBAAQC,IAAR,CAAalB,QAAb,CAAd;AACA,SAAKM,WAAL,GAAmB,CAAC,EAACa,IAAI,EAAL,EAAD,CAAnB;AACD;;;;4BAEO;AACN,WAAKb,WAAL,CAAiBc,IAAjB,CAAsB,EAACD,IAAI,EAAL,EAAtB;AACD;;;6BAEQE,K,EAAO;AACd,WAAKf,WAAL,CAAiBgB,MAAjB,CAAwBD,KAAxB,EAA+B,CAA/B;AACD;;;gCAEW;AAAA;;AACV,UAAIE,MAAM,EAAV;AACA,uBAAEC,OAAF,CAAU,KAAKlB,WAAf,EAA4B,UAASa,EAAT,EAAa;AACvCI,YAAIH,IAAJ,CAASD,GAAGA,EAAZ;AACD,OAFD;AAGA,WAAKF,MAAL,CAAYX,WAAZ,GAA0BiB,IAAIE,IAAJ,EAA1B;AACA,WAAKV,UAAL,CACGW,IADH,CACQ,4CADR,EACsD,KAAKT,MAD3D,EAEGU,IAFH,CAEQ,gBAAQ;AACZ,YAAI,SAASC,IAAb,EAAmB;AACjB,gBAAKZ,QAAL,CAAca,GAAd,CAAkB,oBAAlB,EAAwCD,KAAKE,GAA7C,EAAkD,OAAlD;AACD,SAFD,MAEO;AACL,gBAAKhB,SAAL,CAAeiB,GAAf,CAAmB,sCAAnB;AACD;AACF,OARH;AASD;;;;;;AAGHpB,cAAcqB,WAAd,GAA4B,4BAA5B","file":"add_device.js","sourcesContent":["import _ from 'lodash';\nimport angular from 'angular';\n\nvar defaults = {\n  device_name: '',\n  device_type: 'router',\n  device_description: '',\n  device_flow_type: 'sflow',\n  device_sample_rate: 5,\n  sending_ips: '',\n  minimize_snmp: false,\n  device_bgp_type: 'none',\n  device_snmp_ip: '',\n  device_snmp_community: ''\n};\n\nexport class AddDeviceCtrl {\n  /** @ngInject */\n  constructor($scope, $injector, $location, backendSrv, alertSrv) {\n    this.backendSrv = backendSrv;\n    this.alertSrv = alertSrv;\n    this.$location = $location;\n    this.device = angular.copy(defaults);\n    this.sending_ips = [{ip: ''}];\n  }\n\n  addIP() {\n    this.sending_ips.push({ip: ''});\n  }\n\n  removeIP(index) {\n    this.sending_ips.splice(index, 1);\n  }\n\n  addDevice() {\n    var ips = [];\n    _.forEach(this.sending_ips, function(ip) {\n      ips.push(ip.ip);\n    });\n    this.device.sending_ips = ips.join();\n    this.backendSrv\n      .post(\"/api/plugin-proxy/kentik-app/api/v5/device\", this.device)\n      .then(resp => {\n        if ('err' in resp) {\n          this.alertSrv.set(\"Device Add failed.\", resp.err, 'error');\n        } else {\n          this.$location.url(\"/plugins/kentik-app/page/device-list\");\n        }\n      });\n  }\n}\n\nAddDeviceCtrl.templateUrl = 'components/add_device.html';\n"]}